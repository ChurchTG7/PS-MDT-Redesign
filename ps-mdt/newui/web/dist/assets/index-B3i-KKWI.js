var es=Object.defineProperty;var ss=(s,a,r)=>a in s?es(s,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[a]=r;var Se=(s,a,r)=>ss(s,typeof a!="symbol"?a+"":a,r);import{j as e,A as ze,m as ve}from"./animation-vendor-CEGfYIgW.js";import{a as ts,r as l,g as as,R as ge}from"./react-vendor-DJ1oPbzn.js";import{L as me}from"./map-vendor-C5cz6M3d.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const m of n.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function r(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(t){if(t.ep)return;t.ep=!0;const n=r(t);fetch(t.href,n)}})();var $e,Te=ts;$e=Te.createRoot,Te.hydrateRoot;function rs(){try{return window.localStorage.getItem("ps-mdt:debug")==="true"}catch{}return!1}function is(s,a){const[r,c]=l.useState(()=>{try{const n=window.localStorage.getItem(s);if(n==="1080"||n==="720")return n}catch{}return a});return[r,()=>{const n=r==="1080"?"720":"1080";c(n);try{window.localStorage.setItem(s,n)}catch{}}]}const ls=l.memo(function({forcedOpen:a,children:r}){var y,h,A,T;const[c,t]=is("ps-mdt:resolution","1080"),[n,m]=l.useState(!1),[j,b]=l.useState(rs()),p=l.useMemo(()=>({1080:{width:"98vw",maxWidth:2560,height:"98vh",maxHeight:1440,label:"Full Screen",description:"Maximum viewing area",peekDistance:"92vh",aspectRatio:"16/9",scale:1,padding:"2.5vh"},720:{width:"70vw",maxWidth:1280,height:"75vh",maxHeight:800,label:"Compact",description:"Smaller, space-saving view",peekDistance:"70vh",aspectRatio:"16/10",scale:.85,padding:"2vh"}}),[])[c],g=l.useRef(null),[i,x]=l.useState(null);return l.useEffect(()=>{const o=u=>{(u.ctrlKey||u.metaKey)&&u.key==="m"&&(u.preventDefault(),t())};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[t]),l.useEffect(()=>{var F,D;if(!((D=(F=import.meta)==null?void 0:F.env)!=null&&D.DEV))return;let o=!0;const u=()=>{try{const L=g.current;if(!L)return;const U=L.getBoundingClientRect();if(!o)return;x({top:Math.round(U.top),left:Math.round(U.left),width:Math.round(U.width),height:Math.round(U.height),right:Math.round(window.innerWidth-(U.left+U.width)),bottom:Math.round(window.innerHeight-(U.top+U.height))})}catch{}};u();const R=setInterval(u,300);return window.addEventListener("resize",u),()=>{o=!1,clearInterval(R),window.removeEventListener("resize",u)}},[c,a]),e.jsx("div",{className:"tablet-viewport-layer",style:{position:"fixed",inset:0,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",background:"transparent",zIndex:1e3},children:e.jsx("div",{className:"tablet-viewport-stage",style:{position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",background:"transparent"},children:e.jsx(ze,{children:a&&e.jsxs(ve.div,{ref:g,className:(h=(y=import.meta)==null?void 0:y.env)!=null&&h.DEV?"ps-mdt-debug-wrapper":"",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:n?p.peekDistance:0},exit:{opacity:0,scale:.96,y:15},transition:{duration:.25,ease:[.16,1,.3,1],y:{duration:.2,ease:[.4,0,.2,1]}},style:{width:p.width,maxWidth:p.maxWidth,height:p.height,maxHeight:p.maxHeight,aspectRatio:p.aspectRatio,perspective:1e3,pointerEvents:"auto",display:"flex",alignItems:"stretch",justifyContent:"stretch",position:"relative",overflow:"hidden"},children:[((T=(A=import.meta)==null?void 0:A.env)==null?void 0:T.DEV)&&i&&e.jsxs("div",{style:{position:"absolute",left:8,top:8,zIndex:9999,background:"rgba(0,0,0,0.6)",color:"#e6f6ff",padding:"6px 8px",borderRadius:6,fontSize:12,lineHeight:"1.2"},children:[e.jsx("div",{style:{fontWeight:700,marginBottom:4},children:"wrapper"}),e.jsxs("div",{children:["top: ",i.top,"px"]}),e.jsxs("div",{children:["left: ",i.left,"px"]}),e.jsxs("div",{children:["width: ",i.width,"px"]}),e.jsxs("div",{children:["height: ",i.height,"px"]}),e.jsxs("div",{children:["right: ",i.right,"px"]}),e.jsxs("div",{children:["bottom: ",i.bottom,"px"]})]}),e.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",paddingTop:"20px"},children:[e.jsxs(ve.button,{whileHover:{opacity:.9,height:"24px"},onClick:()=>m(!n),style:{position:"absolute",top:"0",left:"50%",width:"90%",maxWidth:"90%",height:"18px",zIndex:25,borderRadius:"8px 8px 0 0",background:n?"linear-gradient(180deg, rgba(34,197,94,0.25) 0%, rgba(34,197,94,0.1) 100%)":"linear-gradient(180deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.1) 100%)",border:"none",borderBottom:n?"2px solid rgba(34,197,94,0.4)":"1px solid rgba(255,255,255,0.1)",color:n?"rgba(34,197,94,1)":"rgba(255,255,255,0.5)",fontSize:10,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:6,opacity:.7,backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",transition:"all 0.2s ease",transform:"translateX(-50%)",transformOrigin:"center center",boxShadow:n?"0 2px 12px rgba(34,197,94,0.2)":"0 2px 6px rgba(0,0,0,0.2)"},title:n?"Return tablet to normal position":"Peek over tablet to see the world",children:[e.jsx("i",{className:`fa-solid ${n?"fa-eye":"fa-chevron-down"}`,style:{fontSize:10}}),e.jsx("span",{style:{fontSize:10,textTransform:"uppercase",letterSpacing:"1px"},children:n?"Peeking":"Peek Mode"}),e.jsx("i",{className:`fa-solid ${n?"fa-chevron-up":"fa-chevron-down"}`,style:{fontSize:10}})]}),e.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100% - 20px)",padding:p.padding,borderRadius:"0 0 2.8vh 2.8vh",background:c==="1080"?"linear-gradient(145deg, rgba(26,31,46,0.75) 0%, rgba(15,20,25,0.65) 100%)":"linear-gradient(145deg, rgba(31,26,46,0.7) 0%, rgba(20,15,30,0.6) 100%)",boxShadow:c==="1080"?`
                      0 0 0 2px rgba(59,130,246,0.08),
                      inset 0 2px 4px rgba(59,130,246,0.05),
                      inset 0 -2px 4px rgba(0,0,0,0.4),
                      0 4px 24px rgba(0,0,0,0.3)
                    `:`
                      0 0 0 2px rgba(168,85,247,0.08),
                      inset 0 2px 4px rgba(168,85,247,0.05),
                      inset 0 -2px 4px rgba(0,0,0,0.4),
                      0 2px 16px rgba(0,0,0,0.25)
                    `},children:[e.jsx(ve.button,{whileHover:{opacity:.8,scale:1.1},whileTap:{scale:.9},onClick:t,style:{position:"absolute",top:"0.8vh",right:"1vw",zIndex:20,width:"20px",height:"20px",padding:0,borderRadius:4,background:"rgba(0,0,0,0.25)",border:"1px solid rgba(255,255,255,0.08)",color:c==="1080"?"rgba(96,165,250,0.7)":"rgba(192,132,252,0.7)",fontSize:9,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:.4,backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"all 0.2s ease"},title:`${p.label} Mode - Click to switch (Ctrl/Cmd + M)`,children:e.jsx("i",{className:`fa-solid ${c==="1080"?"fa-compress":"fa-maximize"}`,style:{fontSize:8}})}),e.jsx("div",{style:{position:"absolute",top:"1.2vh",left:"50%",transform:"translateX(-50%)",width:80,height:8,borderRadius:999,background:"linear-gradient(180deg, rgba(15,20,30,0.9), rgba(10,12,18,0.95))",border:"1px solid rgba(0,0,0,0.6)",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.8)",zIndex:10},children:e.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:5,height:5,borderRadius:"50%",background:"radial-gradient(circle, rgba(56,189,248,0.4), rgba(30,58,138,0.8))",boxShadow:"0 0 4px rgba(56,189,248,0.6)"}})}),e.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",borderRadius:"1.8vh",background:"linear-gradient(180deg, rgba(18,25,43,0.85), rgba(11,19,34,0.75))",border:c==="1080"?"1px solid rgba(59,130,246,0.2)":"1px solid rgba(168,85,247,0.2)",boxShadow:c==="1080"?`
                        inset 0 0 0 1px rgba(59,130,246,0.12),
                        inset 0 2px 6px rgba(8,12,20,0.28),
                        0 24px 48px rgba(8,12,20,0.22)
                      `:`
                        inset 0 0 0 1px rgba(168,85,247,0.12),
                        inset 0 2px 6px rgba(12,8,20,0.28),
                        0 16px 32px rgba(12,8,20,0.2)
                      `,backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",inset:0,background:c==="1080"?"radial-gradient(circle at 50% 0%, rgba(59,130,246,0.04), transparent 60%)":"radial-gradient(circle at 50% 0%, rgba(168,85,247,0.04), transparent 60%)",pointerEvents:"none"}}),r]}),e.jsxs("div",{style:{position:"absolute",bottom:"1vh",left:"1vh",zIndex:15,padding:"2px 6px",borderRadius:6,background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.05)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",display:"flex",alignItems:"center",gap:4,opacity:.35,transition:"opacity 0.2s ease",pointerEvents:"none"},children:[e.jsx("i",{className:`fa-solid ${c==="1080"?"fa-compress":"fa-maximize"}`,style:{fontSize:7,color:c==="1080"?"rgba(96,165,250,0.8)":"rgba(192,132,252,0.8)"}}),e.jsx("span",{style:{fontSize:7,fontWeight:500,color:"rgba(255,255,255,0.6)",textTransform:"uppercase",letterSpacing:"0.3px"},children:p.label})]}),e.jsx("div",{style:{position:"absolute",top:"50%",right:-3,transform:"translateY(-50%)",width:6,height:50,borderRadius:"0 3px 3px 0",background:"linear-gradient(90deg, rgba(20,25,35,0.9), rgba(15,18,25,0.8))",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.6)"}}),e.jsx("div",{style:{position:"absolute",top:"35%",left:-3,width:6,height:35,borderRadius:"3px 0 0 3px",background:"linear-gradient(90deg, rgba(15,18,25,0.8), rgba(20,25,35,0.9))",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.6)"}})]})]})]})})})})}),Ae={citizenid:"ABC12345",firstname:"John",lastname:"Mitchell",callsign:"1A-12",rank:"Sergeant",department:"LSPD",badgeNumber:"1247",phone:"555-0123",image:"https://i.pravatar.cc/300?img=12",bio:"Veteran officer with 8 years of service. Specialized in traffic enforcement and community policing.",preferredName:"Mitch",email:"j.mitchell@lspd.gov"},ns={activeUnits:12,activeWarrants:8,activeCalls:5,openReports:23,recentIncidents:15,openCases:31,onDutyOfficers:18,criticalBolos:3},cs=[{id:1,officerName:"Officer J. Mitchell",action:"Created traffic report - Speeding violation",actionType:"report",timestamp:new Date(Date.now()-2*6e4).toISOString(),details:"Traffic Stop - Speeding on Route 68"},{id:2,officerName:"Officer S. Rodriguez",action:"Logged incident - Vehicle pursuit",actionType:"incident",timestamp:new Date(Date.now()-15*6e4).toISOString(),details:"10-80 - Vehicle Pursuit on Del Perro Freeway"},{id:3,officerName:"Detective M. Hayes",action:"Created BOLO - Vehicle",actionType:"bolo",timestamp:new Date(Date.now()-32*6e4).toISOString(),details:"BOLO - Stolen Red Sedan, ABC 123"},{id:4,officerName:"Judge Williams",action:"Warrant issued",actionType:"warrant",timestamp:new Date(Date.now()-60*6e4).toISOString(),details:"Warrant for Robert Johnson - Armed Robbery"},{id:5,officerName:"Officer T. Chen",action:"Created arrest report",actionType:"report",timestamp:new Date(Date.now()-120*6e4).toISOString(),details:"Arrest Report - Robbery at Innocence Blvd"},{id:6,officerName:"Evidence Tech K. Williams",action:"Logged evidence",actionType:"evidence",timestamp:new Date(Date.now()-180*6e4).toISOString(),details:"Evidence Log - Glock 19 9mm handgun from case LSPD-2025-002"}],os=[{id:1,citizenid:"DEF67890",name:"Robert Johnson",charges:"Armed Robbery, Assault with Deadly Weapon",issueDate:"2025-01-10T14:30:00",issuedBy:"Judge Williams",priority:"high",lastSeen:"2025-01-14T18:45:00",status:"active"},{id:2,citizenid:"GHI11223",name:"Sarah Martinez",charges:"Grand Theft Auto, Evading Police",issueDate:"2025-01-12T09:15:00",issuedBy:"Judge Thompson",priority:"high",lastSeen:"2025-01-13T22:00:00",status:"active"},{id:3,citizenid:"JKL44556",name:"Michael Brown",charges:"Drug Trafficking, Possession with Intent",issueDate:"2025-01-14T11:00:00",issuedBy:"Judge Williams",priority:"medium",lastSeen:"2025-01-15T16:20:00",status:"active"}],Fe=[{id:"R-001",type:"report",caseNumber:"LSPD-2025-001",title:"Traffic Stop - Speeding Violation",reportType:"traffic",status:"closed",priority:"low",officerName:"Officer J. Mitchell",officerBadge:"1247",date:"2025-01-15T10:30:00",location:"Route 68 & Sandy Shores",code:"10-50",description:"Vehicle was clocked at 95 MPH in a 65 MPH zone. Driver was cooperative and issued citation.",suspects:["Jane Smith"],witnesses:[],charges:["Speeding"],evidence:[],notes:"Driver has clean record, issued warning."},{id:"R-002",type:"report",caseNumber:"LSPD-2025-002",title:"Armed Robbery at 24/7 Store",reportType:"incident",status:"active",priority:"high",officerName:"Detective M. Hayes",officerBadge:"0892",date:"2025-01-15T14:22:00",location:"Innocence Blvd 24/7",code:"10-32",description:"Suspect entered store with handgun, demanded cash from register. Fled on foot northbound.",suspects:["Unknown Male"],witnesses:["Store Clerk - Ahmed Hassan","Customer - Lisa Wong"],charges:["Armed Robbery","Brandishing a Firearm"],evidence:["Security Footage","Shell Casings"],notes:"Suspect approximately 6ft, wearing black hoodie and mask.",units:[],civilians:[]},{id:"R-003",type:"report",caseNumber:"LSPD-2025-003",title:"Domestic Disturbance",reportType:"incident",status:"pending",priority:"medium",officerName:"Officer S. Rodriguez",officerBadge:"1456",date:"2025-01-15T20:15:00",location:"1234 Grove Street",code:"10-25",description:"Called to residence for noise complaint. Found couple arguing, no violence observed.",suspects:[],witnesses:["Neighbor - Tom Anderson"],charges:[],evidence:[],notes:"Both parties calmed down, no further action needed.",units:[],civilians:["Resident 1","Resident 2"]},{id:"I-001",type:"incident",caseNumber:"LSPD-INC-2025-001",title:"10-80 Vehicle Pursuit",date:"2025-01-15T16:45:00",officerName:"Officer S. Rodriguez",location:"Del Perro Freeway",code:"10-80",priority:"high",status:"resolved",description:"Pursuit of stolen vehicle began on Del Perro Freeway, ended after suspect crashed near Vespucci Beach. Suspect apprehended.",units:["1A-12","1A-15","1B-20"],suspects:["Mark Williams"],civilians:[],outcome:"Suspect arrested for GTA and evading",charges:["Grand Theft Auto","Evading Police"],evidence:[],witnesses:[]},{id:"I-002",type:"incident",caseNumber:"LSPD-INC-2025-002",title:"10-31 Burglary in Progress",date:"2025-01-15T22:10:00",officerName:"Officer T. Chen",location:"Rockford Hills - Residential",code:"10-31",priority:"critical",status:"active",description:"Silent alarm triggered at luxury residence. Units responding code 3.",units:["1A-10","1A-12","K9-1"],suspects:[],civilians:[],outcome:null,charges:[],evidence:[],witnesses:[]},{id:"I-003",type:"incident",caseNumber:"LSPD-INC-2025-003",title:"10-53 Traffic Accident",date:"2025-01-15T11:30:00",officerName:"Officer J. Mitchell",location:"Legion Square",code:"10-53",priority:"medium",status:"closed",description:"Two-vehicle collision at intersection. Minor injuries, no fatalities.",units:["1A-12"],suspects:[],civilians:["Driver 1","Driver 2"],outcome:"Citations issued for failure to yield",charges:[],evidence:[],witnesses:[]}],ds=Fe.filter(s=>s.type==="report"),xs=[{id:"B-001",type:"vehicle",title:"Stolen Red Sedan",description:"Red 4-door sedan, last seen heading north on Great Ocean Highway. Suspect is armed and dangerous.",issuedBy:"Detective M. Hayes",date:"2025-01-15T12:00:00",lastSeen:"Great Ocean Highway near Paleto Bay",priority:"high",status:"active",details:{plate:"ABC 123",model:"Vapid Stanier",color:"Red",distinguishingFeatures:"Broken rear left tail light, dent on driver side door"}},{id:"B-002",type:"person",title:"Robbery Suspect",description:"Male suspect wanted in connection with multiple store robberies. Considered armed and dangerous.",issuedBy:"Detective R. Harrison",date:"2025-01-14T09:30:00",lastSeen:"Downtown Los Santos",priority:"critical",status:"active",details:{name:"Unknown",distinguishingFeatures:"Approximately 6ft tall, athletic build, black hoodie, red shoes, distinctive dragon tattoo on left forearm"}},{id:"B-003",type:"vehicle",title:"Hit and Run Vehicle",description:"White SUV involved in hit and run on Elgin Avenue. Driver fled scene.",issuedBy:"Officer K. Park",date:"2025-01-13T18:45:00",lastSeen:"Elgin Avenue, heading towards Vinewood",priority:"medium",status:"expired",details:{plate:"XYZ 789",model:"Dundreary Landstalker",color:"White",distinguishingFeatures:"Front bumper damage, missing passenger side mirror"}}],ms=[{citizenid:"DEF67890",firstname:"Robert",lastname:"Johnson",dob:"1985-03-15",gender:"Male",nationality:"American",phone:"555-0198",image:"https://i.pravatar.cc/300?img=33",fingerprint:"FP-67890",licenses:{driver:!1,weapon:!1,business:!0},charges:[{charge:"Armed Robbery",date:"2025-01-10",officer:"Detective M. Hayes",fine:15e3,sentence:180},{charge:"Assault with Deadly Weapon",date:"2025-01-10",officer:"Detective M. Hayes",fine:1e4,sentence:120}],vehicles:[{plate:"DEF 456",model:"Bravado Buffalo",color:"Black",status:"Registered"}],notes:"Known associate of criminal organizations. Approach with caution.",flags:["Armed","Dangerous","Flight Risk"]},{citizenid:"GHI11223",firstname:"Sarah",lastname:"Martinez",dob:"1992-07-22",gender:"Female",nationality:"American",phone:"555-0234",image:"https://i.pravatar.cc/300?img=47",fingerprint:"FP-11223",licenses:{driver:!0,weapon:!1,business:!1},charges:[{charge:"Grand Theft Auto",date:"2025-01-12",officer:"Officer S. Rodriguez",fine:8e3,sentence:90}],vehicles:[],notes:"Multiple traffic violations on record.",flags:["Traffic Violations"]}],hs=[{id:"E-001",type:"Weapon",description:"Glock 19 9mm handgun recovered from suspect vehicle",location:"Evidence Locker A-15",officer:"Detective M. Hayes",date:"2025-01-15T14:30:00",associatedCase:"LSPD-2025-002",status:"stored",images:[],chain:[{officer:"Detective M. Hayes",date:"2025-01-15T14:30:00",action:"Collected from scene"},{officer:"Evidence Tech K. Williams",date:"2025-01-15T15:00:00",action:"Logged into evidence system"}]},{id:"E-002",type:"Digital",description:"Security camera footage from 24/7 store",location:"Digital Evidence Server",officer:"Officer T. Chen",date:"2025-01-15T14:45:00",associatedCase:"LSPD-2025-002",status:"analyzed",images:[],chain:[{officer:"Officer T. Chen",date:"2025-01-15T14:45:00",action:"Downloaded from store system"},{officer:"Detective M. Hayes",date:"2025-01-15T16:00:00",action:"Reviewed footage"}]},{id:"E-003",type:"Drug",description:"2.5kg of cocaine seized during traffic stop",location:"Evidence Locker B-08",officer:"Officer J. Mitchell",date:"2025-01-14T10:15:00",associatedCase:"LSPD-2025-005",status:"stored",images:[],chain:[{officer:"Officer J. Mitchell",date:"2025-01-14T10:15:00",action:"Seized during traffic stop"},{officer:"Evidence Tech K. Williams",date:"2025-01-14T11:00:00",action:"Processed and stored"}]}],gs=[{id:5001,text:'Client-side error: Cannot read property "foo" of undefined',time:new Date().toISOString()},{id:5002,text:"Uncaught TypeError: Failed to fetch",time:new Date().toISOString()},{id:5003,text:"Camera viewer crashed due to invalid feed id",time:new Date().toISOString()}],us=[{citizenid:"DEF67890",name:"Robert Johnson",type:"driver",status:"suspended",issueDate:"2020-05-10",expiryDate:"2025-05-10",points:12},{citizenid:"GHI11223",name:"Sarah Martinez",type:"driver",status:"valid",issueDate:"2019-07-22",expiryDate:"2026-07-22",points:3},{citizenid:"ABC12345",name:"John Mitchell",type:"weapon",status:"valid",issueDate:"2021-03-15",expiryDate:"2026-03-15",points:0}],fs=[{plate:"ABC 123",owner:"Robert Johnson",citizenid:"DEF67890",model:"Vapid Stanier",color:"Red",class:"Sedan",registrationDate:"2023-01-15",expiryDate:"2026-01-15",status:"stolen",insurance:"Expired"},{plate:"XYZ 789",owner:"Sarah Martinez",citizenid:"GHI11223",model:"Dundreary Landstalker",color:"White",class:"SUV",registrationDate:"2022-06-20",expiryDate:"2025-06-20",status:"registered",insurance:"Active"},{plate:"DEF 456",owner:"Robert Johnson",citizenid:"DEF67890",model:"Bravado Buffalo",color:"Black",class:"Sport",registrationDate:"2024-02-10",expiryDate:"2027-02-10",status:"registered",insurance:"Active"}],ps=[{id:"1",code:"(1)01",title:"Murder",description:"The unlawful killing of another human being with malice aforethought.",class:"Felony",category:"Crimes Against Persons",fine:5e4,jail:300},{id:"2",code:"(1)02",title:"Manslaughter",description:"The unlawful killing of another human being without malice.",class:"Felony",category:"Crimes Against Persons",fine:3e4,jail:180},{id:"3",code:"(1)03",title:"Assault with a Deadly Weapon",description:"An assault committed with any deadly weapon or instrument.",class:"Felony",category:"Crimes Against Persons",fine:1e4,jail:120},{id:"4",code:"(2)01",title:"Armed Robbery",description:"Taking property from another through force or threat with a weapon.",class:"Felony",category:"Crimes Against Property",fine:15e3,jail:180},{id:"5",code:"(2)02",title:"Grand Theft Auto",description:"The unlawful taking of a motor vehicle.",class:"Felony",category:"Crimes Against Property",fine:8e3,jail:90},{id:"6",code:"(3)01",title:"Speeding",description:"Operating a vehicle in excess of posted speed limits.",class:"Infraction",category:"Vehicle Code",fine:250,jail:0},{id:"7",code:"(3)02",title:"Reckless Driving",description:"Operating a vehicle with willful disregard for safety.",class:"Misdemeanor",category:"Vehicle Code",fine:1500,jail:15},{id:"8",code:"(4)01",title:"Drug Possession",description:"Possession of controlled substances without prescription.",class:"Misdemeanor",category:"Drug Offenses",fine:2e3,jail:30}],bs=[{id:"1",name:"John Mitchell",callsign:"1A-12",rank:"Sergeant",badge:"1247",department:"LSPD",status:"active",onDuty:!0,incidents:156,arrests:89,warnings:234},{id:"2",name:"Sarah Rodriguez",callsign:"1A-15",rank:"Officer II",badge:"1456",department:"LSPD",status:"active",onDuty:!0,incidents:98,arrests:54,warnings:178},{id:"3",name:"Michael Hayes",callsign:"Det-01",rank:"Detective",badge:"0892",department:"LSPD",status:"active",onDuty:!1,incidents:234,arrests:167,warnings:89},{id:"4",name:"Thomas Chen",callsign:"1A-10",rank:"Officer III",badge:"1389",department:"LSPD",status:"active",onDuty:!0,incidents:145,arrests:76,warnings:201}],js=[{id:"1",name:"James Wilson",appliedDate:"2025-01-10",status:"pending",experience:"5 years private security",reason:"Want to serve and protect the community"},{id:"2",name:"Emily Davis",appliedDate:"2025-01-12",status:"pending",experience:"Military Police - 3 years",reason:"Transition from military to civilian law enforcement"}],vs=[{id:"1",officer:"Officer K. Park",action:"Written Warning",reason:"Failed to follow proper evidence handling procedures",severity:"Minor",date:"2025-01-05"},{id:"2",officer:"Officer L. Thompson",action:"3-Day Suspension",reason:"Excessive force complaint - sustained after investigation",severity:"Major",date:"2024-12-20"}],Ns=[{officer:"John Mitchell",callsign:"1A-12",clockIn:"2025-01-15T08:00:00",clockOut:"2025-01-15T16:00:00",duration:"8h 0m",date:"2025-01-15"},{officer:"Sarah Rodriguez",callsign:"1A-15",clockIn:"2025-01-15T08:30:00",clockOut:"2025-01-15T16:30:00",duration:"8h 0m",date:"2025-01-15"},{officer:"Thomas Chen",callsign:"1A-10",clockIn:"2025-01-15T09:00:00",clockOut:null,duration:"On Duty",date:"2025-01-15"}],ys=[{id:"CAM-001",label:"Legion Square North",location:"Legion Square",coords:{x:215.98,y:-804.74,z:30.72},heading:180,status:"online",type:"security"},{id:"CAM-002",label:"MRPD Front Entrance",location:"Mission Row PD",coords:{x:425.13,y:-979.55,z:30.71},heading:90,status:"online",type:"security"},{id:"CAM-003",label:"Vinewood Blvd Intersection",location:"Vinewood",coords:{x:374.89,y:327.65,z:103.57},heading:270,status:"online",type:"traffic"},{id:"CAM-004",label:"Del Perro Pier",location:"Del Perro",coords:{x:-1826.89,y:-1221.23,z:13.02},heading:0,status:"offline",type:"security"}],ws=[{callsign:"1A-12",officer:"J. Mitchell",coords:{x:425.13,y:-979.55},heading:180,status:"available",lastUpdate:"2025-01-15T12:34:00"},{callsign:"1A-15",officer:"S. Rodriguez",coords:{x:-1826.89,y:-1221.23},heading:90,status:"responding",lastUpdate:"2025-01-15T12:33:00"},{callsign:"1A-10",officer:"T. Chen",coords:{x:215.98,y:-804.74},heading:270,status:"busy",lastUpdate:"2025-01-15T12:35:00"}],Cs={notifications:!0,soundEnabled:!0,autoRefresh:!0,refreshInterval:30,showMugshots:!0,compactMode:!1,theme:"dark"},ks={totalOfficers:45,onDutyOfficers:18,activeUnits:12,totalIncidents:1247,totalArrests:892,totalWarnings:2341,openCases:31,solvedCases:876,averageResponseTime:"4.2 minutes"},Be=[{code:"10-1",title:"Unable to Copy"},{code:"10-4",title:"Acknowledged"},{code:"10-7",title:"Out of Service"},{code:"10-8",title:"In Service"},{code:"10-10",title:"Civilian Dispute"},{code:"10-15",title:"Citizen Assist"},{code:"10-20",title:"Suspicious Person"},{code:"10-25",title:"Domestic Disturbance"},{code:"10-27",title:"Welfare Check"},{code:"10-28",title:"Abandoned Vehicle"},{code:"10-31",title:"Burglary in Progress"},{code:"10-32",title:"Armed Robbery"},{code:"10-33",title:"Officer Needs Assistance"},{code:"10-34",title:"Robbery in Progress"},{code:"10-35",title:"Major Crime Scene"},{code:"10-36",title:"Assault in Progress"},{code:"10-37",title:"Grand Theft Auto"},{code:"10-38",title:"Assault with Weapon"},{code:"10-50",title:"Traffic Stop"},{code:"10-51",title:"Escort/Transport"},{code:"10-52",title:"Alarm Investigation"},{code:"10-53",title:"Traffic Accident"},{code:"10-54",title:"Reckless Driving"},{code:"10-55",title:"Speeding"},{code:"10-56",title:"Driving Under Influence"},{code:"10-71",title:"Prowler"},{code:"10-72",title:"Narcotics Activity"},{code:"10-73",title:"Gang Activity"},{code:"10-74",title:"Illegal Fireworks"},{code:"10-75",title:"Shots Fired"},{code:"10-76",title:"Officer Down"},{code:"10-80",title:"Vehicle Pursuit"},{code:"10-81",title:"Foot Pursuit"},{code:"10-82",title:"Foot Patrol"},{code:"10-83",title:"Surveillance"},{code:"10-84",title:"Dispatch Assistance"},{code:"10-91",title:"Silent Alarm"},{code:"10-92",title:"Officer Welfare"},{code:"10-93",title:"Bomb Threat"},{code:"10-94",title:"Homicide"},{code:"10-95",title:"Firearms Discharge"},{code:"10-96",title:"Mental Health Crisis"},{code:"10-97",title:"Hazmat Incident"},{code:"10-98",title:"Prison Escape"},{code:"10-99",title:"Officer Down - Emergency"}],Ss=Object.freeze(Object.defineProperty({__proto__:null,mockActiveWarrants:os,mockApplications:js,mockBolos:xs,mockCameras:ys,mockClockAudit:Ns,mockDashboardStats:ns,mockDepartmentStats:ks,mockDisciplineRecords:vs,mockEvidence:hs,mockIncidentCodes:Be,mockIncidents:Fe,mockLicenses:us,mockLogs:gs,mockOfficer:Ae,mockOfficerRoster:bs,mockPenalCodes:ps,mockProfiles:ms,mockRecentActivity:cs,mockReports:ds,mockSettings:Cs,mockUnitLocations:ws,mockVehicleRegistrations:fs},Symbol.toStringTag,{value:"Module"})),Ue="ps-mdt:debug";let de=!1;function Ve(){try{const s=localStorage.getItem(Ue);return s==="1"||s==="true"}catch{return!1}}function Ds(s){try{localStorage.setItem(Ue,s?"1":"0")}catch{}}function ye(s){de=!!s,Ds(de),console.info(`[ps-mdt] Debug ${de?"ENABLED":"DISABLED"}`)}function As(){return ye(!de),de}function Y(){return de=Ve(),de}de=Ve();window.psMdtDebug={enable:()=>ye(!0),disable:()=>ye(!1),toggle:()=>As(),get:()=>Y()};window.psReportClientError=async s=>{try{await He({message:(s==null?void 0:s.message)||String(s),stack:s==null?void 0:s.stack,extra:s==null?void 0:s.extra})}catch{}};function Ps(s,a,r){var c;switch(s){case"close":return{success:!0,data:null};case"getDashboardStats":return{success:!0,data:r.mockDashboardStats};case"getRecentActivity":return{success:!0,data:r.mockRecentActivity.map(g=>({id:g.id,officerName:g.officerName,action:g.action,actionType:g.actionType,timestamp:g.timestamp,details:g.details}))};case"getActiveWarrants":return{success:!0,data:r.mockActiveWarrants.map(g=>({id:g.id,citizenid:g.citizenid,name:g.name,charges:g.charges,priority:g.priority,issueDate:g.issueDate,issuedBy:g.issuedBy,lastSeen:g.lastSeen,status:g.status}))};case"getReports":return{success:!0,data:r.mockIncidents.filter(g=>g.type==="report")};case"getReport":return{success:!0,data:r.mockIncidents.find(g=>g.id===(a==null?void 0:a.reportId)&&g.type==="report")||r.mockIncidents.filter(g=>g.type==="report")[0]};case"createReport":return{success:!0,data:{id:"R-NEW",type:"report",...a}};case"updateReport":return{success:!0,data:{...a}};case"deleteReport":return{success:!0,data:null};case"searchReports":return{success:!0,data:r.mockIncidents.filter(g=>g.type==="report")};case"getIncidents":return{success:!0,data:r.mockIncidents};case"getIncident":return{success:!0,data:r.mockIncidents.find(g=>g.id===(a==null?void 0:a.incidentId))||r.mockIncidents[0]};case"createIncident":return{success:!0,data:{id:"I-NEW",type:"incident",...a}};case"updateIncident":return{success:!0,data:{...a}};case"getBolos":return{success:!0,data:r.mockBolos};case"getBolo":return{success:!0,data:r.mockBolos.find(g=>g.id===(a==null?void 0:a.boloId))||r.mockBolos[0]};case"createBolo":return{success:!0,data:{id:"B-NEW",...a}};case"updateBolo":return{success:!0,data:{...a}};case"cancelBolo":return{success:!0,data:null};case"getPersonProfile":case"ps-mdt:profile:searchPerson":case"searchPerson":const j=((c=a==null?void 0:a.search)==null?void 0:c.toLowerCase())||"";return{success:!0,data:r.mockProfiles.find(g=>{var i,x;return g.citizenid===(a==null?void 0:a.citizenid)||((i=g.firstname)==null?void 0:i.toLowerCase().includes(j))||((x=g.lastname)==null?void 0:x.toLowerCase().includes(j))})||r.mockProfiles[0]};case"getVehicleProfile":case"searchVehicle":return{success:!0,data:r.mockVehicleRegistrations.find(g=>g.plate===(a==null?void 0:a.plate))||r.mockVehicleRegistrations[0]};case"updateProfile":return{success:!0,data:{...a}};case"addProfileNote":case"updateProfileNote":case"deleteProfileNote":return{success:!0,data:null};case"getMugshot":case"ps-mdt:profile:getMugshot":return{success:!0,data:{image:"https://i.pravatar.cc/300?img="+Math.floor(Math.random()*70)}};case"addCharge":case"getCharges":case"updateCharge":case"deleteCharge":return{success:!0,data:r.mockProfiles[0].charges};case"getEvidenceByCaseNumber":return{success:!0,data:r.mockEvidence};case"createEvidence":return{success:!0,data:{id:"E-NEW",...a}};case"updateEvidenceStatus":case"transferEvidence":case"linkEvidenceToCase":case"ps-mdt:evidence:forensic":case"ps-mdt:evidence:searchBallistics":case"ps-mdt:evidence:searchFingerprints":case"ps-mdt:evidence:updateStatus":return{success:!0,data:null};case"createWarrant":return{success:!0,data:{id:"W-NEW",...a}};case"serveWarrant":return{success:!0,data:null};case"getAllLicenses":return{success:!0,data:r.mockLicenses};case"issueLicense":case"addLicensePoints":return{success:!0,data:null};case"getAllVehicleRegistrations":return{success:!0,data:r.mockVehicleRegistrations};case"searchVehicleRegistration":const p=r.mockVehicleRegistrations.find(g=>g.plate.includes(a==null?void 0:a.search));return{success:!0,data:p?[p]:r.mockVehicleRegistrations};case"updateVehicleRegistration":return{success:!0,data:{...a}};case"getPenalCodes":case"searchPenalCodes":return{success:!0,data:r.mockPenalCodes};case"createPenalCode":return{success:!0,data:{id:"PC-NEW",...a}};case"updatePenalCode":case"deletePenalCode":return{success:!0,data:null};case"getSettings":return{success:!0,data:r.mockSettings};case"updateSettings":return{success:!0,data:{...r.mockSettings,...a}};case"ps-mdt:chief:canAccess":return{success:!0,data:{allowed:!0}};case"getDepartmentStats":return{success:!0,data:r.mockDepartmentStats};case"getOfficerRoster":return{success:!0,data:r.mockOfficerRoster};case"updateOfficer":return{success:!0,data:{...a}};case"getApplications":return{success:!0,data:r.mockApplications};case"approveApplication":case"rejectApplication":return{success:!0,data:null};case"getDisciplineRecords":return{success:!0,data:r.mockDisciplineRecords};case"createDisciplineRecord":return{success:!0,data:{id:"D-NEW",...a}};case"ps-mdt:chief:getClockAudit":return{success:!0,data:r.mockClockAudit};case"sendDepartmentAnnouncement":case"sendEmergencyAlert":case"sendAllUnitsRecall":case"generateAuditReport":case"callStaffMeeting":case"issueCommendation":return{success:!0,data:null};case"setWaypoint":case"sendDispatch":case"updateDispatchCall":return{success:!0,data:null};case"getDispatchCalls":return{success:!0,data:[]};case"getUnitLocations":return{success:!0,data:r.mockUnitLocations};case"getActiveUnits":return{success:!0,data:r.mockUnitLocations};case"getCameras":case"getCamerasByLocation":return{success:!0,data:r.mockCameras};case"accessCamera":case"disableCamera":return{success:!0,data:null};case"getCameraStatus":return{success:!0,data:{status:"online"}};case"viewCameraFeed":case"closeCameraFeed":return{success:!0,data:null};default:case"getClientErrors":{const g=(a==null?void 0:a.page)||1,i=(a==null?void 0:a.perPage)||25,x=((a==null?void 0:a.search)||"").toLowerCase(),h=(r.mockLogs||[{id:1,text:"Client error reported by John Doe: Test error",time:new Date().toISOString()},{id:2,text:"Client error reported by Jane Smith: Unexpected token",time:new Date().toISOString()}]).filter(u=>!x||u.text.toLowerCase().includes(x)),A=h.length,T=(g-1)*i;return{success:!0,data:{rows:h.slice(T,T+i),total:A,page:g,perPage:i}}}}}async function He(s){try{return oe()?(console.warn("[ps-mdt] reportClientError (browser): ",s),{success:!0}):await H("reportClientError",s)}catch(a){try{console.error("[ps-mdt] Error reporting client error:",a)}catch{}return{success:!1}}}async function H(s,a){if(oe()||de)return de&&console.log("[ps-mdt][fetchNui][DEBUG] Returning mock data for:",s),new Promise(c=>{setTimeout(()=>{const t=Ps(s,a,Ss);c(t)},100+Math.random()*200)});const r={method:"post",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(a||{})};try{const c=window.GetParentResourceName?window.GetParentResourceName():"ps-mdt",t=performance.now();de&&console.debug("[ps-mdt][fetchNui] →",s,{payload:a});const n=await fetch(`https://${c}/${s}`,r);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const m=await n.json();if(de){const j=Math.round(performance.now()-t);console.debug("[ps-mdt][fetchNui] ←",s,{success:m==null?void 0:m.success,error:m==null?void 0:m.error,ms:j})}return m}catch(c){return oe()||console.error(`[ps-mdt] Error calling NUI handler (${s}):`,c),{success:!1,error:c instanceof Error?c.message:"Unknown error occurred"}}}function re(s,a){const r=c=>{if(!c||typeof c!="object"||!c.data||typeof c.data!="object")return;const{action:t,data:n}=c.data;if(t===s){de&&console.debug("[ps-mdt][NUI message]",s,n);try{a(n)}catch(m){try{console.error("[ps-mdt] Error in NUI handler callback for",s,m)}catch{}}}};return window.addEventListener("message",r),()=>{window.removeEventListener("message",r)}}function oe(){return!window.invokeNative}class Z extends l.Component{constructor(r){super(r);Se(this,"handleReload",()=>{this.setState(r=>({hasError:!1,error:null,resetKey:r.resetKey+1}))});Se(this,"handleClose",async()=>{await H("close")});this.state={hasError:!1,error:null,resetKey:0}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,c){if(console.error("[MDT Error Boundary] Caught error:",r,c),this.props.onError)try{this.props.onError(r,c)}catch{}try{He({message:r.message,stack:r.stack,extra:{scope:this.props.scopeName}})}catch{}}render(){var r;if(this.state.hasError){const c=this.props.fullScreen??!0,t=((r=this.state.error)==null?void 0:r.message)||"Unknown error";return c?e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-slate-900/95 backdrop-blur-sm z-50",children:e.jsxs("div",{className:"bg-slate-800 border border-red-500/30 rounded-2xl p-8 max-w-md mx-4 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/20 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-triangle-exclamation text-red-400 text-xl"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"MDT Error"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Something went wrong"})]})]}),e.jsx("p",{className:"text-slate-300 text-sm mb-4",children:"The MDT encountered an unexpected error. You can try reloading or close the MDT."}),this.state.error&&e.jsx("div",{className:"bg-slate-900/50 rounded-lg p-3 mb-4 max-h-24 overflow-auto",children:e.jsx("code",{className:"text-xs text-red-400 font-mono",children:t})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:this.handleReload,className:"flex-1 py-2 px-4 bg-blue-600 hover:bg-blue-500 text-white rounded-lg font-medium transition-colors",children:[e.jsx("i",{className:"fa-solid fa-rotate-right mr-2"}),"Reload MDT"]}),e.jsx("button",{onClick:this.handleClose,className:"py-2 px-4 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-medium transition-colors",children:"Close"})]})]})}):e.jsxs("div",{className:"p-3 bg-[rgba(255,0,0,0.03)] border border-red-500/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("i",{className:"fa-solid fa-triangle-exclamation text-red-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-white",children:this.props.scopeName?`${this.props.scopeName} Error`:"Component Error"}),e.jsx("div",{className:"text-xs text-[rgba(255,255,255,0.6)]",children:"An error occurred rendering this section."})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:this.handleReload,className:"py-1 px-2 bg-blue-600 text-white rounded-md text-sm",children:"Retry"}),e.jsx("button",{onClick:this.handleClose,className:"py-1 px-2 bg-slate-700 text-white rounded-md text-sm",children:"Close"}),Y()&&e.jsx("div",{className:"ml-auto text-xs font-mono text-red-400",children:t})]})]})}return e.jsx("div",{children:this.props.children},`error-boundary:${this.state.resetKey}`)}}function he({icon:s,label:a,active:r}){const c=n=>{r||(n.currentTarget.style.borderColor="rgba(var(--theme-border-rgb), 0.3)")},t=n=>{r||(n.currentTarget.style.borderColor="transparent")};return e.jsxs("div",{className:`
        flex items-center gap-[1vh] px-[1.2vh] py-[0.8vh] md:py-[1vh] rounded-lg cursor-pointer 
        transition-all duration-200 font-semibold text-[1.2vh] md:text-[1.3vh]
        ${r?"text-white border shadow-lg":"text-[rgba(255,255,255,0.75)] hover:text-white hover:bg-[rgba(18,25,43,0.6)] border border-transparent"}
      `,style:r?{background:"linear-gradient(to right, rgba(var(--theme-accent-rgb), 0.32), rgba(18, 25, 43, 0.75))",borderColor:"rgba(var(--theme-border-rgb), 0.6)"}:{},onMouseEnter:c,onMouseLeave:t,children:[s&&e.jsx("div",{className:`text-[1.4vh] md:text-[1.6vh] transition-opacity ${r?"opacity-100":"opacity-70"}`,style:r?{color:"var(--theme-icon)"}:{},children:s}),e.jsx("div",{className:"truncate",children:a})]})}function I({title:s,subtitle:a,children:r,className:c="",headerAction:t}){return e.jsxs("div",{className:`bg-[rgba(15,23,42,0.82)] border rounded-2xl shadow-xl backdrop-blur-xl overflow-hidden ${c}`,style:{borderColor:"rgba(var(--theme-border-rgb), 0.2)"},children:[(s||a||t)&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",style:{borderColor:"rgba(var(--theme-border-rgb), 0.15)"},children:[e.jsxs("div",{children:[s&&e.jsx("h3",{className:"text-base font-bold text-white",children:s}),a&&e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)] mt-0.5",children:a})]}),t&&e.jsx("div",{children:t})]}),e.jsx("div",{className:"p-4",children:r})]})}function Ce({title:s,value:a,icon:r,trend:c,color:t="blue"}){const n={blue:"from-[rgba(56,189,248,0.15)] to-[rgba(30,58,138,0.1)] border-[rgba(56,189,248,0.3)]",green:"from-[rgba(34,197,94,0.15)] to-[rgba(22,163,74,0.1)] border-[rgba(34,197,94,0.3)]",yellow:"from-[rgba(251,191,36,0.15)] to-[rgba(245,158,11,0.1)] border-[rgba(251,191,36,0.3)]",red:"from-[rgba(239,68,68,0.15)] to-[rgba(185,28,28,0.1)] border-[rgba(239,68,68,0.3)]"},m={blue:"text-[#38BDF8]",green:"text-[#22C55E]",yellow:"text-[#FACC15]",red:"text-[#EF4444]"};return e.jsx("div",{className:`bg-gradient-to-br ${n[t]} border rounded-xl p-4 backdrop-blur-sm`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)] font-medium uppercase tracking-wider mb-1",children:s}),e.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:a}),c&&e.jsxs("div",{className:`flex items-center gap-1 text-xs ${c.isPositive?"text-green-400":"text-red-400"}`,children:[e.jsx("i",{className:`fa-solid fa-arrow-${c.isPositive?"up":"down"}`}),e.jsx("span",{children:c.value})]})]}),r&&e.jsx("div",{className:`text-2xl ${m[t]} opacity-80`,children:r})]})})}function O({children:s,variant:a="default",className:r=""}){const c={default:"bg-[rgba(56,189,248,0.2)] text-[#38BDF8] border-[rgba(56,189,248,0.4)]",success:"bg-[rgba(34,197,94,0.2)] text-[#22C55E] border-[rgba(34,197,94,0.4)]",warning:"bg-[rgba(251,191,36,0.2)] text-[#FACC15] border-[rgba(251,191,36,0.4)]",danger:"bg-[rgba(239,68,68,0.2)] text-[#EF4444] border-[rgba(239,68,68,0.4)]",info:"bg-[rgba(99,102,241,0.2)] text-[#818CF8] border-[rgba(99,102,241,0.4)]",secondary:"bg-[rgba(100,116,139,0.2)] text-[#94A3B8] border-[rgba(100,116,139,0.4)]"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-semibold border ${c[a]} ${r}`,children:s})}function f({children:s,variant:a="primary",size:r="md",icon:c,className:t="",...n}){const m="inline-flex items-center justify-center gap-2 font-semibold rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",j={primary:"text-white border shadow-lg",secondary:"bg-[rgba(15,23,42,0.8)] text-[rgba(255,255,255,0.9)] border hover:bg-[rgba(15,23,42,0.95)]",success:"bg-gradient-to-r from-[rgba(34,197,94,0.32)] to-[rgba(22,163,74,0.4)] text-white border border-[rgba(34,197,94,0.5)] hover:from-[rgba(34,197,94,0.42)] hover:to-[rgba(22,163,74,0.5)] shadow-lg hover:shadow-[0_0_20px_rgba(34,197,94,0.4)]",danger:"bg-gradient-to-r from-[rgba(239,68,68,0.32)] to-[rgba(185,28,28,0.4)] text-white border border-[rgba(239,68,68,0.5)] hover:from-[rgba(239,68,68,0.42)] hover:to-[rgba(185,28,28,0.5)] shadow-lg hover:shadow-[0_0_20px_rgba(239,68,68,0.4)]",ghost:"bg-transparent text-[rgba(255,255,255,0.8)] hover:text-white"},b={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},v=a==="primary"?{background:"linear-gradient(to right, rgba(var(--theme-accent-rgb), 0.32), rgba(var(--theme-primary-rgb), 0.4))",borderColor:"rgba(var(--theme-button-highlight-rgb), 0.5)"}:a==="secondary"?{borderColor:"rgba(var(--theme-border-rgb), 0.3)"}:a==="ghost"?{}:{},p=i=>{a==="primary"?(i.currentTarget.style.background="linear-gradient(to right, rgba(var(--theme-accent-rgb), 0.42), rgba(var(--theme-primary-rgb), 0.5))",i.currentTarget.style.boxShadow="0 0 20px rgba(var(--theme-button-highlight-rgb), 0.4)"):a==="secondary"?i.currentTarget.style.borderColor="rgba(var(--theme-border-rgb), 0.5)":a==="ghost"&&(i.currentTarget.style.backgroundColor="rgba(var(--theme-accent-rgb), 0.1)")},g=i=>{a==="primary"?(i.currentTarget.style.background="linear-gradient(to right, rgba(var(--theme-accent-rgb), 0.32), rgba(var(--theme-primary-rgb), 0.4))",i.currentTarget.style.boxShadow=""):a==="secondary"?i.currentTarget.style.borderColor="rgba(var(--theme-border-rgb), 0.3)":a==="ghost"&&(i.currentTarget.style.backgroundColor="transparent")};return e.jsxs("button",{className:`${m} ${j[a]} ${b[r]} ${t}`,style:v,onMouseEnter:p,onMouseLeave:g,...n,children:[c&&e.jsx("span",{className:"text-lg",children:c}),s]})}function le(s,a=null,r=!0){const[c,t]=l.useState(a),[n,m]=l.useState(r),[j,b]=l.useState(null),[v,p]=l.useState(0),g=l.useCallback(async x=>{m(!0),b(null);let y;try{y=await H(s,x),y!=null&&y.success&&y.data?(t(y.data),b(null)):(b((y==null?void 0:y.error)||"Failed to fetch data"),console.error(`[ps-mdt] Error fetching ${s}:`,y==null?void 0:y.error))}catch(h){console.error(`[ps-mdt] Unexpected error fetching ${s}:`,h),b("Unexpected error occurred"),y={success:!1,error:String(h)}}return m(!1),y},[s]),i=l.useCallback(x=>(p(y=>y+1),g(x)),[g]);return l.useEffect(()=>{(r||v>0)&&g()},[r,v,g]),{data:c,loading:n,error:j,refetch:i,setData:t}}function fe(s,a){l.useEffect(()=>re(s,a),[s,a])}function ee(s,a){l.useEffect(()=>re("realtimeUpdate",c=>{c.type===s&&(a(c.data),c.playSound&&Ms())}),[s,a])}function Pe(s,a,r){const[c,t]=l.useState(!1),[n,m]=l.useState(null);return{submit:l.useCallback(async b=>{t(!0),m(null);let v;try{if(v=await H(s,b),v!=null&&v.success&&v.data)a==null||a(v.data),m(null);else{const p=(v==null?void 0:v.error)||"Submission failed";m(p),r==null||r(p)}}catch(p){console.error("[ps-mdt] Unexpected error in submit:",p);const g="Unexpected error occurred";m(g),r==null||r(g),v={success:!1,error:String(p)}}return t(!1),v},[s,a,r]),submitting:c,error:n}}function We(s,a=3e4,r=!0){const c=l.useRef(s);l.useEffect(()=>{c.current=s},[s]),l.useEffect(()=>{if(!r)return;const n=setInterval(()=>{c.current()},a);return()=>clearInterval(n)},[a,r])}function Ge(s,a=10){const[r,c]=l.useState(1),t=Math.ceil(s.length/a),n=(r-1)*a,m=n+a,j=s.slice(n,m),b=g=>{const i=Math.max(1,Math.min(g,t));c(i)};return{currentPage:r,totalPages:t,currentItems:j,goToPage:b,nextPage:()=>b(r+1),prevPage:()=>b(r-1),hasNext:r<t,hasPrev:r>1}}function Ms(){try{const s=new(window.AudioContext||window.webkitAudioContext),a=s.createOscillator(),r=s.createGain();a.connect(r),r.connect(s.destination),a.frequency.value=800,a.type="sine",r.gain.setValueAtTime(.3,s.currentTime),r.gain.exponentialRampToValueAtTime(.01,s.currentTime+.1),a.start(s.currentTime),a.stop(s.currentTime+.1)}catch(s){console.warn("[ps-mdt] Could not play notification sound:",s)}}const Ls={},Ee=s=>{let a;const r=new Set,c=(p,g)=>{const i=typeof p=="function"?p(a):p;if(!Object.is(i,a)){const x=a;a=g??(typeof i!="object"||i===null)?i:Object.assign({},a,i),r.forEach(y=>y(a,x))}},t=()=>a,b={setState:c,getState:t,getInitialState:()=>v,subscribe:p=>(r.add(p),()=>r.delete(p)),destroy:()=>{(Ls?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},v=a=s(c,t,b);return b},Ts=s=>s?Ee(s):Ee;var Qe={exports:{}},_e={},qe={exports:{}},Je={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var we=l;function Es(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Is=typeof Object.is=="function"?Object.is:Es,Rs=we.useState,Os=we.useEffect,zs=we.useLayoutEffect,$s=we.useDebugValue;function Fs(s,a){var r=a(),c=Rs({inst:{value:r,getSnapshot:a}}),t=c[0].inst,n=c[1];return zs(function(){t.value=r,t.getSnapshot=a,De(t)&&n({inst:t})},[s,r,a]),Os(function(){return De(t)&&n({inst:t}),s(function(){De(t)&&n({inst:t})})},[s]),$s(r),r}function De(s){var a=s.getSnapshot;s=s.value;try{var r=a();return!Is(s,r)}catch{return!0}}function Bs(s,a){return a()}var Us=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Bs:Fs;Je.useSyncExternalStore=we.useSyncExternalStore!==void 0?we.useSyncExternalStore:Us;qe.exports=Je;var Vs=qe.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ke=l,Hs=Vs;function Ws(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Gs=typeof Object.is=="function"?Object.is:Ws,Qs=Hs.useSyncExternalStore,_s=ke.useRef,qs=ke.useEffect,Js=ke.useMemo,Ks=ke.useDebugValue;_e.useSyncExternalStoreWithSelector=function(s,a,r,c,t){var n=_s(null);if(n.current===null){var m={hasValue:!1,value:null};n.current=m}else m=n.current;n=Js(function(){function b(x){if(!v){if(v=!0,p=x,x=c(x),t!==void 0&&m.hasValue){var y=m.value;if(t(y,x))return g=y}return g=x}if(y=g,Gs(p,x))return y;var h=c(x);return t!==void 0&&t(y,h)?(p=x,y):(p=x,g=h)}var v=!1,p,g,i=r===void 0?null:r;return[function(){return b(a())},i===null?void 0:function(){return b(i())}]},[a,r,c,t]);var j=Qs(s,n[0],n[1]);return qs(function(){m.hasValue=!0,m.value=j},[j]),Ks(j),j};Qe.exports=_e;var Ys=Qe.exports;const Xs=as(Ys),Me={},{useDebugValue:Zs}=ge,{useSyncExternalStoreWithSelector:et}=Xs;let Ie=!1;const st=s=>s;function tt(s,a=st,r){(Me?"production":void 0)!=="production"&&r&&!Ie&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Ie=!0);const c=et(s.subscribe,s.getState,s.getServerState||s.getInitialState,a,r);return Zs(c),c}const Re=s=>{(Me?"production":void 0)!=="production"&&typeof s!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const a=typeof s=="function"?Ts(s):s,r=(c,t)=>tt(a,c,t);return Object.assign(r,a),r},at=s=>s?Re(s):Re;var rt=s=>((Me?"production":void 0)!=="production"&&console.warn("[DEPRECATED] Default export is deprecated. Instead use `import { create } from 'zustand'`."),at(s));const ie=rt(s=>({ready:!1,setReady:a=>s({ready:a}),officer:null,setOfficer:a=>s({officer:a}),canAccessChief:!1,setCanAccessChief:a=>s({canAccessChief:a}),navigationContext:null,setNavigationContext:a=>s({navigationContext:a}),clearNavigationContext:()=>s({navigationContext:null}),theme:{primaryColor:"#3b82f6",secondaryColor:"#1e40af",accentColor:"#38bdf8",buttonHighlight:"#38bdf8",iconColor:"#38bdf8",borderColor:"#2448b0",departmentName:"Project Sloth",departmentSubtitle:"Mobile Data Terminal",logoType:"icon",logoIcon:"fa-shield-halved",logoImage:null},setTheme:a=>s(r=>({theme:{...r.theme,...a}}))}));function Oe({onNavigate:s}){const a=ie(i=>i.setNavigationContext),r=i=>{a({profileSearch:i.citizenid}),s("profile")},{data:c,refetch:t}=le("getDashboardStats",{activeUnits:0,activeWarrants:0,activeCalls:0,openReports:0,recentIncidents:0,openCases:0,onDutyOfficers:0,criticalBolos:0}),{data:n,loading:m,refetch:j}=le("getRecentActivity",[]),{data:b,loading:v,refetch:p}=le("getActiveWarrants",[]);ee("reportCreated",()=>{t(),j()}),ee("incidentCreated",()=>{t(),j()}),ee("boloCreated",()=>{t(),j()}),ee("warrantIssued",()=>{t(),p(),j()}),ee("newActivity",i=>{j()}),We(()=>{t(),j(),p()},3e4,!0),fe("warrants",()=>{p()}),fe("reports",()=>{t(),j()}),fe("calls",()=>{t(),j()}),fe("bulletin",()=>{j()}),fe("newBulletin",()=>{j()}),fe("deleteBulletin",()=>{j()});const g=i=>{const x=new Date,y=new Date(i),h=x.getTime()-y.getTime(),A=Math.floor(h/6e4),T=Math.floor(h/36e5),o=Math.floor(h/864e5);return A<1?"Just now":A<60?`${A} min${A>1?"s":""} ago`:T<24?`${T} hour${T>1?"s":""} ago`:`${o} day${o>1?"s":""} ago`};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(Ce,{title:"Active Units",value:(c==null?void 0:c.activeUnits)||0,icon:e.jsx("i",{className:"fa-solid fa-user-police"}),color:"blue",trend:{value:`${(c==null?void 0:c.onDutyOfficers)||0} on duty`,isPositive:!0}}),e.jsx(Ce,{title:"Active Warrants",value:(c==null?void 0:c.activeWarrants)||0,icon:e.jsx("i",{className:"fa-solid fa-gavel"}),color:"red",trend:{value:"High priority",isPositive:!1}}),e.jsx(Ce,{title:"Recent Incidents",value:(c==null?void 0:c.recentIncidents)||0,icon:e.jsx("i",{className:"fa-solid fa-siren-on"}),color:"yellow"}),e.jsx(Ce,{title:"Open Cases",value:(c==null?void 0:c.openCases)||0,icon:e.jsx("i",{className:"fa-solid fa-folder-open"}),color:"green"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(I,{title:"Active Warrants",subtitle:"High priority suspects",headerAction:e.jsxs(f,{size:"sm",variant:"ghost",children:["View All ",e.jsx("i",{className:"fa-solid fa-arrow-right text-xs"})]}),children:v?e.jsxs("div",{className:"flex items-center justify-center py-8 text-[rgba(255,255,255,0.5)]",children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-2"}),"Loading warrants..."]}):b&&b.length>0?e.jsx("div",{className:"space-y-3",children:b.slice(0,5).map(i=>e.jsxs("div",{onClick:()=>r(i),className:"flex items-start justify-between p-3 bg-[rgba(11,19,34,0.4)] rounded-lg border border-[rgba(36,72,176,0.15)] hover:border-[rgba(56,189,248,0.5)] hover:bg-[rgba(11,19,34,0.6)] transition-all cursor-pointer group",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-white group-hover:text-[rgba(56,189,248,1)] transition-colors",children:i.name}),e.jsx(O,{variant:i.priority==="high"?"danger":"warning",children:i.priority.toUpperCase()})]}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)] mb-1",children:i.charges}),e.jsxs("p",{className:"text-xs text-[rgba(255,255,255,0.4)]",children:[e.jsx("i",{className:"fa-solid fa-clock mr-1"}),i.lastSeen?`Last seen: ${g(i.lastSeen)}`:`Issued: ${g(i.issueDate)}`]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-xs text-[rgba(56,189,248,0.7)] group-hover:text-[rgba(56,189,248,1)] transition-colors",children:"View Profile"}),e.jsx("i",{className:"fa-solid fa-arrow-right text-[rgba(56,189,248,0.7)] group-hover:text-[rgba(56,189,248,1)] group-hover:translate-x-1 transition-all"})]})]},i.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-[rgba(255,255,255,0.5)]",children:[e.jsx("i",{className:"fa-solid fa-inbox text-3xl mb-2"}),e.jsx("p",{children:"No active warrants"})]})}),e.jsx(I,{title:"Recent Activity",subtitle:"Latest system updates",children:m?e.jsxs("div",{className:"flex items-center justify-center py-8 text-[rgba(255,255,255,0.5)]",children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-2"}),"Loading activity..."]}):n&&n.length>0?e.jsx("div",{className:"space-y-2",children:n.slice(0,6).map(i=>e.jsxs("div",{className:"flex items-start gap-3 p-2.5 rounded-lg hover:bg-[rgba(11,19,34,0.3)] transition-all",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-[rgba(56,189,248,0.15)] flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:`fa-solid ${i.actionType==="report"?"fa-file-lines":i.actionType==="bolo"?"fa-bell":i.actionType==="incident"?"fa-siren":i.actionType==="warrant"?"fa-gavel":i.actionType==="evidence"?"fa-box":"fa-circle-info"} text-xs text-[#38BDF8]`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-white font-medium",children:i.officerName}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)] truncate",children:i.action}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.4)] mt-0.5",children:g(i.timestamp)})]})]},i.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-[rgba(255,255,255,0.5)]",children:[e.jsx("i",{className:"fa-solid fa-inbox text-3xl mb-2"}),e.jsx("p",{children:"No recent activity"})]})})]})]})}function E({label:s,error:a,icon:r,className:c="",...t}){return e.jsxs("div",{className:"flex flex-col gap-1.5",children:[s&&e.jsx("label",{className:"text-sm font-semibold text-[rgba(255,255,255,0.9)]",children:s}),e.jsxs("div",{className:"relative",children:[r&&e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[rgba(255,255,255,0.5)]",children:r}),e.jsx("input",{className:`w-full bg-[rgba(11,19,34,0.6)] border border-[rgba(36,72,176,0.3)] rounded-lg px-4 py-2 text-white placeholder:text-[rgba(255,255,255,0.4)] focus:outline-none focus:border-[rgba(56,189,248,0.6)] focus:ring-2 focus:ring-[rgba(56,189,248,0.2)] transition-all ${r?"pl-10":""} ${a?"border-red-500":""} ${c}`,...t})]}),a&&e.jsx("span",{className:"text-xs text-red-400",children:a})]})}function it({codes:s,onCodesChange:a,availableCodes:r}){var i,x;const[c,t]=l.useState(""),[n,m]=l.useState(!1),j=l.useMemo(()=>{if(!c.trim())return[];const y=c.toLowerCase();return r.filter(h=>!s.some(A=>A.code===h.code)&&(h.code.toLowerCase().includes(y)||h.title.toLowerCase().includes(y)))},[c,r,s]),b=y=>{a([...s,y]),t(""),m(!1)},v=y=>{a(s.filter((h,A)=>A!==y))},p=y=>{const h=y.split("-")[0],A=parseInt(h.replace("10-",""));return A>=50&&A<=59?"bg-blue-500/20 border-blue-500/30 text-blue-200":A>=30&&A<=39?"bg-yellow-500/20 border-yellow-500/30 text-yellow-200":A>=80&&A<=89?"bg-red-500/20 border-red-500/30 text-red-200":A>=20&&A<=29?"bg-orange-500/20 border-orange-500/30 text-orange-200":"bg-purple-500/20 border-purple-500/30 text-purple-200"},g=y=>({"10-1":"Unable to Copy","10-4":"Acknowledged","10-7":"Out of Service","10-8":"In Service","10-10":"Civilian Dispute","10-15":"Citizen Assist","10-20":"Suspicious Person","10-25":"Domestic Disturbance","10-31":"Burglary in Progress","10-32":"Armed Robbery","10-33":"Officer Needs Assistance","10-50":"Traffic Stop","10-53":"Traffic Accident","10-54":"Reckless Driving","10-55":"Speeding","10-71":"Prowler","10-80":"Vehicle Pursuit","10-91":"Silent Alarm"})[y]||"Incident Code";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-[rgba(255,255,255,0.6)] uppercase mb-2",children:"Search & Add Incident Codes"}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{placeholder:"Search by code (e.g., 10-31, 10-80) or title (e.g., Burglary, Pursuit)...",value:c,onChange:y=>{t(y.target.value),m(!0)},onFocus:()=>m(!0),onBlur:()=>setTimeout(()=>m(!1),200)}),n&&j.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-[rgba(15,23,42,0.98)] border border-[rgba(56,189,248,0.3)] rounded-lg shadow-lg z-10 max-h-64 overflow-y-auto",children:j.map(y=>e.jsx("div",{className:"px-4 py-3 hover:bg-[rgba(56,189,248,0.1)] cursor-pointer border-b border-[rgba(56,189,248,0.1)] last:border-b-0 transition-colors",onClick:()=>b(y),children:e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"font-medium text-white text-sm",children:[y.code," - ",y.title]}),e.jsx("div",{className:"text-xs text-[rgba(255,255,255,0.5)] truncate",children:g(y.code)})]})})},y.code))}),n&&c&&j.length===0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-[rgba(15,23,42,0.98)] border border-[rgba(56,189,248,0.3)] rounded-lg shadow-lg z-10 p-4",children:e.jsx("p",{className:"text-sm text-[rgba(255,255,255,0.5)]",children:"No matching codes found"})})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("label",{className:"block text-xs text-[rgba(255,255,255,0.6)] uppercase",children:["Added Codes (",s.length,")"]}),s.length>0&&e.jsx("button",{onClick:()=>a([]),className:"text-xs text-[rgba(255,255,255,0.5)] hover:text-red-400 transition-colors",children:"Clear All"})]}),s.length===0?e.jsx("div",{className:"px-4 py-3 bg-[rgba(255,255,255,0.05)] rounded-lg text-center",children:e.jsx("p",{className:"text-sm text-[rgba(255,255,255,0.4)]",children:"No codes added yet. Search above to add incident codes."})}):e.jsx("div",{className:"space-y-2",children:s.map((y,h)=>e.jsxs("div",{className:`px-4 py-3 rounded-lg border ${p(y.code)} flex items-start justify-between gap-3`,children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"font-medium text-sm",children:[y.code," - ",y.title]}),e.jsx("div",{className:"text-xs mt-1 text-[rgba(255,255,255,0.7)]",children:g(y.code)})]}),e.jsx("button",{onClick:()=>v(h),className:"flex-shrink-0 text-[rgba(255,255,255,0.5)] hover:text-red-400 transition-colors mt-0.5",title:"Remove code",children:e.jsx("i",{className:"fa-solid fa-trash-alt"})})]},`${y.code}-${h}`))})]}),s.length>0&&e.jsx("div",{className:"pt-2 border-t border-[rgba(var(--outline-rgb),0.2)]",children:e.jsxs("div",{className:"bg-[rgba(var(--accent-rgb),0.1)] rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-[rgba(255,255,255,0.6)] uppercase mb-1",children:"Primary Incident Code"}),e.jsxs("div",{className:"text-lg font-bold text-blue-400",children:[(i=s[0])==null?void 0:i.code," - ",(x=s[0])==null?void 0:x.title]}),s.length>1&&e.jsxs("div",{className:"text-xs text-[rgba(255,255,255,0.5)] mt-2",children:["+",s.length-1," additional code(s)"]})]})})]})}function Ne(s,a={}){const{scopeName:r,fullScreen:c=!1}=a,t=m=>e.jsx(Z,{fullScreen:c,scopeName:r,children:e.jsx(s,{...m})}),n=s.displayName||s.name||"Component";return t.displayName=`withErrorBoundary(${n})`,t}function lt({isOpen:s,onClose:a,onLinkVehicle:r,availableVehicles:c=[],loading:t=!1}){const[n,m]=l.useState("search"),[j,b]=l.useState(""),[v,p]=l.useState({plate:"",model:"",brand:"",color:"",class:"",notes:""}),g=l.useMemo(()=>{if(!j)return c;const h=j.toLowerCase();return c.filter(A=>{var T;return A.plate.toLowerCase().includes(h)||A.model.toLowerCase().includes(h)||((T=A.brand)==null?void 0:T.toLowerCase().includes(h))||A.color.toLowerCase().includes(h)})},[j,c]),i=h=>{r(h),y()},x=()=>{if(!v.plate||!v.model||!v.color){alert("Please fill in Plate, Model, and Color fields");return}r(v),y()},y=()=>{b(""),p({plate:"",model:"",brand:"",color:"",class:"",notes:""}),m("search")};return s?e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-[rgba(15,23,42,0.98)] border-2 border-[rgba(56,189,248,0.3)] rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-[rgba(11,19,34,0.8)] border-b border-[rgba(56,189,248,0.2)] p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-1",children:[e.jsx("i",{className:"fa-solid fa-car mr-2 text-blue-400"}),"Link Vehicle"]}),e.jsx("p",{className:"text-sm text-[rgba(255,255,255,0.6)]",children:"Search for registered vehicles or add custom vehicle information"})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-colors text-2xl",children:e.jsx("i",{className:"fa-solid fa-times"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex gap-2 border-b border-[rgba(255,255,255,0.1)] pb-4",children:[e.jsxs("button",{onClick:()=>m("search"),className:`px-4 py-2 rounded-lg font-medium transition-all ${n==="search"?"bg-[rgba(56,189,248,0.2)] text-blue-400 border border-[rgba(56,189,248,0.5)]":"text-[rgba(255,255,255,0.6)] hover:text-white"}`,children:[e.jsx("i",{className:"fa-solid fa-magnifying-glass mr-2"}),"Search Vehicles"]}),e.jsxs("button",{onClick:()=>m("custom"),className:`px-4 py-2 rounded-lg font-medium transition-all ${n==="custom"?"bg-[rgba(56,189,248,0.2)] text-blue-400 border border-[rgba(56,189,248,0.5)]":"text-[rgba(255,255,255,0.6)] hover:text-white"}`,children:[e.jsx("i",{className:"fa-solid fa-plus mr-2"}),"Add Custom"]})]}),n==="search"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(E,{placeholder:"Search by plate, model, brand, or color...",value:j,onChange:h=>b(h.target.value),icon:e.jsx("i",{className:"fa-solid fa-magnifying-glass"})}),t?e.jsxs("div",{className:"flex items-center justify-center py-8 text-[rgba(255,255,255,0.5)]",children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-2"}),"Loading vehicles..."]}):g.length===0?e.jsxs("div",{className:"text-center py-8 text-[rgba(255,255,255,0.5)]",children:[e.jsx("i",{className:"fa-solid fa-car text-3xl mb-2"}),e.jsx("p",{children:j?"No vehicles found matching your search":"No registered vehicles available"})]}):e.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:g.map((h,A)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[rgba(11,19,34,0.4)] rounded-lg border border-[rgba(36,72,176,0.15)] hover:border-[rgba(56,189,248,0.3)] transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-[rgba(168,85,247,0.3)] to-[rgba(126,34,206,0.2)] border border-[rgba(168,85,247,0.5)] flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"fa-solid fa-car text-purple-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-semibold text-white truncate",children:h.brand?`${h.brand} ${h.model}`:h.model}),e.jsxs("p",{className:"text-xs text-[rgba(255,255,255,0.6)]",children:[h.color," • ",h.plate,h.class&&` • ${h.class}`]})]})]}),e.jsxs(f,{size:"sm",variant:"primary",onClick:()=>i(h),children:[e.jsx("i",{className:"fa-solid fa-link mr-1"}),"Link"]})]},A))})]}),n==="custom"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-[rgba(255,255,255,0.7)]",children:"Add custom vehicle information if the vehicle is not in the system."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-[rgba(255,255,255,0.6)] uppercase mb-2",children:"License Plate *"}),e.jsx(E,{placeholder:"e.g., ABC123",value:v.plate,onChange:h=>p({...v,plate:h.target.value.toUpperCase()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-[rgba(255,255,255,0.6)] uppercase mb-2",children:"Color *"}),e.jsx(E,{placeholder:"e.g., Red, Black",value:v.color,onChange:h=>p({...v,color:h.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-[rgba(255,255,255,0.6)] uppercase mb-2",children:"Brand/Make"}),e.jsx(E,{placeholder:"e.g., Ford, BMW",value:v.brand||"",onChange:h=>p({...v,brand:h.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-[rgba(255,255,255,0.6)] uppercase mb-2",children:"Model *"}),e.jsx(E,{placeholder:"e.g., Mustang, 3 Series",value:v.model,onChange:h=>p({...v,model:h.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-[rgba(255,255,255,0.6)] uppercase mb-2",children:"Class"}),e.jsx(E,{placeholder:"e.g., Sedan, SUV",value:v.class||"",onChange:h=>p({...v,class:h.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-[rgba(255,255,255,0.6)] uppercase mb-2",children:"Additional Notes"}),e.jsx("textarea",{className:`w-full px-4 py-3 bg-[rgba(11,19,34,0.4)] border border-[rgba(var(--outline-rgb),0.2)]
                    rounded-lg text-white placeholder-[rgba(255,255,255,0.3)]
                    focus:outline-none focus:ring-2 focus:ring-[rgba(var(--accent-rgb),0.5)]
                    transition-all resize-none`,rows:3,placeholder:"Any additional information about this vehicle...",value:v.notes||"",onChange:h=>p({...v,notes:h.target.value})})]}),e.jsx("div",{className:"bg-[rgba(251,191,36,0.1)] border border-[rgba(251,191,36,0.3)] rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-[rgba(255,255,255,0.7)]",children:[e.jsx("i",{className:"fa-solid fa-info-circle mr-2 text-yellow-400"}),"Required fields: Plate, Model, Color"]})})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-[rgba(255,255,255,0.1)]",children:[e.jsx(f,{variant:"secondary",className:"flex-1",onClick:a,children:"Cancel"}),n==="custom"&&e.jsxs(f,{variant:"primary",className:"flex-1",onClick:x,children:[e.jsx("i",{className:"fa-solid fa-check mr-2"}),"Add Vehicle"]})]})]})]})}):null}const Ke=Ne(lt,{scopeName:"VehicleLinker",fullScreen:!1});function Ye({vehicles:s,onChange:a,availableVehicles:r=[],disabled:c=!1}){const[t,n]=l.useState(!1),[m,j]=l.useState(null),b=x=>{const y={...x,status:"involved"};a([...s,y]),n(!1)},v=x=>{a(s.filter((y,h)=>h!==x))},p=(x,y)=>{const h=[...s];h[x]={...h[x],status:y},a(h)},g=x=>{switch(x){case"suspect":return"danger";case"bystander":return"info";case"involved":default:return"warning"}},i=x=>{switch(x){case"suspect":return"fa-exclamation-triangle";case"bystander":return"fa-eye";case"involved":default:return"fa-car"}};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-xs text-[rgba(255,255,255,0.6)] uppercase",children:"Vehicles Involved"}),e.jsxs(f,{size:"sm",variant:"primary",onClick:()=>n(!0),disabled:c,children:[e.jsx("i",{className:"fa-solid fa-plus mr-1"}),"Add Vehicle"]})]}),s.length===0?e.jsxs("div",{className:"text-center py-8 bg-[rgba(11,19,34,0.4)] rounded-lg border border-dashed border-[rgba(255,255,255,0.1)]",children:[e.jsx("i",{className:"fa-solid fa-car text-3xl text-[rgba(255,255,255,0.3)] mb-2"}),e.jsx("p",{className:"text-sm text-[rgba(255,255,255,0.5)]",children:"No vehicles added yet"}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.4)] mt-1",children:'Click "Add Vehicle" to link vehicles to this incident'})]}):e.jsx("div",{className:"space-y-2",children:s.map((x,y)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-[rgba(11,19,34,0.4)] rounded-lg border border-[rgba(36,72,176,0.15)] hover:border-[rgba(56,189,248,0.3)] transition-all",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-[rgba(168,85,247,0.3)] to-[rgba(126,34,206,0.2)] border border-[rgba(168,85,247,0.5)] flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:`fa-solid ${i(x.status||"involved")} text-purple-400`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-semibold text-white truncate",children:x.brand?`${x.brand} ${x.model}`:x.model}),e.jsx(O,{variant:g(x.status||"involved"),children:x.status||"involved"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-[rgba(255,255,255,0.6)]",children:[e.jsx("span",{className:"font-mono bg-[rgba(56,189,248,0.1)] px-2 py-0.5 rounded",children:x.plate}),e.jsx("span",{children:x.color}),x.owner_info&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:[e.jsx("i",{className:"fa-solid fa-user mr-1"}),x.owner_info]})]})]}),x.notes&&e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.5)] mt-1 italic",children:x.notes}),x.custom_details&&e.jsxs("p",{className:"text-xs text-[rgba(255,255,255,0.5)] mt-1",children:[e.jsx("i",{className:"fa-solid fa-note-sticky mr-1"}),x.custom_details]})]}),!c&&e.jsxs("select",{value:x.status||"involved",onChange:h=>p(y,h.target.value),className:`px-3 py-1.5 bg-[rgba(11,19,34,0.6)] border border-[rgba(var(--outline-rgb),0.2)]
                    rounded-lg text-white text-sm
                    focus:outline-none focus:ring-2 focus:ring-[rgba(var(--accent-rgb),0.5)]
                    transition-all`,children:[e.jsx("option",{value:"involved",children:"Involved"}),e.jsx("option",{value:"suspect",children:"Suspect"}),e.jsx("option",{value:"bystander",children:"Bystander"})]}),!c&&e.jsx(f,{size:"sm",variant:"danger",onClick:()=>v(y),children:e.jsx("i",{className:"fa-solid fa-trash"})})]},y))}),s.length>0&&e.jsxs("div",{className:"text-xs text-[rgba(255,255,255,0.5)] flex items-start gap-2 p-3 bg-[rgba(56,189,248,0.05)] rounded-lg border border-[rgba(56,189,248,0.1)]",children:[e.jsx("i",{className:"fa-solid fa-info-circle text-blue-400 mt-0.5"}),e.jsxs("span",{children:["Mark vehicles as ",e.jsx("strong",{children:"Suspect"})," if they were involved in criminal activity,",e.jsx("strong",{children:" Bystander"})," if they were nearby but not involved, or",e.jsx("strong",{children:" Involved"})," for general involvement."]})]}),e.jsx(Ke,{isOpen:t,onClose:()=>n(!1),onLinkVehicle:b,availableVehicles:r})]})}Ne(Ye,{scopeName:"VehiclesInvolvedManager",fullScreen:!1});function Le({isOpen:s,onClose:a,title:r,children:c,size:t="md",showCloseButton:n=!0,closeOnOverlayClick:m=!0,footer:j,className:b=""}){if(l.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[s]),l.useEffect(()=>{if(!s)return;const g=i=>{i.key==="Escape"&&a()};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[s,a]),!s)return null;const v={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl",full:"max-w-[95vw] max-h-[95vh]"},p=g=>{m&&g.target===g.currentTarget&&a()};return e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-fadeIn",onClick:p,children:e.jsxs("div",{className:`
          relative w-full ${v[t]}
          bg-[rgb(var(--surface-primary-rgb))]
          border border-[rgba(var(--outline-rgb),0.2)]
          rounded-lg shadow-2xl
          animate-slideIn
          ${b}
        `,children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[rgba(var(--outline-rgb),0.2)]",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:r}),n&&e.jsx("button",{onClick:a,className:`w-8 h-8 flex items-center justify-center rounded-lg
                text-[rgba(255,255,255,0.6)] hover:text-white
                hover:bg-[rgba(255,255,255,0.05)]
                transition-colors`,children:e.jsx("i",{className:"fa-solid fa-times"})})]}),e.jsx("div",{className:`p-6 overflow-y-auto ${t==="full"?"max-h-[calc(95vh-180px)]":"max-h-[calc(90vh-180px)]"}`,children:c}),j&&e.jsx("div",{className:"p-6 border-t border-[rgba(var(--outline-rgb),0.2)] bg-[rgba(11,19,34,0.4)]",children:j})]})})}function nt({isOpen:s,onClose:a,onConfirm:r,title:c,message:t,confirmText:n="Confirm",cancelText:m="Cancel",variant:j="info",isLoading:b=!1}){const v={danger:"fa-triangle-exclamation text-red-400",warning:"fa-circle-exclamation text-yellow-400",info:"fa-circle-info text-theme-icon"},p=j==="danger"?"danger":"primary";return e.jsx(Le,{isOpen:s,onClose:a,title:c,size:"sm",showCloseButton:!1,closeOnOverlayClick:!b,footer:e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(f,{variant:"secondary",onClick:a,disabled:b,children:m}),e.jsx(f,{variant:p,onClick:r,disabled:b,children:b?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Processing..."]}):n})]}),children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[rgba(var(--accent-rgb),0.1)] flex items-center justify-center",children:e.jsx("i",{className:`fa-solid ${v[j]} text-2xl`})}),e.jsx("p",{className:"text-[rgba(255,255,255,0.8)] leading-relaxed pt-2",children:t})]})})}function Xe({isOpen:s,onClose:a,onSubmit:r,title:c,children:t,submitText:n="Submit",cancelText:m="Cancel",isLoading:j=!1,size:b="md"}){const v=p=>{p.preventDefault(),r(p)};return e.jsx(Le,{isOpen:s,onClose:a,title:c,size:b,closeOnOverlayClick:!j,footer:e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(f,{variant:"secondary",onClick:a,disabled:j,children:m}),e.jsx(f,{type:"submit",variant:"primary",onClick:v,disabled:j,children:j?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-check"}),n]})})]}),children:e.jsx("form",{onSubmit:v,children:t})})}Ne(Le,{scopeName:"Modal",fullScreen:!1});const ct=Ne(Xe,{scopeName:"FormModal",fullScreen:!1});Ne(nt,{scopeName:"ConfirmModal",fullScreen:!1});function ot({camera:s,onClose:a,incidentId:r}){const[c,t]=l.useState(0);l.useEffect(()=>{if(s.status==="hacked"&&s.disabledUntil){const p=setInterval(()=>{const g=Math.max(0,s.disabledUntil-Date.now());t(g),g<=0&&clearInterval(p)},1e3);return()=>clearInterval(p)}},[s.disabledUntil,s.status]);const n=async()=>{try{await H("viewCameraFeed",{cameraId:s.id,coords:s.coords,rotation:s.rotation,canRotate:s.canRotate??!1}),a()}catch(p){console.error("Failed to open camera feed:",p)}},m=p=>{const g=Math.floor(p/1e3),i=Math.floor(g/60),x=g%60;return`${i}:${x.toString().padStart(2,"0")}`},j=p=>{switch(p){case"online":return"success";case"offline":return"secondary";case"hacked":return"danger";default:return"secondary"}},b=p=>{switch(p){case"bank":return"building-columns";case"store":return"store";case"jewelry":return"gem";default:return"video"}},v=p=>{if(!p||typeof p!="string")return!1;try{const g=new URL(p);return["https:","http:","data:","blob:"].includes(g.protocol)}catch{return!1}};return e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-[rgba(15,23,42,0.98)] border-2 border-[rgba(56,189,248,0.3)] rounded-xl p-6 max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg icon-bg-theme flex items-center justify-center",children:e.jsx("i",{className:`fa-solid fa-${b(s.category)} text-theme-icon text-lg`})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:s.label}),e.jsxs("p",{className:"text-[rgba(255,255,255,0.6)] text-sm",children:[e.jsx("i",{className:"fa-solid fa-location-dot mr-1"}),s.location]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(O,{variant:j(s.status),children:[s.status==="online"&&e.jsx("i",{className:"fa-solid fa-circle-dot fa-fade mr-1"}),s.status==="offline"&&e.jsx("i",{className:"fa-solid fa-circle-xmark mr-1"}),s.status==="hacked"&&e.jsx("i",{className:"fa-solid fa-triangle-exclamation mr-1"}),s.status.toUpperCase()]}),s.status==="hacked"&&c>0&&e.jsxs(O,{variant:"warning",children:[e.jsx("i",{className:"fa-solid fa-clock mr-1"}),"Back online in ",m(c)]}),s.disabledBy&&e.jsxs(O,{variant:"secondary",children:[e.jsx("i",{className:"fa-solid fa-user-secret mr-1"}),"Disabled by: ",s.disabledBy]})]})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx("i",{className:"fa-solid fa-times text-2xl"})})]}),e.jsx("div",{className:"mb-6",children:s.status==="online"?e.jsxs("div",{className:"relative",children:[v(s.image)?e.jsx("img",{src:s.image,alt:s.label,className:"w-full h-auto rounded-lg border-2 border-active/30"}):e.jsx("div",{className:"w-full h-64 rounded-lg bg-gray-900 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-image text-gray-500 text-4xl"})}),e.jsxs("div",{className:"absolute top-4 left-4 flex items-center gap-2 bg-black/70 px-3 py-2 rounded-lg",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 animate-pulse"}),e.jsx("span",{className:"text-white text-sm font-bold",children:"REC"})]}),e.jsx("div",{className:"absolute top-4 right-4 bg-black/70 px-3 py-2 rounded-lg",children:e.jsx("span",{className:"text-white text-sm font-mono",children:new Date().toLocaleString()})}),e.jsx("div",{className:"absolute bottom-4 left-4 bg-black/70 px-3 py-2 rounded-lg",children:e.jsxs("span",{className:"text-white text-sm font-mono",children:["CAM #",s.id]})})]}):s.status==="hacked"?e.jsxs("div",{className:"w-full aspect-video bg-black rounded-lg border-2 border-red-500/30 flex items-center justify-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-900/20 to-black opacity-50 animate-pulse"}),e.jsxs("div",{className:"text-center z-10",children:[e.jsx("i",{className:"fa-solid fa-triangle-exclamation text-6xl text-red-400 mb-4 animate-pulse"}),e.jsx("h3",{className:"text-2xl font-bold text-red-400 mb-2",children:"CAMERA DISABLED"}),e.jsx("p",{className:"text-red-300 text-lg",children:"Security system compromised"}),c>0&&e.jsxs("p",{className:"text-white mt-4 text-xl font-mono",children:["Restoring in ",m(c)]}),s.disabledBy&&e.jsxs("p",{className:"text-gray-400 mt-2 text-sm",children:["Disabled by: ",s.disabledBy]})]})]}):e.jsx("div",{className:"w-full aspect-video bg-black rounded-lg border-2 border-gray-700 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fa-solid fa-video-slash text-6xl text-gray-600 mb-4"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-400 mb-2",children:"CAMERA OFFLINE"}),e.jsx("p",{className:"text-gray-500",children:"No signal detected"})]})})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-[rgba(11,19,34,0.6)] rounded-lg p-4 border border-[rgba(36,72,176,0.2)]",children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase block mb-1",children:"Camera ID"}),e.jsxs("p",{className:"text-white font-bold",children:["#",s.id]})]}),e.jsxs("div",{className:"bg-[rgba(11,19,34,0.6)] rounded-lg p-4 border border-[rgba(36,72,176,0.2)]",children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase block mb-1",children:"Category"}),e.jsx("p",{className:"text-white font-bold capitalize",children:s.category})]}),e.jsxs("div",{className:"bg-[rgba(11,19,34,0.6)] rounded-lg p-4 border border-[rgba(36,72,176,0.2)]",children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase block mb-1",children:"Coordinates"}),e.jsxs("p",{className:"text-white font-mono text-sm",children:[s.coords.x.toFixed(1),", ",s.coords.y.toFixed(1)]})]}),e.jsxs("div",{className:"bg-[rgba(11,19,34,0.6)] rounded-lg p-4 border border-[rgba(36,72,176,0.2)]",children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase block mb-1",children:"Status"}),e.jsx(O,{variant:j(s.status),children:s.status.toUpperCase()})]})]}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t border-[rgba(36,72,176,0.2)]",children:[e.jsx(f,{variant:"ghost",onClick:a,children:"Close"}),s.status==="online"&&e.jsxs(e.Fragment,{children:[e.jsxs(f,{variant:"success",onClick:n,children:[e.jsx("i",{className:"fa-solid fa-eye mr-2"}),"View Live Feed"]}),e.jsxs(f,{variant:"primary",children:[e.jsx("i",{className:"fa-solid fa-download mr-2"}),"Download Footage"]}),e.jsxs(f,{variant:"secondary",children:[e.jsx("i",{className:"fa-solid fa-file-export mr-2"}),"Add to Evidence"]})]})]})]})})}function dt({cameras:s,onCameraSelect:a,incidentLocation:r}){const[c,t]=l.useState("all"),[n,m]=l.useState(""),j=s.filter(p=>{const g=c==="all"||p.status===c||p.category===c,i=p.label.toLowerCase().includes(n.toLowerCase())||p.location.toLowerCase().includes(n.toLowerCase());return g&&i}),b=p=>{switch(p){case"online":return"success";case"offline":return"secondary";case"hacked":return"danger";default:return"secondary"}},v=p=>{switch(p){case"bank":return"building-columns";case"store":return"store";case"jewelry":return"gem";default:return"video"}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsxs("button",{onClick:()=>t("all"),className:`px-4 py-2 rounded-lg border-2 font-semibold text-sm transition-all ${c==="all"?"badge-theme":"bg-gray-800/30 border-gray-700 text-gray-400 hover:border-gray-600"}`,children:["All (",s.length,")"]}),e.jsxs("button",{onClick:()=>t("online"),className:`px-4 py-2 rounded-lg border-2 font-semibold text-sm transition-all ${c==="online"?"bg-green-500/20 border-green-500 text-green-400":"bg-gray-800/30 border-gray-700 text-gray-400 hover:border-gray-600"}`,children:[e.jsx("i",{className:"fa-solid fa-circle-dot mr-1"}),"Online (",s.filter(p=>p.status==="online").length,")"]}),e.jsxs("button",{onClick:()=>t("hacked"),className:`px-4 py-2 rounded-lg border-2 font-semibold text-sm transition-all ${c==="hacked"?"bg-red-500/20 border-red-500 text-red-400":"bg-gray-800/30 border-gray-700 text-gray-400 hover:border-gray-600"}`,children:[e.jsx("i",{className:"fa-solid fa-triangle-exclamation mr-1"}),"Hacked (",s.filter(p=>p.status==="hacked").length,")"]}),e.jsxs("button",{onClick:()=>t("bank"),className:`px-4 py-2 rounded-lg border-2 font-semibold text-sm transition-all ${c==="bank"?"badge-theme":"bg-gray-800/30 border-gray-700 text-gray-400 hover:border-gray-600"}`,children:[e.jsx("i",{className:"fa-solid fa-building-columns mr-1"}),"Banks"]}),e.jsxs("button",{onClick:()=>t("store"),className:`px-4 py-2 rounded-lg border-2 font-semibold text-sm transition-all ${c==="store"?"badge-theme":"bg-gray-800/30 border-gray-700 text-gray-400 hover:border-gray-600"}`,children:[e.jsx("i",{className:"fa-solid fa-store mr-1"}),"Stores"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:j.map(p=>e.jsxs("button",{onClick:()=>a(p),className:"text-left bg-[rgba(11,19,34,0.4)] rounded-xl border border-[rgba(36,72,176,0.15)] hover:border-[rgba(56,189,248,0.3)] transition-all p-3 group",children:[e.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-lg",children:[isSafeImageUrl(p.image)?e.jsx("img",{src:p.image,alt:p.label,className:`w-full h-32 object-cover ${p.status!=="online"?"grayscale opacity-50":""}`}):e.jsx("div",{className:`w-full h-32 flex items-center justify-center ${p.status!=="online"?"opacity-50":""}`,children:e.jsx("i",{className:"fa-solid fa-image text-gray-600 text-2xl"})}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(O,{variant:b(p.status),className:"text-xs",children:[p.status==="online"&&e.jsx("i",{className:"fa-solid fa-circle-dot fa-fade mr-1"}),p.status.toUpperCase()]})}),e.jsxs("div",{className:"absolute bottom-2 left-2 bg-black/70 px-2 py-1 rounded text-xs text-white font-mono",children:["CAM #",p.id]})]}),e.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg icon-bg-theme flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:`fa-solid fa-${v(p.category)} text-theme-icon`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-white font-bold text-sm truncate group-hover:text-theme-icon transition-colors",children:p.label}),e.jsxs("p",{className:"text-gray-400 text-xs truncate",children:[e.jsx("i",{className:"fa-solid fa-location-dot mr-1"}),p.location]})]})]}),p.status==="hacked"&&p.disabledUntil&&e.jsx("div",{className:"mt-2 p-2 bg-red-500/10 rounded border border-red-500/20",children:e.jsxs("p",{className:"text-red-400 text-xs",children:[e.jsx("i",{className:"fa-solid fa-clock mr-1"}),"Restoring..."]})})]},p.id))}),j.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("i",{className:"fa-solid fa-video-slash text-4xl mb-4 block"}),"No cameras found matching filters"]})]})}const xt=Ne(ot,{scopeName:"CameraViewer",fullScreen:!1}),mt=Ne(dt,{scopeName:"CameraGrid",fullScreen:!1});function ht(){var xe,ne;const[s,a]=l.useState(""),[r,c]=l.useState("all"),[t,n]=l.useState("all"),[m,j]=l.useState(!1),[b,v]=l.useState(null),[p,g]=l.useState(!1),[i,x]=l.useState(null),[y,h]=l.useState(null),[A,T]=l.useState({title:"",code:"",location:"",description:"",priority:"medium",units:[],civilians:[],codes:[],caseNumber:"",suspects:[],witnesses:[],charges:[],evidence:[],vehiclesInvolved:[]}),{data:o,loading:u,error:R,refetch:F}=le("getIncidents",[]),{submit:D,submitting:L}=Pe("createIncident",w=>{console.log("[ps-mdt] Incident created:",w),j(!1),_(),F()},w=>{console.error("[ps-mdt] Error creating incident:",w),alert(`Failed to create incident: ${w}`)}),{submitting:U}=Pe("createReport",w=>{console.log("[ps-mdt] Report created:",w),j(!1),_(),F()},w=>{console.error("[ps-mdt] Error creating report:",w),alert(`Failed to create report: ${w}`)}),{data:W,loading:P,refetch:J}=le("getCameras",[]);ee("incidentCreated",()=>{F()}),ee("incidentUpdated",()=>{F()}),ee("cameraStatusChanged",()=>{J()}),fe("incidents",()=>{F()}),fe("incidentData",()=>{F()});const K=(o||[]).filter(w=>{var te,C,q;if(r!=="all"&&w.status!==r||t!=="all"&&w.priority!==t)return!1;if(s){const ce=s.toLowerCase();return w.id.toString().includes(ce)||w.title.toLowerCase().includes(ce)||((te=w.code)==null?void 0:te.toLowerCase().includes(ce))||((C=w.location)==null?void 0:C.toLowerCase().includes(ce))||((q=w.officerName)==null?void 0:q.toLowerCase().includes(ce))}return!0}),S=K.filter(w=>w.status==="active"&&(w.priority==="high"||w.priority==="critical")),{currentItems:G,currentPage:d,totalPages:k,goToPage:M,nextPage:z,prevPage:$,hasNext:Q,hasPrev:N}=Ge(K,10),V=async()=>{try{const w={title:A.title,code:A.code,location:A.location,description:A.description,priority:A.priority||"medium",units:A.units||[],civilians:A.civilians||[]};await D(w)}catch(w){console.error("Failed to submit:",w)}},_=()=>{T({title:"",code:"",location:"",description:"",priority:"medium",units:[],civilians:[],codes:[],vehiclesInvolved:[]})},se=w=>{switch(w){case"critical":return"danger";case"high":return"danger";case"medium":return"warning";case"low":return"info";default:return"default"}},X=w=>{switch(w){case"active":return"danger";case"resolved":return"success";case"closed":return"default";default:return"default"}},ae=w=>{const te=new Date,C=new Date(w),q=te.getTime()-C.getTime(),ce=Math.floor(q/6e4),pe=Math.floor(q/36e5);return ce<1?"Just now":ce<60?`${ce} min${ce>1?"s":""} ago`:pe<24?`${pe} hour${pe>1?"s":""} ago`:new Date(w).toLocaleString()};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(I,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(E,{placeholder:"Search incidents by ID, code, or location...",value:s,onChange:w=>a(w.target.value),icon:e.jsx("i",{className:"fa-solid fa-magnifying-glass"})})}),e.jsx(f,{variant:"primary",icon:e.jsx("i",{className:"fa-solid fa-plus"}),onClick:()=>j(!0),children:"Create Incident"})]}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{size:"sm",variant:r==="all"?"primary":"secondary",onClick:()=>c("all"),children:"All"}),e.jsx(f,{size:"sm",variant:r==="active"?"primary":"secondary",onClick:()=>c("active"),children:"Active"}),e.jsx(f,{size:"sm",variant:r==="resolved"?"primary":"secondary",onClick:()=>c("resolved"),children:"Resolved"}),e.jsx(f,{size:"sm",variant:r==="closed"?"primary":"secondary",onClick:()=>c("closed"),children:"Closed"})]}),e.jsx("div",{className:"h-8 w-px bg-[rgba(255,255,255,0.1)]"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{size:"sm",variant:t==="all"?"primary":"secondary",onClick:()=>n("all"),children:"All Priority"}),e.jsx(f,{size:"sm",variant:t==="critical"?"danger":"secondary",onClick:()=>n("critical"),children:"Critical"}),e.jsx(f,{size:"sm",variant:t==="high"?"danger":"secondary",onClick:()=>n("high"),children:"High"}),e.jsx(f,{size:"sm",variant:t==="medium"?"primary":"secondary",onClick:()=>n("medium"),children:"Medium"}),e.jsx(f,{size:"sm",variant:t==="low"?"primary":"secondary",onClick:()=>n("low"),children:"Low"})]})]})]})}),S.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-[rgba(239,68,68,0.2)] to-[rgba(185,28,28,0.15)] border border-[rgba(239,68,68,0.4)] rounded-xl p-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-[rgba(239,68,68,0.3)] flex items-center justify-center animate-pulse",children:e.jsx("i",{className:"fa-solid fa-siren-on text-red-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-white",children:"Active Emergencies"}),e.jsxs("p",{className:"text-sm text-[rgba(255,255,255,0.7)]",children:[S.length," high priority incident",S.length!==1?"s":""," require attention"]})]}),e.jsx(f,{variant:"danger",size:"sm",onClick:()=>{c("active"),n("high")},children:"View Active"})]}),e.jsx(I,{title:"Recent Incidents",subtitle:u?"Loading incidents...":`${K.length} incident${K.length!==1?"s":""}`,children:u?e.jsxs("div",{className:"flex items-center justify-center py-12 text-[rgba(255,255,255,0.5)]",children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-2 text-xl"}),e.jsx("span",{children:"Loading incidents..."})]}):R?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-red-400",children:[e.jsx("i",{className:"fa-solid fa-exclamation-triangle text-3xl mb-3"}),e.jsx("p",{className:"font-medium",children:"Failed to load incidents"}),e.jsx("p",{className:"text-sm text-[rgba(255,255,255,0.5)] mt-1",children:R}),e.jsxs(f,{variant:"primary",size:"sm",onClick:()=>F(),className:"mt-4",children:[e.jsx("i",{className:"fa-solid fa-refresh mr-2"}),"Retry"]})]}):G.length>0?e.jsx("div",{className:"space-y-3",children:G.map(w=>e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-[rgba(11,19,34,0.4)] rounded-xl border border-[rgba(36,72,176,0.15)] hover:border-[rgba(56,189,248,0.3)] transition-all cursor-pointer",onClick:()=>v(w),children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${w.priority==="critical"||w.priority==="high"?"bg-gradient-to-br from-[rgba(239,68,68,0.3)] to-[rgba(185,28,28,0.2)] border border-[rgba(239,68,68,0.5)]":w.priority==="medium"?"bg-gradient-to-br from-[rgba(251,191,36,0.3)] to-[rgba(245,158,11,0.2)] border border-[rgba(251,191,36,0.5)]":"bg-gradient-to-br from-[rgba(56,189,248,0.3)] to-[rgba(30,58,138,0.2)] border border-[rgba(56,189,248,0.5)]"}`,children:e.jsx("i",{className:`fa-solid fa-siren text-lg ${w.priority==="critical"||w.priority==="high"?"text-red-400":w.priority==="medium"?"text-yellow-400":"text-blue-400"}`})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"font-mono text-xs text-[rgba(255,255,255,0.5)]",children:["#",w.id]}),e.jsx(O,{variant:se(w.priority),children:w.priority.toUpperCase()}),e.jsx(O,{variant:X(w.status),children:w.status.toUpperCase()})]}),e.jsxs("h4",{className:"font-semibold text-white mb-2",children:[w.code?`${w.code} - `:"",w.title]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-[rgba(255,255,255,0.6)] mb-2",children:[e.jsxs("span",{children:[e.jsx("i",{className:"fa-solid fa-location-dot mr-1.5"}),w.location]}),e.jsxs("span",{children:[e.jsx("i",{className:"fa-solid fa-clock mr-1.5"}),ae(w.date)]}),w.officerName&&e.jsxs("span",{children:[e.jsx("i",{className:"fa-solid fa-user-police mr-1.5"}),w.officerName]})]}),w.units&&w.units.length>0&&e.jsx("div",{className:"flex gap-1.5",children:w.units.map((te,C)=>e.jsx("span",{className:"px-2 py-0.5 bg-[rgba(56,189,248,0.15)] text-[#38BDF8] text-xs rounded-md font-medium",children:te},C))})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(f,{size:"sm",variant:"primary",children:[e.jsx("i",{className:"fa-solid fa-eye"}),"View"]}),e.jsxs(f,{size:"sm",variant:"secondary",children:[e.jsx("i",{className:"fa-solid fa-pen"}),"Edit"]}),w.status==="active"&&e.jsxs(f,{size:"sm",variant:"secondary",onClick:te=>{te.stopPropagation(),h(w.id),g(!0)},children:[e.jsx("i",{className:"fa-solid fa-video mr-1"}),"Cameras"]})]})]},w.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-[rgba(255,255,255,0.5)]",children:[e.jsx("i",{className:"fa-solid fa-inbox text-4xl mb-3"}),e.jsx("p",{className:"text-lg font-medium",children:"No incidents found"}),e.jsx("p",{className:"text-sm mt-1",children:s||r!=="all"||t!=="all"?"Try adjusting your search or filters":"Create your first incident to get started"})]})}),k>1&&e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(f,{size:"sm",variant:"secondary",disabled:!N,onClick:$,children:e.jsx("i",{className:"fa-solid fa-chevron-left"})}),Array.from({length:k},(w,te)=>te+1).map(w=>e.jsx(f,{size:"sm",variant:d===w?"primary":"secondary",onClick:()=>M(w),children:w},w)),e.jsx(f,{size:"sm",variant:"secondary",disabled:!Q,onClick:z,children:e.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),e.jsx(ct,{isOpen:m,onClose:()=>{j(!1),_()},onSubmit:V,title:"Create New Incident",submitText:"Create Incident",isLoading:L||U,size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-white uppercase mb-3 pb-2 border-b border-[rgba(var(--outline-rgb),0.2)]",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs text-[rgba(255,255,255,0.6)] uppercase mb-2",children:"Incident Title *"}),e.jsx(E,{placeholder:"e.g., Burglary in Progress",value:A.title,onChange:w=>T({...A,title:w.target.value}),required:!0})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(it,{codes:A.codes||[],onCodesChange:w=>T({...A,codes:w,code:w.length>0?w[0].code:""}),availableCodes:Be})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-[rgba(255,255,255,0.6)] uppercase mb-2",children:"Priority *"}),e.jsxs("select",{className:`w-full px-4 py-3 bg-[rgba(11,19,34,0.4)] border border-[rgba(var(--outline-rgb),0.2)]
                    rounded-lg text-white
                    focus:outline-none focus:ring-2 focus:ring-[rgba(var(--accent-rgb),0.5)]
                    transition-all`,value:A.priority,onChange:w=>T({...A,priority:w.target.value}),required:!0,children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"critical",children:"Critical"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs text-[rgba(255,255,255,0.6)] uppercase mb-2",children:"Location *"}),e.jsx(E,{placeholder:"e.g., Legion Square, Grove Street",value:A.location,onChange:w=>T({...A,location:w.target.value}),required:!0})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-white uppercase mb-3 pb-2 border-b border-[rgba(var(--outline-rgb),0.2)]",children:"Incident Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-[rgba(255,255,255,0.6)] uppercase mb-2",children:"Description *"}),e.jsx("textarea",{className:`w-full px-4 py-3 bg-[rgba(11,19,34,0.4)] border border-[rgba(var(--outline-rgb),0.2)]
                    rounded-lg text-white placeholder-[rgba(255,255,255,0.3)]
                    focus:outline-none focus:ring-2 focus:ring-[rgba(var(--accent-rgb),0.5)]
                    transition-all resize-none`,rows:4,placeholder:"Provide a detailed description...",value:A.description,onChange:w=>T({...A,description:w.target.value}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-[rgba(255,255,255,0.6)] uppercase mb-2",children:"Responding Units (comma-separated)"}),e.jsx(E,{placeholder:"e.g., Unit 07, Unit 12",value:((xe=A.units)==null?void 0:xe.join(", "))||"",onChange:w=>T({...A,units:w.target.value.split(",").map(te=>te.trim()).filter(te=>te)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-[rgba(255,255,255,0.6)] uppercase mb-2",children:"Civilians Involved (comma-separated)"}),e.jsx(E,{placeholder:"e.g., John Doe, Jane Smith",value:((ne=A.civilians)==null?void 0:ne.join(", "))||"",onChange:w=>T({...A,civilians:w.target.value.split(",").map(te=>te.trim()).filter(te=>te)})})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-white uppercase mb-3 pb-2 border-b border-[rgba(var(--outline-rgb),0.2)]",children:"Vehicles Involved"}),e.jsx(Ye,{vehicles:A.vehiclesInvolved||[],onChange:w=>T({...A,vehiclesInvolved:w})})]}),e.jsx("div",{className:"p-4 bg-[rgba(var(--accent-rgb),0.1)] border border-[rgba(var(--accent-rgb),0.2)] rounded-lg",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("i",{className:"fa-solid fa-circle-info text-blue-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-[rgba(255,255,255,0.8)] font-medium mb-1",children:"Incident Guidelines"}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)]",children:"High priority incidents will trigger alerts to all units. You can add evidence and update status after creation."})]})]})})]})}),p&&!i&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-[rgba(15,23,42,0.98)] border-2 border-[rgba(56,189,248,0.3)] rounded-xl p-6 max-w-7xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-1",children:[e.jsx("i",{className:"fa-solid fa-video mr-2 text-blue-400"}),"Security Camera Access"]}),e.jsxs("p",{className:"text-[rgba(255,255,255,0.6)]",children:[y&&`Incident #${y} - `,"Select a camera to view live feed"]})]}),e.jsx("button",{onClick:()=>{g(!1),h(null)},className:"text-gray-400 hover:text-white transition-colors",children:e.jsx("i",{className:"fa-solid fa-times text-2xl"})})]}),P?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-3xl text-blue-400 mr-3"}),e.jsx("span",{className:"text-[rgba(255,255,255,0.7)]",children:"Loading cameras..."})]}):e.jsx(Z,{fullScreen:!1,scopeName:"CameraGrid",children:e.jsx(mt,{cameras:W||[],onCameraSelect:w=>x(w)})})]})}),i&&e.jsx(Z,{fullScreen:!1,scopeName:"CameraViewer",children:e.jsx(xt,{camera:i,onClose:()=>{x(null),J()},incidentId:y||void 0})})]})}function gt(){const[s,a]=l.useState(""),[r,c]=l.useState("all"),[t,n]=l.useState("active"),[m,j]=l.useState(!1),[b,v]=l.useState("person"),[p,g]=l.useState(null),[i,x]=l.useState({type:"person",title:"",description:"",priority:"medium",details:{},lastSeen:""}),{data:y,loading:h,error:A,refetch:T}=le("getBolos",[]),{submit:o,submitting:u}=Pe("createBolo",N=>{console.log("[ps-mdt] BOLO created:",N),j(!1),M(),T()},N=>{console.error("[ps-mdt] Error creating BOLO:",N),alert(`Failed to create BOLO: ${N}`)}),R=async N=>{const V=await H("cancelBolo",{boloId:N});V.success?T():alert(`Failed to cancel BOLO: ${V.error}`)},F=async N=>{const V=await H("updateBolo",{boloId:N,status:"resolved"});V.success?T():alert(`Failed to resolve BOLO: ${V.error}`)};ee("boloCreated",()=>{T()}),ee("boloUpdated",()=>{T()}),ee("boloCancelled",()=>{T()}),ee("boloResolved",()=>{T()});const D=(y||[]).filter(N=>{var V,_,se,X,ae,xe;if(r!=="all"&&N.type!==r||t!=="all"&&N.status!==t)return!1;if(s){const ne=s.toLowerCase();return N.title.toLowerCase().includes(ne)||N.description.toLowerCase().includes(ne)||((_=(V=N.details)==null?void 0:V.name)==null?void 0:_.toLowerCase().includes(ne))||((X=(se=N.details)==null?void 0:se.plate)==null?void 0:X.toLowerCase().includes(ne))||((xe=(ae=N.details)==null?void 0:ae.model)==null?void 0:xe.toLowerCase().includes(ne))}return!0}),L=D.filter(N=>N.status==="active"&&N.priority==="high"),{currentItems:U,currentPage:W,totalPages:P,goToPage:J,nextPage:K,prevPage:S,hasNext:G,hasPrev:d}=Ge(D,10),k=async N=>{N.preventDefault(),await o(i)},M=()=>{x({type:"person",title:"",description:"",priority:"medium",details:{},lastSeen:""})},z=N=>{switch(N){case"high":return"danger";case"medium":return"warning";case"low":return"info";default:return"default"}},$=N=>N==="person"?"fa-user":"fa-car",Q=N=>{const V=new Date,_=new Date(N),se=V.getTime()-_.getTime(),X=Math.floor(se/6e4),ae=Math.floor(se/36e5);return X<1?"Just now":X<60?`${X} min${X>1?"s":""} ago`:ae<24?`${ae} hour${ae>1?"s":""} ago`:new Date(N).toLocaleString()};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(I,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(E,{placeholder:"Search BOLOs by name, description, plate, or vehicle...",value:s,onChange:N=>a(N.target.value),icon:e.jsx("i",{className:"fa-solid fa-magnifying-glass"})})}),e.jsx(f,{variant:"primary",icon:e.jsx("i",{className:"fa-solid fa-plus"}),onClick:()=>j(!0),children:"Create BOLO"})]}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{size:"sm",variant:r==="all"?"primary":"secondary",onClick:()=>c("all"),children:"All Types"}),e.jsx(f,{size:"sm",variant:r==="person"?"primary":"secondary",onClick:()=>c("person"),icon:e.jsx("i",{className:"fa-solid fa-user"}),children:"Person"}),e.jsx(f,{size:"sm",variant:r==="vehicle"?"primary":"secondary",onClick:()=>c("vehicle"),icon:e.jsx("i",{className:"fa-solid fa-car"}),children:"Vehicle"})]}),e.jsx("div",{className:"h-8 w-px bg-[rgba(255,255,255,0.1)]"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{size:"sm",variant:t==="all"?"primary":"secondary",onClick:()=>n("all"),children:"All Status"}),e.jsx(f,{size:"sm",variant:t==="active"?"primary":"secondary",onClick:()=>n("active"),children:"Active"}),e.jsx(f,{size:"sm",variant:t==="resolved"?"primary":"secondary",onClick:()=>n("resolved"),children:"Resolved"}),e.jsx(f,{size:"sm",variant:t==="cancelled"?"primary":"secondary",onClick:()=>n("cancelled"),children:"Cancelled"}),e.jsx(f,{size:"sm",variant:t==="expired"?"primary":"secondary",onClick:()=>n("expired"),children:"Expired"})]})]})]})}),L.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-[rgba(251,191,36,0.2)] to-[rgba(245,158,11,0.15)] border border-[rgba(251,191,36,0.4)] rounded-xl p-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-[rgba(251,191,36,0.3)] flex items-center justify-center animate-pulse",children:e.jsx("i",{className:"fa-solid fa-bell text-yellow-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-white",children:"🚨 Active High Priority BOLOs"}),e.jsxs("p",{className:"text-sm text-[rgba(255,255,255,0.7)]",children:[L.length," high priority BOLO",L.length!==1?"s":""," require immediate attention"]})]})]}),e.jsx(I,{title:"All BOLOs",subtitle:h?"Loading BOLOs...":`${D.length} active alert${D.length!==1?"s":""}`,children:h?e.jsxs("div",{className:"flex items-center justify-center py-12 text-[rgba(255,255,255,0.5)]",children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-2 text-xl"}),e.jsx("span",{children:"Loading BOLOs..."})]}):A?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-red-400",children:[e.jsx("i",{className:"fa-solid fa-exclamation-triangle text-3xl mb-3"}),e.jsx("p",{className:"font-medium",children:"Failed to load BOLOs"}),e.jsx("p",{className:"text-sm text-[rgba(255,255,255,0.5)] mt-1",children:A}),e.jsxs(f,{variant:"primary",size:"sm",onClick:()=>T(),className:"mt-4",children:[e.jsx("i",{className:"fa-solid fa-refresh mr-2"}),"Retry"]})]}):U.length>0?e.jsx("div",{className:"space-y-4",children:U.map(N=>e.jsxs("div",{className:"p-4 bg-[rgba(11,19,34,0.4)] rounded-xl border-2 border-[rgba(36,72,176,0.15)] hover:border-[rgba(56,189,248,0.4)] transition-all cursor-pointer",onClick:()=>g(N),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${N.type==="person"?"bg-gradient-to-br from-[rgba(56,189,248,0.3)] to-[rgba(30,58,138,0.2)] border border-[rgba(56,189,248,0.5)]":"bg-gradient-to-br from-[rgba(168,85,247,0.3)] to-[rgba(126,34,206,0.2)] border border-[rgba(168,85,247,0.5)]"}`,children:e.jsx("i",{className:`fa-solid ${$(N.type)} text-lg ${N.type==="person"?"text-theme-icon":"text-purple-400"}`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"font-mono text-xs text-[rgba(255,255,255,0.5)]",children:["#",N.id]}),e.jsxs(O,{variant:z(N.priority),children:[N.priority.toUpperCase()," PRIORITY"]}),e.jsx(O,{variant:"default",children:N.type.toUpperCase()}),N.status!=="active"&&e.jsx(O,{variant:N.status==="resolved"?"success":"default",children:N.status.toUpperCase()})]}),e.jsx("h4",{className:"font-bold text-lg text-white",children:N.title})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{size:"sm",variant:"primary",children:e.jsx("i",{className:"fa-solid fa-eye"})}),N.status==="active"&&e.jsx(f,{size:"sm",variant:"secondary",children:e.jsx("i",{className:"fa-solid fa-pen"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase tracking-wider",children:"Description"}),e.jsx("p",{className:"text-sm text-white mt-0.5",children:N.description})]}),N.type==="person"&&e.jsxs(e.Fragment,{children:[N.details.name&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase tracking-wider",children:"Name"}),e.jsx("p",{className:"text-sm text-white mt-0.5",children:N.details.name})]}),N.details.distinguishingFeatures&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase tracking-wider",children:"Distinguishing Features"}),e.jsx("p",{className:"text-sm text-white mt-0.5",children:N.details.distinguishingFeatures})]})]}),N.type==="vehicle"&&e.jsxs(e.Fragment,{children:[N.details.plate&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase tracking-wider",children:"License Plate"}),e.jsx("p",{className:"text-sm text-white mt-0.5 font-mono",children:N.details.plate})]}),N.details.model&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase tracking-wider",children:"Vehicle Model"}),e.jsx("p",{className:"text-sm text-white mt-0.5",children:N.details.model})]}),N.details.color&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase tracking-wider",children:"Color"}),e.jsx("p",{className:"text-sm text-white mt-0.5",children:N.details.color})]})]}),N.lastSeen&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase tracking-wider",children:"Last Seen"}),e.jsxs("p",{className:"text-sm text-white mt-0.5",children:[e.jsx("i",{className:"fa-solid fa-location-dot mr-1.5 text-red-400"}),N.lastSeen," (",Q(N.date),")"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-[rgba(36,72,176,0.15)]",children:[e.jsxs("span",{className:"text-xs text-[rgba(255,255,255,0.6)]",children:["Issued by"," ",e.jsx("span",{className:"text-[#38BDF8] font-medium",children:N.officerName||"Unknown"})," ","on ",new Date(N.date).toLocaleDateString()]}),N.status==="active"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{size:"sm",variant:"secondary",onClick:V=>{V.stopPropagation(),confirm("Are you sure you want to cancel this BOLO?")&&R(N.id)},children:[e.jsx("i",{className:"fa-solid fa-bell-slash"}),"Cancel"]}),e.jsxs(f,{size:"sm",variant:"success",onClick:V=>{V.stopPropagation(),confirm("Mark this BOLO as resolved?")&&F(N.id)},children:[e.jsx("i",{className:"fa-solid fa-check"}),"Resolved"]})]})]})]},N.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-[rgba(255,255,255,0.5)]",children:[e.jsx("i",{className:"fa-solid fa-inbox text-4xl mb-3"}),e.jsx("p",{className:"text-lg font-medium",children:"No BOLOs found"}),e.jsx("p",{className:"text-sm mt-1",children:s||r!=="all"||t!=="active"?"Try adjusting your search or filters":"Create your first BOLO to get started"})]})}),P>1&&e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(f,{size:"sm",variant:"secondary",disabled:!d,onClick:S,children:e.jsx("i",{className:"fa-solid fa-chevron-left"})}),Array.from({length:P},(N,V)=>V+1).map(N=>e.jsx(f,{size:"sm",variant:W===N?"primary":"secondary",onClick:()=>J(N),children:N},N)),e.jsx(f,{size:"sm",variant:"secondary",disabled:!G,onClick:K,children:e.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),e.jsx(Xe,{isOpen:m,onClose:()=>{j(!1),M()},onSubmit:k,title:"Create New BOLO",submitText:"Issue BOLO",isLoading:u,size:"lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[rgba(255,255,255,0.9)] mb-2",children:"BOLO Type *"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",className:`p-4 rounded-lg border-2 transition-all ${i.type==="person"?"border-[#38BDF8] bg-[rgba(56,189,248,0.1)]":"border-[rgba(255,255,255,0.1)] bg-[rgba(11,19,34,0.4)] hover:border-[rgba(255,255,255,0.2)]"}`,onClick:()=>x({...i,type:"person",details:{}}),children:[e.jsx("i",{className:"fa-solid fa-user text-2xl text-theme-icon mb-2"}),e.jsx("div",{className:"text-sm font-medium",children:"Person BOLO"})]}),e.jsxs("button",{type:"button",className:`p-4 rounded-lg border-2 transition-all ${i.type==="vehicle"?"border-[#A855F7] bg-[rgba(168,85,247,0.1)]":"border-[rgba(255,255,255,0.1)] bg-[rgba(11,19,34,0.4)] hover:border-[rgba(255,255,255,0.2)]"}`,onClick:()=>x({...i,type:"vehicle",details:{}}),children:[e.jsx("i",{className:"fa-solid fa-car text-2xl text-purple-400 mb-2"}),e.jsx("div",{className:"text-sm font-medium",children:"Vehicle BOLO"})]})]})]}),e.jsx(E,{label:"Title *",value:i.title,onChange:N=>x({...i,title:N.target.value}),placeholder:i.type==="person"?'e.g., John "Scarface" Martinez':"e.g., Stolen Police Cruiser",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[rgba(255,255,255,0.9)] mb-2",children:"Description *"}),e.jsx("textarea",{className:"w-full px-4 py-3 rounded-lg bg-[rgba(11,19,34,0.6)] border-2 border-[rgba(36,72,176,0.2)] text-white placeholder-[rgba(255,255,255,0.3)] focus:outline-none focus:border-[#38BDF8] transition-colors resize-none",rows:3,value:i.description,onChange:N=>x({...i,description:N.target.value}),placeholder:i.type==="person"?"Physical description, clothing, behavior...":"Vehicle description, damage, modifications...",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[rgba(255,255,255,0.9)] mb-2",children:"Priority *"}),e.jsxs("select",{className:"w-full px-4 py-3 rounded-lg bg-[rgba(11,19,34,0.6)] border-2 border-[rgba(36,72,176,0.2)] text-white focus:outline-none focus:border-[#38BDF8] transition-colors",value:i.priority,onChange:N=>x({...i,priority:N.target.value}),required:!0,children:[e.jsx("option",{value:"high",children:"🔴 High Priority"}),e.jsx("option",{value:"medium",children:"🟡 Medium Priority"}),e.jsx("option",{value:"low",children:"🟢 Low Priority"})]})]}),e.jsx(E,{label:"Last Seen Location",value:i.lastSeen||"",onChange:N=>x({...i,lastSeen:N.target.value}),placeholder:"e.g., Grove Street",icon:e.jsx("i",{className:"fa-solid fa-location-dot"})})]}),i.type==="person"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-4 border-t border-[rgba(36,72,176,0.2)]",children:e.jsx("h4",{className:"text-sm font-semibold text-[rgba(255,255,255,0.9)] mb-3",children:"Person Details"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(E,{label:"Full Name",value:i.details.name||"",onChange:N=>x({...i,details:{...i.details,name:N.target.value}}),placeholder:"e.g., John Martinez"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[rgba(255,255,255,0.9)] mb-2",children:"Gender"}),e.jsxs("select",{className:"w-full px-4 py-3 rounded-lg bg-[rgba(11,19,34,0.6)] border-2 border-[rgba(36,72,176,0.2)] text-white focus:outline-none focus:border-[#38BDF8] transition-colors",value:i.details.gender||"",onChange:N=>x({...i,details:{...i.details,gender:N.target.value}}),children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Unknown",children:"Unknown"})]})]}),e.jsx(E,{label:"Height",value:i.details.height||"",onChange:N=>x({...i,details:{...i.details,height:N.target.value}}),placeholder:"e.g., 6 ft 2 in"}),e.jsx(E,{label:"Weight",value:i.details.weight||"",onChange:N=>x({...i,details:{...i.details,weight:N.target.value}}),placeholder:"e.g., 180 lbs"}),e.jsx(E,{label:"Hair Color",value:i.details.hairColor||"",onChange:N=>x({...i,details:{...i.details,hairColor:N.target.value}}),placeholder:"e.g., Black"}),e.jsx(E,{label:"Eye Color",value:i.details.eyeColor||"",onChange:N=>x({...i,details:{...i.details,eyeColor:N.target.value}}),placeholder:"e.g., Brown"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[rgba(255,255,255,0.9)] mb-2",children:"Distinguishing Features"}),e.jsx("textarea",{className:"w-full px-4 py-3 rounded-lg bg-[rgba(11,19,34,0.6)] border-2 border-[rgba(36,72,176,0.2)] text-white placeholder-[rgba(255,255,255,0.3)] focus:outline-none focus:border-[#38BDF8] transition-colors resize-none",rows:2,value:i.details.distinguishingFeatures||"",onChange:N=>x({...i,details:{...i.details,distinguishingFeatures:N.target.value}}),placeholder:"Tattoos, scars, piercings, etc."})]})]}),i.type==="vehicle"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-4 border-t border-[rgba(36,72,176,0.2)]",children:e.jsx("h4",{className:"text-sm font-semibold text-[rgba(255,255,255,0.9)] mb-3",children:"Vehicle Details"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(E,{label:"License Plate",value:i.details.plate||"",onChange:N=>x({...i,details:{...i.details,plate:N.target.value.toUpperCase()}}),placeholder:"e.g., ABC1234",icon:e.jsx("i",{className:"fa-solid fa-id-card"})}),e.jsx(E,{label:"Model",value:i.details.model||"",onChange:N=>x({...i,details:{...i.details,model:N.target.value}}),placeholder:"e.g., Sultan RS"}),e.jsx(E,{label:"Color",value:i.details.color||"",onChange:N=>x({...i,details:{...i.details,color:N.target.value}}),placeholder:"e.g., Black"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[rgba(255,255,255,0.9)] mb-2",children:"Vehicle Type"}),e.jsxs("select",{className:"w-full px-4 py-3 rounded-lg bg-[rgba(11,19,34,0.6)] border-2 border-[rgba(36,72,176,0.2)] text-white focus:outline-none focus:border-[#38BDF8] transition-colors",value:i.details.vehicleType||"",onChange:N=>x({...i,details:{...i.details,vehicleType:N.target.value}}),children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"Sedan",children:"Sedan"}),e.jsx("option",{value:"SUV",children:"SUV"}),e.jsx("option",{value:"Truck",children:"Truck"}),e.jsx("option",{value:"Van",children:"Van"}),e.jsx("option",{value:"Motorcycle",children:"Motorcycle"}),e.jsx("option",{value:"Sports",children:"Sports Car"}),e.jsx("option",{value:"Luxury",children:"Luxury"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]})]})]})})]})}function ut(){var $,Q,N,V,_,se,X,ae,xe,ne,w,te;const[s,a]=l.useState("person"),[r,c]=l.useState(""),[t,n]=l.useState(null),[m,j]=l.useState("overview"),[b,v]=l.useState(!1),[p,g]=l.useState(null),[i,x]=l.useState(""),[y,h]=l.useState(!1),[A,T]=l.useState(!1),[o,u]=l.useState([]),[R,F]=l.useState(!1),[D,L]=l.useState(!1),U=C=>{if(!C||typeof C!="string")return!1;try{const q=new URL(C);return["https:","http:","data:","blob:"].includes(q.protocol)}catch{return!1}},W=ie(C=>C.navigationContext),P=ie(C=>C.clearNavigationContext);l.useEffect(()=>{W!=null&&W.profileSearch&&(c(W.profileSearch),a("person"),(async()=>{v(!0),g(null),n(null);try{const q=await H("searchPerson",{query:W.profileSearch});q.success&&q.data?(n({type:"person",data:q.data}),g(null)):g(q.error||"Person profile not found")}catch{g("Failed to search for person")}finally{v(!1),P()}})())},[W,P]),l.useEffect(()=>{L(!1)},[($=t==null?void 0:t.data)==null?void 0:$.image]),ee("profileUpdated",C=>{t&&t.type==="person"&&C.citizenid===t.data.citizenid&&J()}),ee("chargeAdded",C=>{t&&t.type==="person"&&C.citizenid===t.data.citizenid&&J()});const J=async()=>{if(!r.trim()){g("Please enter a search query");return}v(!0),g(null),n(null);try{if(s==="person"){const C=await H("searchPerson",{query:r});C.success&&C.data?(n({type:"person",data:C.data}),g(null)):g(C.error||"Person profile not found")}else{const C=await H("searchVehicle",{query:r.toUpperCase()});C.success&&C.data?(n({type:"vehicle",data:C.data}),g(null)):g(C.error||"Vehicle not found")}}catch(C){console.error("Profile search failed:",C),g("Search failed. Please try again.")}finally{v(!1)}},K=async()=>{if(!(!i.trim()||!t||t.type!=="person")){h(!0);try{const C=await H("addProfileNote",{citizenid:t.data.citizenid,note:i,isImportant:!1});C.success?(x(""),J()):alert(`Failed to add note: ${C.error}`)}catch(C){console.error("Failed to add note:",C),alert("Failed to add note")}finally{h(!1)}}},S=async()=>{alert("Charge addition modal - to be implemented")},G=async()=>{alert("Warrant creation modal - to be implemented")},d=C=>{switch(C){case"convicted":return"danger";case"pending":return"warning";case"dismissed":return"info";case"active":return"success";case"matched":return"success";case"stored":return"info";case"analyzing":return"warning";case"closed":return"default";case"investigating":return"warning";case"expired":return"default";case"cancelled":return"danger";case"registered":return"success";case"stolen":return"danger";case"impounded":return"warning";case"scrapped":return"default";default:return"default"}},k=C=>C===!0||C==="valid"?"Valid":C===!1||C==="revoked"?"Revoked":C==="suspended"?"Suspended":"None",M=C=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(C),z=C=>new Date(C).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsxs("div",{className:"space-y-6",children:[e.jsx(I,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{variant:s==="person"?"primary":"secondary",onClick:()=>a("person"),icon:e.jsx("i",{className:"fa-solid fa-user"}),className:"flex-1",children:"Search Person"}),e.jsx(f,{variant:s==="vehicle"?"primary":"secondary",onClick:()=>a("vehicle"),icon:e.jsx("i",{className:"fa-solid fa-car"}),className:"flex-1",children:"Search Vehicle"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{placeholder:s==="person"?"Enter name or Citizen ID...":"Enter plate number or VIN...",value:r,onChange:C=>{c(C.target.value),g(null)},onKeyPress:C=>C.key==="Enter"&&J(),icon:e.jsx("i",{className:"fa-solid fa-magnifying-glass"}),className:"flex-1"}),e.jsxs(f,{variant:"primary",onClick:J,disabled:b||!r.trim(),children:[e.jsx("i",{className:`fa-solid ${b?"fa-spinner fa-spin":"fa-search"}`}),b?"Searching...":"Search"]})]}),p&&e.jsx("div",{className:"p-3 bg-red-500/10 rounded-lg border border-red-500/30",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-exclamation-circle text-red-400"}),e.jsx("span",{className:"text-sm text-red-400",children:p})]})})]})}),t&&t.type==="person"&&e.jsxs(e.Fragment,{children:[e.jsx(I,{children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:t.data.image&&!D&&U(t.data.image)?e.jsx("img",{src:t.data.image,alt:"Mugshot",className:"w-32 h-32 rounded-xl border-2 border-[rgba(56,189,248,0.5)] object-cover",onError:C=>{console.warn("[MDT] Mugshot failed to load, using fallback UI"),L(!0)}}):e.jsx("div",{className:"w-32 h-32 rounded-xl bg-gradient-to-br flex items-center justify-center border",style:{background:"linear-gradient(to bottom right, rgba(var(--theme-accent-rgb), 0.3), rgba(var(--theme-primary-rgb), 0.2))",borderColor:"var(--theme-border)"},children:e.jsx("i",{className:"fa-solid fa-user text-5xl text-theme-icon"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:t.data.fullName||`${t.data.firstname} ${t.data.lastname}`}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(O,{variant:"default",children:t.data.citizenid}),t.data.warrants&&t.data.warrants.length>0&&e.jsxs(O,{variant:"danger",children:[e.jsx("i",{className:"fa-solid fa-gavel mr-1"}),t.data.warrants.length," Warrant",t.data.warrants.length!==1?"s":""]}),t.data.flags&&t.data.flags.length>0&&e.jsxs(O,{variant:"warning",children:[e.jsx("i",{className:"fa-solid fa-flag mr-1"}),t.data.flags.length," Flag",t.data.flags.length!==1?"s":""]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{size:"sm",variant:"primary",children:[e.jsx("i",{className:"fa-solid fa-file-plus"}),"New Report"]}),e.jsxs(f,{size:"sm",variant:"secondary",onClick:S,children:[e.jsx("i",{className:"fa-solid fa-gavel"}),"Add Charge"]}),e.jsxs(f,{size:"sm",variant:"danger",onClick:G,children:[e.jsx("i",{className:"fa-solid fa-handcuffs"}),"Issue Warrant"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"DOB"}),e.jsx("p",{className:"text-sm text-white font-medium",children:t.data.dob||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Gender"}),e.jsx("p",{className:"text-sm text-white font-medium",children:t.data.gender||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Phone"}),e.jsx("p",{className:"text-sm text-white font-medium",children:t.data.phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Nationality"}),e.jsx("p",{className:"text-sm text-white font-medium",children:t.data.nationality||"Unknown"})]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-4",children:[e.jsx(I,{children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:((Q=t.data.charges)==null?void 0:Q.length)||0}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)] uppercase",children:"Charges"})]})}),e.jsx(I,{children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-400 mb-1",children:((N=t.data.warrants)==null?void 0:N.length)||0}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)] uppercase",children:"Warrants"})]})}),e.jsx(I,{children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-theme-icon mb-1",children:((V=t.data.vehicles)==null?void 0:V.length)||0}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)] uppercase",children:"Vehicles"})]})}),e.jsx(I,{children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-400 mb-1",children:((_=t.data.properties)==null?void 0:_.length)||0}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)] uppercase",children:"Properties"})]})}),e.jsx(I,{children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-400 mb-1",children:((se=t.data.notes)==null?void 0:se.length)||0}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)] uppercase",children:"Notes"})]})}),e.jsx(I,{children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-400 mb-1",children:Object.values(t.data.licenses||{}).filter(C=>C===!0||C==="valid").length}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)] uppercase",children:"Licenses"})]})})]}),e.jsxs(I,{children:[e.jsxs("div",{className:"flex flex-wrap gap-2 border-b border-[rgba(36,72,176,0.15)] pb-4",children:[e.jsx(f,{size:"sm",variant:m==="overview"?"primary":"secondary",onClick:()=>j("overview"),icon:e.jsx("i",{className:"fa-solid fa-id-card"}),children:"Overview"}),e.jsxs(f,{size:"sm",variant:m==="charges"?"primary":"secondary",onClick:()=>j("charges"),icon:e.jsx("i",{className:"fa-solid fa-gavel"}),children:["Charges (",((X=t.data.charges)==null?void 0:X.length)||0,")"]}),e.jsxs(f,{size:"sm",variant:m==="incidents"?"primary":"secondary",onClick:()=>j("incidents"),icon:e.jsx("i",{className:"fa-solid fa-file-lines"}),children:["Incidents (",((ae=t.data.incidents)==null?void 0:ae.length)||0,")"]}),e.jsxs(f,{size:"sm",variant:m==="evidence"?"primary":"secondary",onClick:()=>j("evidence"),icon:e.jsx("i",{className:"fa-solid fa-box-archive"}),children:["Evidence (",((xe=t.data.evidence)==null?void 0:xe.length)||0,")"]}),e.jsxs(f,{size:"sm",variant:m==="bolos"?"primary":"secondary",onClick:()=>j("bolos"),icon:e.jsx("i",{className:"fa-solid fa-bullhorn"}),children:["BOLOs (",((ne=t.data.bolos)==null?void 0:ne.length)||0,")"]}),e.jsxs(f,{size:"sm",variant:m==="vehicles"?"primary":"secondary",onClick:()=>j("vehicles"),icon:e.jsx("i",{className:"fa-solid fa-car"}),children:["Vehicles (",((w=t.data.vehicles)==null?void 0:w.length)||0,")"]}),e.jsxs(f,{size:"sm",variant:m==="notes"?"primary":"secondary",onClick:()=>j("notes"),icon:e.jsx("i",{className:"fa-solid fa-note-sticky"}),children:["Notes (",((te=t.data.notes)==null?void 0:te.length)||0,")"]})]}),e.jsxs("div",{className:"mt-6",children:[m==="overview"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-circle-info text-theme-icon"}),"Personal Information"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Full Name:"}),e.jsx("span",{className:"text-white font-medium",children:t.data.fullName||`${t.data.firstname} ${t.data.lastname}`})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Citizen ID:"}),e.jsx("span",{className:"text-white font-mono",children:t.data.citizenid})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Date of Birth:"}),e.jsx("span",{className:"text-white",children:t.data.dob||"Unknown"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Gender:"}),e.jsx("span",{className:"text-white",children:t.data.gender||"Unknown"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Phone Number:"}),e.jsx("span",{className:"text-white font-mono",children:t.data.phone||"N/A"})]}),t.data.email&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Email:"}),e.jsx("span",{className:"text-white",children:t.data.email})]}),t.data.address&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Address:"}),e.jsx("span",{className:"text-white",children:t.data.address})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-id-badge text-green-400"}),"Licenses & Status"]}),e.jsxs("div",{className:"space-y-2",children:[t.data.licenses&&e.jsxs(e.Fragment,{children:[t.data.licenses.driver&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(O,{variant:t.data.licenses.driver===!0||t.data.licenses.driver==="valid"?"success":"danger",children:[e.jsx("i",{className:"fa-solid fa-car mr-1"}),"Driver License:"," ",k(t.data.licenses.driver)]})}),t.data.licenses.weapon&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(O,{variant:t.data.licenses.weapon===!0||t.data.licenses.weapon==="valid"?"success":"danger",children:[e.jsx("i",{className:"fa-solid fa-gun mr-1"}),"Weapon License:"," ",k(t.data.licenses.weapon)]})}),t.data.licenses.business&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(O,{variant:t.data.licenses.business===!0||t.data.licenses.business==="valid"?"success":"danger",children:[e.jsx("i",{className:"fa-solid fa-briefcase mr-1"}),"Business License:"," ",k(t.data.licenses.business)]})}),t.data.licenses.hunting&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(O,{variant:t.data.licenses.hunting===!0||t.data.licenses.hunting==="valid"?"success":"danger",children:[e.jsx("i",{className:"fa-solid fa-crosshairs mr-1"}),"Hunting License:"," ",k(t.data.licenses.hunting)]})}),t.data.licenses.pilot&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(O,{variant:t.data.licenses.pilot===!0||t.data.licenses.pilot==="valid"?"success":"danger",children:[e.jsx("i",{className:"fa-solid fa-plane mr-1"}),"Pilot License:"," ",k(t.data.licenses.pilot)]})})]}),t.data.fingerprint&&e.jsxs("div",{className:"mt-3 p-2 bg-[rgba(11,19,34,0.4)] rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Fingerprint ID"}),e.jsx("p",{className:"text-xs text-white font-mono",children:t.data.fingerprint})]})]})]})]}),t.data.warrants&&t.data.warrants.length>0&&e.jsxs("div",{className:"p-4 bg-red-500/10 rounded-lg border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("i",{className:"fa-solid fa-triangle-exclamation text-red-400 text-xl"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-red-400",children:"ACTIVE WARRANTS"}),e.jsxs("p",{className:"text-xs text-gray-300",children:["This individual has ",t.data.warrants.length," active warrant(s). Proceed with caution."]})]})]}),e.jsx("div",{className:"space-y-2",children:t.data.warrants.map((C,q)=>e.jsxs("div",{className:"p-3 bg-[rgba(11,19,34,0.4)] rounded-lg border border-red-500/20",children:[e.jsx("p",{className:"text-sm font-medium text-white mb-1",children:C.reason||"Warrant Issued"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Issued: ",z(C.date)," • By: ",C.officerName]})]},q))})]}),t.data.flags&&t.data.flags.length>0&&e.jsxs("div",{className:"p-4 bg-yellow-500/10 rounded-lg border border-yellow-500/30",children:[e.jsxs("h4",{className:"text-sm font-semibold text-yellow-400 mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-flag"}),"Profile Flags"]}),e.jsx("div",{className:"space-y-1",children:t.data.flags.map((C,q)=>e.jsxs("div",{className:"text-sm text-gray-300",children:["• ",C]},q))})]}),t.data.properties&&t.data.properties.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-house text-purple-400"}),"Owned Properties"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.data.properties.map((C,q)=>e.jsxs("div",{className:"p-3 bg-[rgba(11,19,34,0.4)] rounded-lg border border-[rgba(36,72,176,0.15)]",children:[e.jsx("p",{className:"text-sm font-medium text-white mb-1",children:C.address}),e.jsxs("p",{className:"text-xs text-gray-400",children:[C.propertyType,C.purchaseDate&&` • Purchased: ${z(C.purchaseDate)}`]})]},q))})]})]}),m==="charges"&&e.jsx("div",{className:"space-y-3",children:!t.data.charges||t.data.charges.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx("i",{className:"fa-solid fa-gavel text-3xl mb-2"}),e.jsx("p",{children:"No charges on record"}),e.jsxs(f,{size:"sm",variant:"primary",onClick:S,className:"mt-4",children:[e.jsx("i",{className:"fa-solid fa-plus mr-2"}),"Add First Charge"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-end mb-3",children:e.jsxs(f,{size:"sm",variant:"primary",onClick:S,children:[e.jsx("i",{className:"fa-solid fa-plus mr-2"}),"Add Charge"]})}),t.data.charges.map((C,q)=>e.jsx("div",{className:"flex items-center justify-between p-4 bg-[rgba(11,19,34,0.4)] rounded-lg border border-[rgba(36,72,176,0.15)] hover:border-[rgba(56,189,248,0.3)] transition-all",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-white",children:C.charge}),e.jsx(O,{variant:"default",children:C.chargeCode}),e.jsx(O,{variant:"info",children:C.category})]}),e.jsx("p",{className:"text-sm text-gray-300 mb-2",children:C.description||"No description provided"}),e.jsxs("div",{className:"flex gap-4 text-xs text-[rgba(255,255,255,0.6)]",children:[e.jsxs("span",{children:[e.jsx("i",{className:"fa-solid fa-calendar mr-1"}),z(C.date)]}),e.jsxs("span",{children:[e.jsx("i",{className:"fa-solid fa-user-police mr-1"}),C.officerName||C.officer]}),C.fine>0&&e.jsxs("span",{children:[e.jsx("i",{className:"fa-solid fa-dollar-sign mr-1"}),"Fine: ",M(C.fine)]}),C.sentence>0&&e.jsxs("span",{children:[e.jsx("i",{className:"fa-solid fa-clock mr-1"}),"Sentence: ",C.sentence," months"]})]}),C.notes&&e.jsx("p",{className:"text-xs text-gray-400 mt-2 italic",children:C.notes})]})},q))]})}),m==="vehicles"&&e.jsx("div",{className:"space-y-3",children:!t.data.vehicles||t.data.vehicles.length===0?e.jsxs("div",{className:"text-center py-8 space-y-4",children:[e.jsxs("div",{children:[e.jsx("i",{className:"fa-solid fa-car text-4xl mb-3 text-[rgba(255,255,255,0.3)]"}),e.jsx("p",{className:"text-[rgba(255,255,255,0.6)] mb-2",children:"No vehicles linked to this profile"}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.4)]",children:"Add a vehicle to link it to this person's profile"})]}),e.jsxs(f,{variant:"primary",onClick:async()=>{F(!0);try{const C=await H("getAvailableVehicles",{});C.success&&C.data&&u(C.data)}catch(C){console.error("Failed to fetch vehicles:",C),u([])}finally{F(!1),T(!0)}},children:[e.jsx("i",{className:"fa-solid fa-plus mr-2"}),"Link Vehicle"]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-[rgba(255,255,255,0.6)]",children:[t.data.vehicles.length," vehicle",t.data.vehicles.length!==1?"s":""]}),e.jsxs(f,{size:"sm",variant:"secondary",onClick:async()=>{F(!0);try{const C=await H("getAvailableVehicles",{});C.success&&C.data&&u(C.data)}catch(C){console.error("Failed to fetch vehicles:",C),u([])}finally{F(!1),T(!0)}},children:[e.jsx("i",{className:"fa-solid fa-plus mr-1"}),"Add More"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.data.vehicles.map((C,q)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-[rgba(11,19,34,0.4)] rounded-lg border border-[rgba(36,72,176,0.15)] hover:border-[rgba(56,189,248,0.3)] transition-all cursor-pointer",onClick:()=>{a("vehicle"),c(C.plate),J()},children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-[rgba(168,85,247,0.3)] to-[rgba(126,34,206,0.2)] border border-[rgba(168,85,247,0.5)] flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"fa-solid fa-car text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-semibold text-white truncate",children:C.brand?`${C.brand} ${C.model}`:C.model}),e.jsx(O,{variant:d(C.status),children:C.status})]}),e.jsxs("p",{className:"text-xs text-[rgba(255,255,255,0.6)]",children:[C.color," • ",C.plate,C.class&&` • ${C.class}`]}),C.flags&&C.flags.length>0&&e.jsx("div",{className:"flex gap-1 mt-1",children:C.flags.map((ce,pe)=>e.jsxs(O,{variant:"warning",children:[e.jsx("i",{className:"fa-solid fa-flag mr-1"}),ce]},pe))})]}),e.jsx(f,{size:"sm",variant:"secondary",children:e.jsx("i",{className:"fa-solid fa-external-link"})})]},q))})]})}),m==="notes"&&e.jsxs("div",{className:"space-y-4",children:[t.data.notes&&t.data.notes.length>0&&e.jsx("div",{className:"space-y-3",children:t.data.notes.map((C,q)=>e.jsx("div",{className:`p-4 rounded-lg border ${C.isImportant?"bg-[rgba(251,191,36,0.1)] border-[rgba(251,191,36,0.3)]":"bg-[rgba(11,19,34,0.4)] border-[rgba(36,72,176,0.15)]"}`,children:e.jsxs("div",{className:"flex gap-3",children:[C.isImportant&&e.jsx("i",{className:"fa-solid fa-triangle-exclamation text-yellow-400 text-xl"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:C.authorName||"Unknown Officer"}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.5)]",children:z(C.date)})]}),C.isImportant&&e.jsxs(O,{variant:"warning",children:[e.jsx("i",{className:"fa-solid fa-star mr-1"}),"Important"]})]}),e.jsx("p",{className:"text-sm text-[rgba(255,255,255,0.9)]",children:C.note})]})]})},q))}),e.jsxs("div",{className:"mt-4 p-4 bg-[rgba(11,19,34,0.6)] rounded-lg border border-[rgba(36,72,176,0.2)]",children:[e.jsx("h4",{className:"text-sm font-semibold text-white mb-3",children:"Add New Note"}),e.jsx("textarea",{className:"w-full px-4 py-3 rounded-lg bg-[rgba(11,19,34,0.6)] border-2 border-[rgba(36,72,176,0.2)] text-white placeholder-[rgba(255,255,255,0.3)] focus:outline-none focus:border-[#38BDF8] transition-colors resize-none",rows:4,value:i,onChange:C=>x(C.target.value),placeholder:"Enter note about this person..."}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs(f,{variant:"primary",size:"sm",onClick:K,disabled:!i.trim()||y,children:[e.jsx("i",{className:`fa-solid ${y?"fa-spinner fa-spin":"fa-plus"} mr-1`}),y?"Adding...":"Add Note"]}),e.jsx(f,{variant:"secondary",size:"sm",onClick:()=>x(""),disabled:!i.trim(),children:"Clear"})]})]}),(!t.data.notes||t.data.notes.length===0)&&e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx("i",{className:"fa-solid fa-note-sticky text-3xl mb-2"}),e.jsx("p",{children:"No notes on record"}),e.jsx("p",{className:"text-sm mt-1",children:"Add the first note using the form above"})]})]})]})]})]}),t&&t.type==="vehicle"&&e.jsxs(e.Fragment,{children:[e.jsx(I,{children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-32 h-32 rounded-xl bg-gradient-to-br from-[rgba(168,85,247,0.3)] to-[rgba(126,34,206,0.2)] border border-[rgba(168,85,247,0.5)] flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-car text-5xl text-purple-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:t.data.brand?`${t.data.brand} ${t.data.model}`:t.data.model}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(O,{variant:"default",children:t.data.plate}),e.jsx(O,{variant:d(t.data.status),children:t.data.status.toUpperCase()}),t.data.class&&e.jsx(O,{variant:"info",children:t.data.class})]})]}),e.jsxs(f,{size:"sm",variant:"primary",children:[e.jsx("i",{className:"fa-solid fa-file-plus"}),"Create Report"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Color"}),e.jsx("p",{className:"text-sm text-white font-medium",children:t.data.color})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Registered To"}),e.jsx("p",{className:"text-sm text-white font-medium",children:t.data.owner||"Unknown"})]}),t.data.registrationDate&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Registered"}),e.jsx("p",{className:"text-sm text-white font-medium",children:z(t.data.registrationDate)})]}),t.data.lastSeen&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Last Seen"}),e.jsx("p",{className:"text-sm text-white font-medium",children:t.data.lastSeen})]})]})]})]})}),t.data.flags&&t.data.flags.length>0&&e.jsx(I,{title:"Vehicle Flags",children:e.jsx("div",{className:"space-y-2",children:t.data.flags.map((C,q)=>e.jsx("div",{className:"p-3 bg-[rgba(239,68,68,0.1)] rounded-lg border border-[rgba(239,68,68,0.3)]",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("i",{className:"fa-solid fa-flag text-red-400"}),e.jsx("p",{className:"text-sm text-white",children:C})]})},q))})}),t.data.notes&&e.jsx(I,{title:"Notes",children:e.jsx("div",{className:"p-4 bg-[rgba(11,19,34,0.4)] rounded-lg border border-[rgba(36,72,176,0.15)]",children:e.jsx("p",{className:"text-sm text-white",children:t.data.notes})})})]}),!t&&e.jsx(I,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fa-solid fa-magnifying-glass text-4xl text-[rgba(56,189,248,0.3)] mb-4"}),e.jsx("p",{className:"text-[rgba(255,255,255,0.6)]",children:"Search for a person or vehicle to view their profile"})]})}),t&&t.type==="person"&&e.jsx(Ke,{isOpen:A,onClose:()=>T(!1),onLinkVehicle:async C=>{try{const q=await H("linkVehicleToProfile",{citizenid:t.data.citizenid,vehicle:C});q.success?(T(!1),J(),alert("Vehicle linked successfully!")):alert(`Failed to link vehicle: ${q.error}`)}catch(q){console.error("Failed to link vehicle:",q),alert("Failed to link vehicle")}},availableVehicles:o,loading:R})]})}function ft(){const[s,a]=l.useState(""),[r,c]=l.useState("All"),{data:t=[],loading:n,error:m,refetch:j}=le("getPenalCodes",null);ee("penalCodeUpdated",()=>{j()});const b=l.useMemo(()=>!t||t.length===0?["All"]:["All",...Array.from(new Set(t.map(y=>y.category))).sort()],[t]),v=l.useMemo(()=>t?t.filter(x=>{if(!x.isActive)return!1;const y=x.code.toLowerCase().includes(s.toLowerCase())||x.title.toLowerCase().includes(s.toLowerCase())||x.description.toLowerCase().includes(s.toLowerCase()),h=r==="All"||x.category===r;return y&&h}):[],[t,s,r]),p=x=>{switch(x){case"felony":return"danger";case"misdemeanor":return"warning";case"infraction":return"info";default:return"default"}},g=x=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(x),i=x=>{if(x===0)return"0 minutes";if(x<60)return`${x} minutes`;const y=Math.floor(x/60),h=x%60;return h===0?`${y} hour${y>1?"s":""}`:`${y}h ${h}m`};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(I,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(E,{placeholder:"Search by code or title...",value:s,onChange:x=>a(x.target.value),icon:e.jsx("i",{className:"fa-solid fa-magnifying-glass"})}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:b.map(x=>e.jsx("button",{onClick:()=>c(x),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${r===x?"bg-gradient-to-r from-[rgba(56,189,248,0.32)] to-[rgba(30,58,138,0.4)] text-white border border-[rgba(56,189,248,0.5)]":"bg-[rgba(15,23,42,0.6)] text-[rgba(255,255,255,0.7)] border border-[rgba(36,72,176,0.2)] hover:border-[rgba(56,189,248,0.3)]"}`,children:x},x))})]})}),e.jsx(I,{title:"Penal Codes",subtitle:`${v.length} codes found`,children:n?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-3xl spinner-theme mr-3"}),e.jsx("p",{className:"text-white",children:"Loading penal codes..."})]}):m?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fa-solid fa-exclamation-triangle text-3xl text-red-400 mb-3"}),e.jsx("p",{className:"text-red-400 mb-4",children:"Failed to load penal codes"}),e.jsx(f,{size:"sm",variant:"primary",onClick:()=>j(),children:"Retry"})]}):v.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fa-solid fa-search text-3xl text-[rgba(255,255,255,0.3)] mb-3"}),e.jsx("p",{className:"text-[rgba(255,255,255,0.5)]",children:"No penal codes found"})]}):e.jsx("div",{className:"space-y-3",children:v.map((x,y)=>e.jsxs("div",{className:"p-4 bg-[rgba(11,19,34,0.4)] rounded-xl border border-[rgba(36,72,176,0.15)] hover:border-[rgba(56,189,248,0.3)] transition-all",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-mono text-sm font-bold text-[#38BDF8]",children:x.code}),e.jsx(O,{variant:p(x.class),children:x.class.toUpperCase()}),e.jsx(O,{variant:"default",children:x.category}),x.points&&x.points>0&&e.jsxs(O,{variant:"warning",children:[x.points," pts"]})]}),e.jsx("h3",{className:"text-lg font-bold text-white",children:x.title})]})}),e.jsx("p",{className:"text-sm text-[rgba(255,255,255,0.7)] mb-3",children:x.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-[rgba(239,68,68,0.1)] rounded-lg border border-[rgba(239,68,68,0.2)]",children:[e.jsx("i",{className:"fa-solid fa-clock text-red-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.5)]",children:"Jail Time"}),e.jsx("p",{className:"text-sm font-semibold text-white",children:i(x.sentence)})]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-[rgba(34,197,94,0.1)] rounded-lg border border-[rgba(34,197,94,0.2)]",children:[e.jsx("i",{className:"fa-solid fa-dollar-sign text-green-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.5)]",children:"Fine"}),e.jsx("p",{className:"text-sm font-semibold text-white",children:g(x.fine)})]})]})]})]},x.id))})}),e.jsx(I,{title:"Severity Levels",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 bg-[rgba(239,68,68,0.1)] rounded-lg border border-[rgba(239,68,68,0.3)]",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx(O,{variant:"danger",children:"FELONY"})}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)]",children:"Most serious crimes with significant jail time and fines"})]}),e.jsxs("div",{className:"p-3 bg-[rgba(251,191,36,0.1)] rounded-lg border border-[rgba(251,191,36,0.3)]",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx(O,{variant:"warning",children:"MISDEMEANOR"})}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)]",children:"Lesser crimes with moderate penalties"})]}),e.jsxs("div",{className:"p-3 bg-[rgba(56,189,248,0.1)] rounded-lg border border-[rgba(56,189,248,0.3)]",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx(O,{variant:"info",children:"INFRACTION"})}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)]",children:"Minor violations usually resulting in fines only"})]})]})})]})}function pt(){const[s,a]=l.useState(""),[r,c]=l.useState("licenses"),{data:t=[],loading:n,error:m,refetch:j}=le("getAllLicenses",null),{data:b=[],loading:v,error:p,refetch:g}=le("getAllVehicleRegistrations",null);ee("licenseUpdated",()=>{j()}),ee("vehicleRegistrationUpdated",()=>{g()});const i=l.useMemo(()=>t?t.flatMap(o=>{const u=[],R=[{key:"driver",name:"Driver License"},{key:"weapon",name:"Weapon License"},{key:"business",name:"Business License"},{key:"hunting",name:"Hunting License"},{key:"pilot",name:"Pilot License"}];return o.licenses&&R.forEach(({key:F,name:D})=>{const L=o.licenses[F];L!==!1&&L!==void 0&&u.push({id:`${o.citizenid}-${F}`,holder:`${o.firstname} ${o.lastname}`,type:D,status:typeof L=="string"?L:"active",citizenid:o.citizenid,points:o.points||0,suspensions:o.suspensions||[]})}),u}):[],[t]),x=l.useMemo(()=>{if(!s)return i;const o=s.toLowerCase();return i.filter(u=>u.holder.toLowerCase().includes(o)||u.type.toLowerCase().includes(o)||u.citizenid.includes(o))},[i,s]),y=l.useMemo(()=>{if(!b)return[];if(!s)return b;const o=s.toLowerCase();return b.filter(u=>u.plate.toLowerCase().includes(o)||u.owner.toLowerCase().includes(o)||u.model.toLowerCase().includes(o)||u.brand.toLowerCase().includes(o))},[b,s]),h=o=>new Date(o).toLocaleDateString(),A=o=>{switch(o){case"active":return"success";case"suspended":return"danger";case"expired":return"warning";default:return"default"}},T=o=>o>=8?"text-red-400":o>=5?"text-yellow-400":"text-green-400";return e.jsxs("div",{className:"space-y-6",children:[e.jsx(I,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{variant:r==="licenses"?"primary":"secondary",onClick:()=>c("licenses"),icon:e.jsx("i",{className:"fa-solid fa-id-card"}),className:"flex-1",children:"Licenses"}),e.jsx(f,{variant:r==="registrations"?"primary":"secondary",onClick:()=>c("registrations"),icon:e.jsx("i",{className:"fa-solid fa-car"}),className:"flex-1",children:"Vehicle Registrations"})]}),e.jsx(E,{placeholder:`Search ${r}...`,value:s,onChange:o=>a(o.target.value),icon:e.jsx("i",{className:"fa-solid fa-magnifying-glass"})})]})}),r==="licenses"&&e.jsx(I,{title:"Driver & Weapon Licenses",subtitle:`${x.length} licenses on file`,headerAction:e.jsxs(f,{size:"sm",variant:"primary",children:[e.jsx("i",{className:"fa-solid fa-plus"}),"Issue License"]}),children:n?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-3xl text-blue-400 mr-3"}),e.jsx("span",{className:"text-[rgba(255,255,255,0.7)]",children:"Loading licenses..."})]}):m?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fa-solid fa-exclamation-triangle text-3xl text-red-400 mb-3"}),e.jsx("p",{className:"text-red-400 mb-4",children:"Failed to load licenses"}),e.jsx(f,{size:"sm",variant:"primary",onClick:()=>j(),children:"Retry"})]}):x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fa-solid fa-search text-3xl text-[rgba(255,255,255,0.3)] mb-3"}),e.jsx("p",{className:"text-[rgba(255,255,255,0.5)]",children:"No licenses found"})]}):e.jsx("div",{className:"space-y-3",children:x.map(o=>e.jsxs("div",{className:"p-4 bg-[rgba(11,19,34,0.4)] rounded-xl border border-[rgba(36,72,176,0.15)] hover:border-[rgba(56,189,248,0.3)] transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-mono text-xs text-[rgba(255,255,255,0.5)]",children:o.id}),e.jsx(O,{variant:A(o.status),children:o.status.toUpperCase()}),o.points>0&&e.jsxs(O,{variant:o.points>=8?"danger":"warning",children:[o.points," POINTS"]})]}),e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:o.holder}),e.jsx("p",{className:"text-sm text-[rgba(255,255,255,0.7)]",children:o.type})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{size:"sm",variant:"ghost",children:e.jsx("i",{className:"fa-solid fa-eye"})}),e.jsx(f,{size:"sm",variant:"ghost",children:e.jsx("i",{className:"fa-solid fa-pen"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Citizen ID"}),e.jsx("p",{className:"text-sm text-white font-medium font-mono",children:o.citizenid})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Status"}),e.jsx(O,{variant:A(o.status),children:o.status.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Points"}),e.jsxs("p",{className:`text-sm font-bold ${T(o.points)}`,children:[o.points," / 12"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Suspensions"}),e.jsx("p",{className:"text-sm text-white font-medium",children:o.suspensions.length})]})]}),o.points>=8&&e.jsx("div",{className:"mt-3 p-3 bg-[rgba(239,68,68,0.1)] rounded-lg border border-[rgba(239,68,68,0.3)]",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("i",{className:"fa-solid fa-triangle-exclamation text-red-400"}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.9)]",children:"High point count - Suspension recommended at 12 points"})]})})]},o.id))})}),r==="registrations"&&e.jsx(I,{title:"Vehicle Registrations",subtitle:`${y.length} vehicles registered`,headerAction:e.jsxs(f,{size:"sm",variant:"primary",children:[e.jsx("i",{className:"fa-solid fa-plus"}),"Register Vehicle"]}),children:v?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-3xl text-blue-400 mr-3"}),e.jsx("span",{className:"text-[rgba(255,255,255,0.7)]",children:"Loading registrations..."})]}):p?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fa-solid fa-exclamation-triangle text-3xl text-red-400 mb-3"}),e.jsx("p",{className:"text-red-400 mb-4",children:"Failed to load registrations"}),e.jsx(f,{size:"sm",variant:"primary",onClick:()=>g(),children:"Retry"})]}):y.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fa-solid fa-search text-3xl text-[rgba(255,255,255,0.3)] mb-3"}),e.jsx("p",{className:"text-[rgba(255,255,255,0.5)]",children:"No registrations found"})]}):e.jsx("div",{className:"space-y-3",children:y.map(o=>e.jsxs("div",{className:"p-4 bg-[rgba(11,19,34,0.4)] rounded-xl border border-[rgba(36,72,176,0.15)] hover:border-[rgba(56,189,248,0.3)] transition-all",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-16 h-16 rounded-lg bg-gradient-to-br from-[rgba(168,85,247,0.3)] to-[rgba(126,34,206,0.2)] border border-[rgba(168,85,247,0.5)] flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-car text-2xl text-purple-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(O,{variant:"default",children:o.plate}),e.jsx(O,{variant:A(o.status),children:o.status.toUpperCase()})]}),e.jsxs("h3",{className:"text-lg font-bold text-white mb-1",children:[o.brand," ",o.model]}),e.jsxs("p",{className:"text-sm text-[rgba(255,255,255,0.6)] mb-3",children:["Owner: ",e.jsx("span",{className:"text-white font-medium",children:o.owner})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Color"}),e.jsx("p",{className:"text-sm text-white font-medium",children:o.color})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Owner ID"}),e.jsx("p",{className:"text-xs text-white font-mono",children:o.ownerCitizenid})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Registered"}),e.jsx("p",{className:"text-sm text-white font-medium",children:h(o.registrationDate)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Expires"}),e.jsx("p",{className:"text-sm text-white font-medium",children:h(o.expiryDate)})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(f,{size:"sm",variant:"ghost",children:e.jsx("i",{className:"fa-solid fa-eye"})}),e.jsx(f,{size:"sm",variant:"ghost",children:e.jsx("i",{className:"fa-solid fa-pen"})})]})]}),o.status==="expired"&&e.jsx("div",{className:"mt-3 p-3 bg-[rgba(251,191,36,0.1)] rounded-lg border border-[rgba(251,191,36,0.3)]",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("i",{className:"fa-solid fa-clock text-yellow-400"}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.9)]",children:"Registration has expired - Renewal required"})]})})]},o.plate))})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(I,{children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fa-solid fa-id-card text-3xl text-blue-400 mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:i.filter(o=>o.status==="active").length}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)] uppercase",children:"Active Licenses"})]})}),e.jsx(I,{children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fa-solid fa-car text-3xl text-purple-400 mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:(b==null?void 0:b.filter(o=>o.status==="active").length)||0}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)] uppercase",children:"Active Registrations"})]})}),e.jsx(I,{children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fa-solid fa-triangle-exclamation text-3xl text-yellow-400 mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:i.filter(o=>o.status==="suspended"||o.status==="revoked").length+((b==null?void 0:b.filter(o=>o.status==="expired"||o.status==="suspended").length)||0)}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)] uppercase",children:"Needs Attention"})]})})]})]})}function bt(){const s=ie(k=>k.officer),a=l.useRef(null),r=l.useRef(null),c=l.useRef({}),t=l.useRef(null),[n,m]=l.useState(""),[j,b]=l.useState(null),[v,p]=l.useState(!1),[g,i]=l.useState(null),[x,y]=l.useState("success"),[h,A]=l.useState(!1),{data:T,refetch:o}=le("getDispatchCalls",[]),u=l.useMemo(()=>(T||[]).map(M=>({id:String(M.id||M.callId||Date.now()),message:String(M.description||M.title||"Dispatch update"),coords:M.coords?{x:M.coords.x,y:M.coords.y}:{x:-1500,y:-300},time:new Date(M.timestamp?M.timestamp*1e3:Date.now()).toISOString(),code:String(M.dispatchCode||M.code||"10-00"),priority:String(M.priority||"").toLowerCase()==="high"?"high":String(M.priority||"").toLowerCase()==="low"?"low":"medium",type:"other"})),[T]),{data:R,refetch:F}=le("getActiveUnits",[]),D=l.useMemo(()=>(R||[]).map(M=>({id:String(M.id||M.callsign||M.name||Math.random()),officer:String(M.officer||M.name||"Unknown"),status:String(M.status||"").toLowerCase()==="busy"?"busy":String(M.status||"").toLowerCase()==="responding"?"responding":"available",location:M.location||"",coords:M.coords?{x:M.coords.x,y:M.coords.y}:void 0,heading:M.heading!==void 0?Number(M.heading):void 0,inVehicle:M.inVehicle===!0||M.inVehicle===1})),[R]);We(()=>{o(),F()},2e3,!0),fe("unitLocations",()=>{F()}),ee("unitStatusChanged",()=>{F()}),ee("unitLocationUpdated",()=>{F()}),fe("call",()=>{o()}),l.useEffect(()=>{if(g){const k=setTimeout(()=>{i(null)},3e3);return()=>clearTimeout(k)}},[g]);const L=(k,M="success")=>{i(k),y(M)},U=k=>{switch(k){case"available":return"success";case"busy":return"warning";case"responding":return"danger";case"offline":return"secondary";default:return"secondary"}},W=k=>{switch(k){case"high":return"danger";case"medium":return"warning";case"low":return"info";default:return"secondary"}},P=k=>`${Math.round((new Date().getTime()-new Date(k).getTime())/6e4)}m ago`,J=k=>{switch(k){case"robbery":return"fa-sack-dollar";case"pursuit":return"fa-car-burst";case"traffic":return"fa-car-side";case"assault":return"fa-hand-fist";case"shooting":return"fa-gun";case"suspicious":return"fa-user-secret";case"medical":return"fa-truck-medical";case"fire":return"fa-fire-flame-curved";default:return"fa-circle-exclamation"}},K=k=>{switch(k){case"robbery":return"#dc2626";case"pursuit":return"#ea580c";case"shooting":return"#b91c1c";case"traffic":return"#f59e0b";case"assault":return"#dc2626";case"suspicious":return"#6366f1";case"medical":return"#ec4899";case"fire":return"#f97316";default:return"#3b82f6"}};l.useEffect(()=>{if(!r.current||a.current)return;const k=setTimeout(()=>{if(r.current)try{const M=me.extend({},me.CRS.Simple,{projection:me.Projection.LonLat,scale:function(_){return Math.pow(2,_)},zoom:function(_){return Math.log(_)/.6931471805599453},distance:function(_,se){const X=se.lng-_.lng,ae=se.lat-_.lat;return Math.sqrt(X*X+ae*ae)},transformation:new me.Transformation(.02072,117.3,-.0205,172.8),infinite:!1}),z=me.map(r.current,{crs:M,minZoom:3,maxZoom:5,zoom:4,preferCanvas:!0,center:[-300,-1500],maxBoundsViscosity:1,zoomControl:!0,attributionControl:!1}),$="https://files.fivemerr.com/images/60c68fc9-1a7f-4e5a-800a-f760a74186ca.jpeg",Q=z.unproject([0,1024],2),N=z.unproject([1024,0],2),V=new me.LatLngBounds(Q,N);z.setView([-300,-1500],4),z.setMaxBounds(V),me.imageOverlay($,V).addTo(z),z.on("dragend",function(){V.contains(z.getCenter())||z.panTo(V.getCenter(),{animate:!1})}),t.current=me.layerGroup().addTo(z),a.current=z,setTimeout(()=>{var _,se;z.invalidateSize(),p(!0),(se=(_=import.meta)==null?void 0:_.env)!=null&&se.DEV&&console.log("[Map] Initialized successfully")},100)}catch(M){console.error("Error initializing map:",M),p(!1)}},100);return()=>{clearTimeout(k),a.current&&(a.current.remove(),a.current=null)}},[]),l.useEffect(()=>{var M,z;if(!a.current||!v||!s||D.length===0)return;const k=D.find($=>{var V;const Q=$.officer.toLowerCase(),N=`${s.firstname} ${s.lastname}`.toLowerCase();return Q.includes(N)||Q.includes(((V=s.callsign)==null?void 0:V.toLowerCase())||"")||$.id===s.citizenid});if(k&&k.coords){const{x:$,y:Q}=k.coords;a.current.setView([Q,$],a.current.getZoom()),(z=(M=import.meta)==null?void 0:M.env)!=null&&z.DEV&&console.log("[Map] Auto-centered on officer:",k.officer,"at",k.coords)}},[v,D,s]),l.useEffect(()=>{if(!a.current||!t.current||!v)return;Object.values(c.current).forEach(M=>{t.current&&t.current.removeLayer(M)}),c.current={};let k=0;u.forEach(M=>{if(!M.coords)return;const z=J(M.type),$=K(M.type),Q=_=>String(_||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),N=me.divIcon({html:`
          <div class="dispatch-marker ${Q(M.priority)}">
            <i class="fa ${Q(z)} fa-2x" style="color: ${Q($)};"></i>
          </div>
        `,className:"custom-marker",iconSize:[48,48],iconAnchor:[24,48]}),V=me.marker([M.coords.y,M.coords.x],{icon:N});V.bindTooltip(`<div style="text-align: center;">
          <div style="font-weight: bold; font-size: 13px; margin-bottom: 4px;">${Q(M.message)}</div>
          <div style="font-size: 11px; color: #94a3b8;">Code: ${Q(M.code)} | ${P(M.time)}</div>
        </div>`,{direction:"top",permanent:!1,offset:[0,-30],opacity:.95,className:"custom-tooltip"}),V.on("click",()=>{b(M.id),H("setWaypoint",{id:M.id}).then(_=>{_.success?L("Waypoint set successfully","success"):L(_.error||"Failed to set waypoint","error")}).catch(_=>{console.warn("Failed to set waypoint:",_),L("Failed to set waypoint","error")})}),t.current&&(t.current.addLayer(V),c.current[M.id]=V,k++)}),u.length>0&&console.log(`[Map] Added ${k} of ${u.length} dispatch markers`)},[u,v]),l.useEffect(()=>{var M,z;if(!a.current||!t.current||!v)return;Object.keys(c.current).forEach($=>{if($.startsWith("unit-")){const Q=c.current[$];t.current&&t.current.removeLayer(Q),delete c.current[$]}});let k=0;D.forEach($=>{if(!$.coords)return;const N={available:"#22c55e",busy:"#eab308",responding:"#ef4444",offline:"#6b7280"}[$.status]||"#3b82f6",V=$.heading!==void 0?90-$.heading:0,_=$.inVehicle?"fa-car":"fa-person-walking",se=$.inVehicle?"#3b82f6":"#10b981",X=me.divIcon({html:`
          <div class="unit-marker ${$.status}" style="position: relative;">
            <!-- Direction Arrow -->
            <div style="
              width: 28px;
              height: 28px;
              background: ${N};
              border: 2px solid white;
              border-radius: 50%;
              display: flex;
              align-items: center;
              justify-content: center;
              box-shadow: 0 2px 6px rgba(0,0,0,0.4);
              transform: rotate(${V}deg);
              transition: transform 0.3s ease-out;
            ">
              <i class="fa-solid fa-arrow-up" style="color: white; font-size: 14px;"></i>
              </div>
            </ErrorBoundary>
            <!-- Movement Type Indicator -->
            <div style="
              position: absolute;
              top: -6px;
              right: -6px;
              width: 18px;
              height: 18px;
              background: ${se};
              border: 2px solid white;
              border-radius: 50%;
              display: flex;
              align-items: center;
              justify-content: center;
              box-shadow: 0 1px 4px rgba(0,0,0,0.5);
              z-index: 10;
            ">
              <i class="fa-solid ${_}" style="color: white; font-size: 8px;"></i>
            </div>
            <!-- Callsign Label -->
            <div style="
              position: absolute;
              bottom: -18px;
              left: 50%;
              transform: translateX(-50%);
              background: rgba(0,0,0,0.85);
              color: white;
              padding: 2px 5px;
              border-radius: 3px;
              font-size: 9px;
              font-weight: 600;
              white-space: nowrap;
              box-shadow: 0 1px 3px rgba(0,0,0,0.3);
              border: 1px solid rgba(255,255,255,0.2);
            ">${$.id}</div>
          </div>
        `,className:"custom-unit-marker",iconSize:[28,46],iconAnchor:[14,46]}),ae=me.marker([$.coords.y,$.coords.x],{icon:X});ae.bindTooltip(`<div style="text-align: center;">
            <div style="font-weight: bold; font-size: 12px; margin-bottom: 3px;">${escapeHtml($.id)} - ${escapeHtml($.officer)}</div>
          <div style="font-size: 10px; color: #94a3b8;">Status: ${$.status.toUpperCase()}</div>
          ${$.location?`<div style="font-size: 10px; color: #94a3b8;">${escapeHtml($.location)}</div>`:""}
          ${$.heading!==void 0?`<div style="font-size: 10px; color: #94a3b8;">Heading: ${Math.round($.heading)}°</div>`:""}
        </div>`,{direction:"top",permanent:!1,offset:[0,-30],opacity:.95,className:"custom-tooltip"}),t.current&&(t.current.addLayer(ae),c.current[`unit-${$.id}`]=ae,k++)}),D.length>0&&((z=(M=import.meta)==null?void 0:M.env)!=null&&z.DEV)&&console.log(`[Map] Added ${k} of ${D.length} unit markers`)},[D,v]);const S=()=>{t.current&&(Object.values(c.current).forEach(k=>{t.current&&t.current.removeLayer(k)}),c.current={},o(),b(null))},G=k=>{!a.current||!k.coords||(a.current.setView([k.coords.y,k.coords.x],4,{animate:!0}),b(k.id))},d=u.filter(k=>k.message.toLowerCase().includes(n.toLowerCase())||k.code.toLowerCase().includes(n.toLowerCase()));return e.jsxs("div",{className:"flex flex-col h-full gap-3 overflow-hidden",children:[e.jsxs("div",{className:"flex gap-3 flex-shrink-0",children:[e.jsx("div",{className:"flex-1",children:e.jsx(E,{placeholder:"Search dispatch calls...",value:n,onChange:k=>m(k.target.value),icon:e.jsx("i",{className:"fa-solid fa-search"})})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"bg-gray-800/30 border border-gray-700 rounded-lg px-4 py-2 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-radio text-theme-icon"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Calls:"}),e.jsx("span",{className:"text-sm font-bold text-white",children:d.length})]}),e.jsxs("div",{className:"bg-gray-800/30 border border-gray-700 rounded-lg px-4 py-2 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-badge-check text-theme-icon"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Units:"}),e.jsx("span",{className:"text-sm font-bold text-white",children:D.length})]})]})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-4 gap-3 min-h-0",children:[e.jsxs("div",{className:"lg:col-span-1 flex flex-col gap-3 min-h-0",children:[e.jsx(I,{title:"Dispatch Calls",className:"flex-[3] flex flex-col min-h-0",children:e.jsx("div",{className:"flex-1 overflow-hidden flex flex-col min-h-0",children:e.jsx("div",{className:"space-y-2 overflow-y-auto pr-2 flex-1",children:d.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("i",{className:"fa-solid fa-radio text-3xl mb-2 block"}),e.jsx("p",{className:"text-sm",children:"No active dispatch calls"})]}):d.map(k=>e.jsxs("div",{onClick:()=>G(k),className:`p-2.5 rounded-lg border transition-all cursor-pointer ${j===k.id?"badge-theme":"bg-gray-800/30 border-gray-700 hover:border-active"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-1.5",children:[e.jsx(O,{variant:W(k.priority),className:"text-xs",children:k.code}),e.jsx("span",{className:"text-xs text-gray-400",children:P(k.time)})]}),e.jsx("p",{className:"text-sm text-white font-medium mb-1.5 line-clamp-2",children:k.message}),e.jsxs("button",{onClick:M=>{M.stopPropagation(),H("setWaypoint",{id:k.id}).then(z=>{z.success?L("Waypoint set successfully","success"):L(z.error||"Failed to set waypoint","error")}).catch(z=>{console.warn("Failed to set waypoint:",z),L("Failed to set waypoint","error")})},className:"text-xs text-theme-icon hover:brightness-125 flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-route"}),"Set Waypoint"]})]},k.id))})})}),e.jsx(I,{title:"Active Units",subtitle:`${D.length} on duty`,className:"flex-[2] flex flex-col min-h-0",children:e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx("div",{className:"space-y-2 overflow-y-auto pr-2 h-full",children:D.map(k=>e.jsx("div",{className:"flex items-center justify-between p-2 bg-gray-800/30 rounded-lg border border-gray-700",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-white text-sm truncate",children:k.id}),e.jsx(O,{variant:U(k.status),className:"text-xs flex-shrink-0",children:k.status.toUpperCase()})]}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:k.officer}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:k.location})]})},k.id))})})})]}),e.jsx("div",{className:"lg:col-span-3 flex flex-col min-h-0",children:e.jsxs("div",{className:"bg-[rgba(15,23,42,0.82)] border rounded-2xl shadow-xl backdrop-blur-xl flex-1 flex flex-col min-h-0 p-4",style:{borderColor:"rgba(var(--theme-border-rgb), 0.2)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 flex-shrink-0",children:[e.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-map text-theme-icon"}),"Dispatch Map"]}),e.jsx(f,{variant:"danger",size:"sm",onClick:S,icon:e.jsx("i",{className:"fa-solid fa-broom"}),children:"Clear Map"})]}),e.jsx(Z,{fullScreen:!1,scopeName:"LeafletMap",children:e.jsxs("div",{ref:r,className:"flex-1 rounded-lg border-2 border-gray-700 overflow-hidden relative min-h-0",style:{background:"#0a0f1a"},children:[!v&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900/50 z-[1000]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-4xl spinner-theme mb-3"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Loading map..."})]})}),e.jsx("div",{className:"absolute top-3 right-3 z-[500] max-w-[300px]",children:e.jsxs("div",{className:"bg-gray-900/95 border-2 border-gray-700 rounded-lg shadow-xl backdrop-blur-sm",children:[e.jsxs("button",{onClick:()=>A(!h),className:"w-full flex items-center justify-between p-3 hover:bg-gray-800/50 transition-colors rounded-t-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-list text-theme-icon"}),e.jsx("span",{className:"text-sm font-semibold text-white",children:"Call Types Legend"})]}),e.jsx("i",{className:`fa-solid fa-chevron-${h?"up":"down"} text-gray-400 text-xs transition-transform`})]}),h&&e.jsxs("div",{className:"p-3 pt-0 border-t border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-gray-800/40 rounded",children:[e.jsx("i",{className:"fa fa-sack-dollar",style:{color:"#dc2626"}}),e.jsx("span",{className:"text-xs text-gray-300",children:"Robbery"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-gray-800/40 rounded",children:[e.jsx("i",{className:"fa fa-car-burst",style:{color:"#ea580c"}}),e.jsx("span",{className:"text-xs text-gray-300",children:"Pursuit"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-gray-800/40 rounded",children:[e.jsx("i",{className:"fa fa-gun",style:{color:"#b91c1c"}}),e.jsx("span",{className:"text-xs text-gray-300",children:"Shooting"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-gray-800/40 rounded",children:[e.jsx("i",{className:"fa fa-car-side",style:{color:"#f59e0b"}}),e.jsx("span",{className:"text-xs text-gray-300",children:"Traffic"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-gray-800/40 rounded",children:[e.jsx("i",{className:"fa fa-truck-medical",style:{color:"#ec4899"}}),e.jsx("span",{className:"text-xs text-gray-300",children:"Medical"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-gray-800/40 rounded",children:[e.jsx("i",{className:"fa fa-user-secret",style:{color:"#6366f1"}}),e.jsx("span",{className:"text-xs text-gray-300",children:"Suspicious"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-gray-800/40 rounded",children:[e.jsx("i",{className:"fa fa-hand-fist",style:{color:"#dc2626"}}),e.jsx("span",{className:"text-xs text-gray-300",children:"Assault"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-gray-800/40 rounded",children:[e.jsx("i",{className:"fa fa-fire-flame-curved",style:{color:"#f97316"}}),e.jsx("span",{className:"text-xs text-gray-300",children:"Fire"})]})]}),e.jsxs("div",{className:"pt-3 border-t border-gray-700",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2 font-semibold",children:"Priority Levels:"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 animate-pulse"}),e.jsx("span",{className:"text-xs text-gray-300",children:"High Priority - Pulsing Red"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500 animate-pulse"}),e.jsx("span",{className:"text-xs text-gray-300",children:"Medium - Pulsing Yellow"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-400"}),e.jsx("span",{className:"text-xs text-gray-300",children:"Low Priority - Static Blue"})]})]})]})]})]})})]})})]})})]}),e.jsx("style",{children:`
        .custom-marker {
          background: transparent;
          border: none;
        }

        .dispatch-marker {
          width: 48px;
          height: 48px;
          display: flex;
          align-items: center;
          justify-content: center;
          background: rgba(15, 23, 42, 0.9);
          border-radius: 50%;
          border: 2px solid rgba(56, 189, 248, 0.4);
          box-shadow: 0 0 12px rgba(0, 0, 0, 0.6);
          transition: all 0.2s ease;
        }

        .dispatch-marker:hover {
          transform: scale(1.15);
          box-shadow: 0 0 20px rgba(59, 130, 246, 0.6);
        }

        .dispatch-marker.high {
          animation: pulse-red 2s infinite;
          border-color: rgba(239, 68, 68, 0.8);
          box-shadow: 0 0 16px rgba(239, 68, 68, 0.5);
        }

        .dispatch-marker.medium {
          animation: pulse-yellow 2s infinite;
          border-color: rgba(251, 191, 36, 0.8);
          box-shadow: 0 0 14px rgba(251, 191, 36, 0.5);
        }

        .dispatch-marker.low {
          border-color: rgba(156, 163, 175, 0.4);
        }

        .dispatch-marker i {
          filter: drop-shadow(0 0 4px rgba(0, 0, 0, 0.9));
        }

        @keyframes pulse-red {
          0%, 100% {
            opacity: 1;
            transform: scale(1);
          }
          50% {
            opacity: 0.7;
            transform: scale(1.1);
          }
        }

        @keyframes pulse-yellow {
          0%, 100% {
            opacity: 1;
            transform: scale(1);
          }
          50% {
            opacity: 0.8;
            transform: scale(1.05);
          }
        }

        .custom-tooltip {
          background: rgba(15, 23, 42, 0.95) !important;
          border: 1px solid rgba(56, 189, 248, 0.3) !important;
          border-radius: 8px !important;
          padding: 8px 12px !important;
          color: white !important;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4) !important;
        }

        .custom-tooltip::before {
          border-top-color: rgba(15, 23, 42, 0.95) !important;
        }

        .leaflet-container {
          background: #0a0f1a !important;
          font-family: inherit;
        }

        .leaflet-control-zoom {
          border: 2px solid rgba(56, 189, 248, 0.3) !important;
          border-radius: 8px !important;
          overflow: hidden;
        }

        .leaflet-control-zoom a {
          background: rgba(15, 23, 42, 0.9) !important;
          color: #38bdf8 !important;
          border: none !important;
          width: 32px !important;
          height: 32px !important;
          line-height: 32px !important;
        }

        .leaflet-control-zoom a:hover {
          background: rgba(56, 189, 248, 0.2) !important;
          color: white !important;
        }
      `}),g&&e.jsx("div",{className:`fixed bottom-6 right-6 px-4 py-3 rounded-lg shadow-lg border transition-all z-50 ${x==="success"?"bg-green-500/90 border-green-400 text-white":"bg-red-500/90 border-red-400 text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:`fa-solid ${x==="success"?"fa-check-circle":"fa-exclamation-circle"}`}),e.jsx("span",{className:"font-medium",children:g})]})})]})}function jt(){const s=ie(B=>B.officer),a=ie(B=>B.setOfficer),r=ie(B=>B.canAccessChief),{data:c,loading:t,error:n,refetch:m}=le("getSettings",null),[j,b]=l.useState(!1),[v,p]=l.useState(!1),[g,i]=l.useState(!1),[x,y]=l.useState(30),[h,A]=l.useState(!0),[T,o]=l.useState(!1),[u,R]=l.useState("dark"),[F,D]=l.useState(Y()),[L,U]=l.useState(!1),[W,P]=l.useState(!1),[J,K]=l.useState((s==null?void 0:s.phone)||""),[S,G]=l.useState((s==null?void 0:s.image)||""),[d,k]=l.useState((s==null?void 0:s.bio)||""),[M,z]=l.useState((s==null?void 0:s.preferredName)||""),[$,Q]=l.useState((s==null?void 0:s.email)||""),[N,V]=l.useState((s==null?void 0:s.callsign)||""),[_,se]=l.useState(!1);l.useEffect(()=>{c&&(b(c.notifications),p(c.soundEnabled),i(c.autoRefresh),y(c.refreshInterval||30),A(c.showMugshots),o(c.compactMode),R(c.theme))},[c]),l.useEffect(()=>{s&&(K(s.phone||""),G(s.image||""),k(s.bio||""),z(s.preferredName||""),Q(s.email||""),V(s.callsign||""))},[s]);const X=async B=>{U(!0);try{const ue=await H("updateSettings",B);ue.success?m():alert(`Failed to update settings: ${ue.error}`)}catch(ue){console.error("Failed to update settings:",ue),alert("Failed to update settings")}finally{U(!1)}},ae=()=>{const B=!j;b(B),X({notifications:B})},xe=()=>{const B=!v;p(B),X({soundEnabled:B})},ne=()=>{const B=!g;i(B),X({autoRefresh:B})},w=()=>{const B=!h;A(B),X({showMugshots:B})},te=()=>{const B=!T;o(B),X({compactMode:B})},C=B=>{y(B),X({refreshInterval:B})},q=B=>{R(B),X({theme:B})},ce=()=>{const B=!F;D(B),ye(B),Y()||H("notifyDebugMode",{enabled:B}).catch(()=>{})},pe=async()=>{if(s){se(!0);try{const B={phone:J,image:S,bio:d,preferredName:M,email:$,callsign:N};(await H("updateOfficerProfile",B)).success&&(a({...s,...B}),P(!1))}catch(B){console.error("Failed to update profile:",B)}finally{se(!1)}}},Ze=()=>{s&&(K(s.phone||""),G(s.image||""),k(s.bio||""),z(s.preferredName||""),Q(s.email||""),V(s.callsign||"")),P(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(I,{title:"Officer Profile",subtitle:"Manage your personal information and profile details",headerAction:W?null:e.jsxs(f,{size:"sm",variant:"primary",onClick:()=>P(!0),disabled:!s,children:[e.jsx("i",{className:"fa-solid fa-pen"}),"Edit Profile"]}),children:s?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-6 p-4 bg-[rgba(11,19,34,0.4)] rounded-lg",children:[e.jsx("div",{className:"relative",children:W?e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-4 border-[rgba(56,189,248,0.3)] bg-gradient-to-br from-[rgba(56,189,248,0.15)] to-[rgba(30,58,138,0.15)]",children:S?e.jsx("img",{src:S,alt:"Profile",className:"w-full h-full object-cover bg-[rgba(15,23,42,0.8)]",onError:B=>{const ue=B.target;ue.style.display="none";const be=ue.parentElement;if(be&&!be.querySelector(".fallback-icon")){const je=document.createElement("div");je.className="fallback-icon w-full h-full flex items-center justify-center bg-gradient-to-br from-[rgba(56,189,248,0.15)] to-[rgba(30,58,138,0.15)]",je.innerHTML='<i class="fa-solid fa-user-shield text-5xl text-white opacity-35"></i>',be.appendChild(je)}}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-user-shield text-5xl text-white opacity-35"})})}):e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-4 border-[rgba(56,189,248,0.3)] bg-gradient-to-br from-[rgba(56,189,248,0.15)] to-[rgba(30,58,138,0.15)]",children:s.image?e.jsx("img",{src:s.image,alt:"Profile",className:"w-full h-full object-cover bg-[rgba(15,23,42,0.8)]",onError:B=>{const ue=B.target;ue.style.display="none";const be=ue.parentElement;if(be&&!be.querySelector(".fallback-icon")){const je=document.createElement("div");je.className="fallback-icon w-full h-full flex items-center justify-center bg-gradient-to-br from-[rgba(56,189,248,0.15)] to-[rgba(30,58,138,0.15)]",je.innerHTML='<i class="fa-solid fa-user-shield text-5xl text-white opacity-35"></i>',be.appendChild(je)}}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-user-shield text-5xl text-white opacity-35"})})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h3",{className:"text-2xl font-bold text-white",children:[s.firstname," ",s.lastname]}),e.jsx(O,{variant:"info",children:W?N:s.callsign})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[rgba(255,255,255,0.7)]",children:[e.jsx("i",{className:"fa-solid fa-shield text-theme-icon"}),e.jsx("span",{children:s.rank})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[rgba(255,255,255,0.7)]",children:[e.jsx("i",{className:"fa-solid fa-building text-theme-icon"}),e.jsx("span",{children:s.department})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[rgba(255,255,255,0.7)]",children:[e.jsx("i",{className:"fa-solid fa-id-badge text-theme-icon"}),e.jsxs("span",{children:["Badge #",s.badgeNumber]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[rgba(255,255,255,0.7)]",children:[e.jsx("i",{className:"fa-solid fa-fingerprint text-theme-icon"}),e.jsx("span",{children:s.citizenid})]})]})]})]}),W?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(E,{label:"Callsign",placeholder:"e.g., 1-A-12",value:N,onChange:B=>V(B.target.value),icon:e.jsx("i",{className:"fa-solid fa-radio"})}),e.jsx(E,{label:"Preferred Name",placeholder:"How you'd like to be called",value:M,onChange:B=>z(B.target.value),icon:e.jsx("i",{className:"fa-solid fa-user"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(E,{label:"Phone Number",placeholder:"555-0123",value:J,onChange:B=>K(B.target.value),icon:e.jsx("i",{className:"fa-solid fa-phone"})}),e.jsx(E,{label:"Email Address",placeholder:"officer@department.gov",value:$,onChange:B=>Q(B.target.value),icon:e.jsx("i",{className:"fa-solid fa-envelope"}),type:"email"})]}),e.jsxs("div",{children:[e.jsx(E,{label:"Profile Image URL",placeholder:"Leave blank to use default officer silhouette",value:S,onChange:B=>G(B.target.value),icon:e.jsx("i",{className:"fa-solid fa-id-card"})}),e.jsxs("div",{className:"text-xs text-[rgba(255,255,255,0.5)] mt-1 ml-1 space-y-1",children:[e.jsxs("p",{children:[e.jsx("i",{className:"fa-solid fa-shield-halved mr-1 text-theme-icon"}),e.jsx("strong",{className:"text-[rgba(255,255,255,0.7)]",children:"Recommended:"})," Use your official ID card photo URL"]}),e.jsxs("p",{children:[e.jsx("i",{className:"fa-solid fa-circle-info mr-1"}),"Leave blank to display a professional officer silhouette icon"]})]})]}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx("label",{className:"text-sm font-semibold text-[rgba(255,255,255,0.9)]",children:"Bio / Notes"}),e.jsx("textarea",{className:"w-full bg-[rgba(11,19,34,0.6)] border border-[rgba(36,72,176,0.3)] rounded-lg px-4 py-2 text-white placeholder:text-[rgba(255,255,255,0.4)] focus:outline-none focus:border-[rgba(56,189,248,0.6)] focus:ring-2 focus:ring-[rgba(56,189,248,0.2)] transition-all resize-none",placeholder:"Enter a brief bio or notes about yourself...",value:d,onChange:B=>k(B.target.value),rows:4,maxLength:500}),e.jsxs("span",{className:"text-xs text-[rgba(255,255,255,0.5)]",children:[d.length,"/500 characters"]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-[rgba(36,72,176,0.2)]",children:[e.jsx(f,{variant:"success",onClick:pe,disabled:_,className:"flex-1",children:_?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-check"}),"Save Changes"]})}),e.jsxs(f,{variant:"secondary",onClick:Ze,disabled:_,className:"flex-1",children:[e.jsx("i",{className:"fa-solid fa-times"}),"Cancel"]})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-4 bg-[rgba(11,19,34,0.4)] rounded-lg",children:[e.jsxs("h4",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-address-book text-theme-icon"}),"Contact Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.preferredName&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.5)] mb-1",children:"Preferred Name"}),e.jsx("p",{className:"text-sm text-white",children:s.preferredName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.5)] mb-1",children:"Phone"}),e.jsx("p",{className:"text-sm text-white",children:s.phone||"Not set"})]}),s.email&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.5)] mb-1",children:"Email"}),e.jsx("p",{className:"text-sm text-white",children:s.email})]})]})]}),s.bio&&e.jsxs("div",{className:"p-4 bg-[rgba(11,19,34,0.4)] rounded-lg",children:[e.jsxs("h4",{className:"text-sm font-semibold text-white mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-file-lines text-theme-icon"}),"Bio"]}),e.jsx("p",{className:"text-sm text-[rgba(255,255,255,0.8)] leading-relaxed",children:s.bio})]}),!s.bio&&!s.preferredName&&!s.email&&e.jsxs("div",{className:"p-6 text-center text-[rgba(255,255,255,0.5)]",children:[e.jsx("i",{className:"fa-solid fa-circle-info text-2xl mb-2"}),e.jsx("p",{className:"text-sm",children:"No additional profile information set."}),e.jsx("p",{className:"text-xs mt-1",children:'Click "Edit Profile" to add more details.'})]})]})]}):e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-2xl spinner-theme mr-2"}),e.jsx("p",{className:"text-white",children:"Loading officer data..."})]})}),e.jsx(I,{title:"Preferences",children:t?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-2xl spinner-theme mr-2"}),e.jsx("p",{className:"text-white",children:"Loading settings..."})]}):n?e.jsxs("div",{className:"text-center py-8 text-red-400",children:[e.jsx("i",{className:"fa-solid fa-exclamation-triangle text-2xl mb-2"}),e.jsx("p",{children:"Failed to load settings"}),e.jsx(f,{size:"sm",variant:"primary",onClick:()=>m(),className:"mt-3",children:"Retry"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-[rgba(11,19,34,0.4)] rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fa-solid fa-bell text-xl text-theme-icon"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:"Notifications"}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)]",children:"Receive alerts for new incidents and BOLOs"})]})]}),e.jsx("button",{onClick:ae,disabled:L,className:`relative w-14 h-7 rounded-full transition-colors ${j?"bg-green-500":"bg-gray-600"} ${L?"opacity-50 cursor-not-allowed":""}`,children:e.jsx("div",{className:`absolute top-1 w-5 h-5 bg-white rounded-full transition-transform ${j?"translate-x-8":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-[rgba(11,19,34,0.4)] rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fa-solid fa-volume-high text-xl text-theme-icon"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:"Sound Effects"}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)]",children:"Play sounds for alerts and notifications"})]})]}),e.jsx("button",{onClick:xe,disabled:L,className:`relative w-14 h-7 rounded-full transition-colors ${v?"bg-green-500":"bg-gray-600"} ${L?"opacity-50 cursor-not-allowed":""}`,children:e.jsx("div",{className:`absolute top-1 w-5 h-5 bg-white rounded-full transition-transform ${v?"translate-x-8":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-[rgba(11,19,34,0.4)] rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fa-solid fa-arrows-rotate text-xl text-theme-icon"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:"Auto Refresh"}),e.jsxs("p",{className:"text-xs text-[rgba(255,255,255,0.6)]",children:["Automatically update data every ",x," seconds"]})]})]}),e.jsx("button",{onClick:ne,disabled:L,className:`relative w-14 h-7 rounded-full transition-colors ${g?"bg-green-500":"bg-gray-600"} ${L?"opacity-50 cursor-not-allowed":""}`,children:e.jsx("div",{className:`absolute top-1 w-5 h-5 bg-white rounded-full transition-transform ${g?"translate-x-8":"translate-x-1"}`})})]}),g&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-[rgba(11,19,34,0.4)] rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fa-solid fa-clock text-xl text-theme-icon"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:"Refresh Interval"}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)]",children:"How often to refresh data"})]})]}),e.jsxs("select",{value:x,onChange:B=>C(Number(B.target.value)),disabled:L,className:"px-4 py-2 rounded-lg bg-[rgba(11,19,34,0.6)] border-2 border-[rgba(36,72,176,0.2)] text-white focus:outline-none focus:border-[#38BDF8] transition-colors",children:[e.jsx("option",{value:10,children:"10 seconds"}),e.jsx("option",{value:30,children:"30 seconds"}),e.jsx("option",{value:60,children:"1 minute"}),e.jsx("option",{value:120,children:"2 minutes"}),e.jsx("option",{value:300,children:"5 minutes"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-[rgba(11,19,34,0.4)] rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fa-solid fa-image text-xl text-theme-icon"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:"Show Mugshots"}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)]",children:"Display profile photos in search results"})]})]}),e.jsx("button",{onClick:w,disabled:L,className:`relative w-14 h-7 rounded-full transition-colors ${h?"bg-green-500":"bg-gray-600"} ${L?"opacity-50 cursor-not-allowed":""}`,children:e.jsx("div",{className:`absolute top-1 w-5 h-5 bg-white rounded-full transition-transform ${h?"translate-x-8":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-[rgba(11,19,34,0.4)] rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fa-solid fa-compress text-xl text-theme-icon"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:"Compact Mode"}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)]",children:"Reduce spacing for more content on screen"})]})]}),e.jsx("button",{onClick:te,disabled:L,className:`relative w-14 h-7 rounded-full transition-colors ${T?"bg-green-500":"bg-gray-600"} ${L?"opacity-50 cursor-not-allowed":""}`,children:e.jsx("div",{className:`absolute top-1 w-5 h-5 bg-white rounded-full transition-transform ${T?"translate-x-8":"translate-x-1"}`})})]})]})}),r&&e.jsx(I,{title:"Developer Settings",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-[rgba(11,19,34,0.4)] rounded-lg border-2 border-[rgba(255,193,7,0.3)]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fa-solid fa-bug text-xl text-yellow-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:"Debug Mode"}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)]",children:"Enable all pages with mock data for development and testing"})]})]}),e.jsx("button",{onClick:ce,className:`relative w-14 h-7 rounded-full transition-colors ${F?"bg-yellow-500":"bg-gray-600"}`,children:e.jsx("div",{className:`absolute top-1 w-5 h-5 bg-white rounded-full transition-transform ${F?"translate-x-8":"translate-x-1"}`})})]}),F&&e.jsx("div",{className:"p-4 bg-[rgba(255,193,7,0.1)] border border-[rgba(255,193,7,0.3)] rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2 text-yellow-400",children:[e.jsx("i",{className:"fa-solid fa-info-circle text-lg mt-0.5"}),e.jsxs("div",{className:"text-xs",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Debug Mode Active"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-[rgba(255,255,255,0.7)]",children:[e.jsx("li",{children:"All navigation pages are enabled (including Chief Menu)"}),e.jsx("li",{children:"Mock data is used instead of real server data"}),e.jsx("li",{children:"NUI calls are intercepted and return sample data"}),e.jsx("li",{children:"Perfect for testing UI without a FiveM server"})]})]})]})})]})}),e.jsx(I,{title:"Appearance",children:e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:()=>q("dark"),disabled:L,className:`p-4 rounded-xl text-left transition-all ${u==="dark"?"bg-gradient-to-br from-[rgba(56,189,248,0.2)] to-[rgba(30,58,138,0.15)] border-2 border-[rgba(56,189,248,0.5)]":"bg-[rgba(11,19,34,0.4)] border border-[rgba(36,72,176,0.2)] hover:border-[rgba(56,189,248,0.3)]"} ${L?"opacity-50 cursor-not-allowed":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("i",{className:"fa-solid fa-moon text-xl text-theme-icon"}),u==="dark"&&e.jsx("i",{className:"fa-solid fa-check text-green-400"})]}),e.jsx("p",{className:"font-semibold text-white",children:"Dark Theme"}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)]",children:u==="dark"?"Current theme":"Classic dark"})]}),e.jsxs("button",{onClick:()=>q("blue"),disabled:L,className:`p-4 rounded-xl text-left transition-all ${u==="blue"?"bg-gradient-to-br from-[rgba(56,189,248,0.2)] to-[rgba(30,58,138,0.15)] border-2 border-[rgba(56,189,248,0.5)]":"bg-[rgba(11,19,34,0.4)] border border-[rgba(36,72,176,0.2)] hover:border-[rgba(56,189,248,0.3)]"} ${L?"opacity-50 cursor-not-allowed":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("i",{className:"fa-solid fa-droplet text-xl text-blue-500"}),u==="blue"&&e.jsx("i",{className:"fa-solid fa-check text-green-400"})]}),e.jsx("p",{className:"font-semibold text-white",children:"Blue Theme"}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)]",children:u==="blue"?"Current theme":"Ocean blue"})]}),e.jsxs("button",{disabled:!0,className:"p-4 bg-[rgba(11,19,34,0.4)] border border-[rgba(36,72,176,0.2)] rounded-xl text-left opacity-50 cursor-not-allowed",children:[e.jsx("i",{className:"fa-solid fa-sun text-xl text-yellow-400 mb-2"}),e.jsx("p",{className:"font-semibold text-white",children:"Light Theme"}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.6)]",children:"Coming soon"})]})]})}),L&&e.jsxs("div",{className:"fixed bottom-4 right-4 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2",style:{backgroundColor:"var(--theme-primary)"},children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),e.jsx("span",{children:"Saving settings..."})]})]})}function vt(){const[s,a]=l.useState(""),[r,c]=l.useState("all"),[t,n]=l.useState(""),[m,j]=l.useState(""),[b,v]=l.useState(null),{data:p=[],loading:g,error:i,refetch:x}=le("getEvidenceByCaseNumber",[],!1);ee("evidenceCreated",()=>{m&&x({caseNumber:m})}),ee("evidenceUpdated",()=>{m&&x({caseNumber:m})});const y=()=>{t.trim()&&(j(t.trim()),x({caseNumber:t.trim()}))},h=l.useMemo(()=>p?p.filter(o=>{const u=o.evidenceId.toLowerCase().includes(s.toLowerCase())||o.type.toLowerCase().includes(s.toLowerCase())||o.description.toLowerCase().includes(s.toLowerCase())||o.location.toLowerCase().includes(s.toLowerCase()),R=r==="all"||o.status===r;return u&&R}):[],[p,s,r]),A=o=>{switch(o){case"pending":return"warning";case"processed":return"info";case"archived":return"secondary";case"destroyed":return"danger";default:return"secondary"}},T=o=>new Date(o).toLocaleString();return e.jsxs("div",{className:"space-y-6",children:[e.jsx(I,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(E,{placeholder:"Enter case number to load evidence...",value:t,onChange:o=>n(o.target.value),onKeyPress:o=>o.key==="Enter"&&y(),icon:e.jsx("i",{className:"fa-solid fa-folder-open"}),className:"flex-1"}),e.jsxs(f,{variant:"primary",onClick:y,children:[e.jsx("i",{className:"fa-solid fa-magnifying-glass mr-2"}),"Load Case"]})]}),m&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx(E,{placeholder:"Search evidence...",value:s,onChange:o=>a(o.target.value),icon:e.jsx("i",{className:"fa-solid fa-search"}),className:"flex-1"}),e.jsxs("select",{value:r,onChange:o=>c(o.target.value),className:"px-4 py-2 bg-[rgba(15,23,42,0.6)] border border-[rgba(36,72,176,0.2)] rounded-lg text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processed",children:"Processed"}),e.jsx("option",{value:"archived",children:"Archived"}),e.jsx("option",{value:"destroyed",children:"Destroyed"})]})]})]})}),m&&e.jsx(I,{title:`Evidence - Case ${m}`,subtitle:`${h.length} items`,children:g?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-3xl spinner-theme mr-3"}),e.jsx("span",{className:"text-[rgba(255,255,255,0.7)]",children:"Loading evidence..."})]}):i?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fa-solid fa-exclamation-triangle text-3xl text-red-400 mb-3"}),e.jsx("p",{className:"text-red-400 mb-4",children:"Failed to load evidence"}),e.jsx(f,{size:"sm",variant:"primary",onClick:()=>x(),children:"Retry"})]}):h.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fa-solid fa-box-open text-3xl text-[rgba(255,255,255,0.3)] mb-3"}),e.jsx("p",{className:"text-[rgba(255,255,255,0.5)]",children:"No evidence found for this case"})]}):e.jsx("div",{className:"space-y-3",children:h.map(o=>{var u;return e.jsxs("div",{className:"p-4 bg-[rgba(11,19,34,0.4)] rounded-xl border border-[rgba(36,72,176,0.15)] hover:border-[rgba(56,189,248,0.3)] transition-all cursor-pointer",onClick:()=>v(o),children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-mono text-sm font-bold text-[#38BDF8]",children:o.evidenceId}),e.jsx(O,{variant:A(o.status),children:o.status.toUpperCase()}),e.jsx(O,{variant:"default",children:o.type})]}),e.jsx("h3",{className:"text-lg font-bold text-white",children:o.description})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Officer"}),e.jsx("p",{className:"text-sm text-white font-medium",children:o.officerName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Location"}),e.jsx("p",{className:"text-sm text-white font-medium",children:o.location})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Date Collected"}),e.jsx("p",{className:"text-sm text-white font-medium",children:T(o.date)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Chain Entries"}),e.jsx("p",{className:"text-sm text-white font-medium",children:o.chainOfCustody.length})]})]}),((u=o.metadata)==null?void 0:u.serialNumber)&&e.jsxs("div",{className:"mt-3 p-2 rounded-lg border",style:{backgroundColor:"rgba(var(--theme-accent-rgb), 0.1)",borderColor:"rgba(var(--theme-border-rgb), 0.2)"},children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.6)]",children:"Serial Number:"}),e.jsx("span",{className:"ml-2 text-sm font-mono text-theme-icon",children:o.metadata.serialNumber})]})]},o.id)})})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-[rgba(15,23,42,0.98)] border border-[rgba(56,189,248,0.3)] rounded-xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs(Z,{fullScreen:!1,scopeName:"EvidenceModal",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-mono text-lg font-bold text-[#38BDF8]",children:b.evidenceId}),e.jsx(O,{variant:A(b.status),children:b.status.toUpperCase()})]}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:b.description}),e.jsxs("p",{className:"text-[rgba(255,255,255,0.6)] text-sm",children:["Type: ",b.type]})]}),e.jsx("button",{onClick:()=>v(null),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx("i",{className:"fa-solid fa-times text-2xl"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Collected By"}),e.jsx("p",{className:"text-white font-medium",children:b.officerName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Location"}),e.jsx("p",{className:"text-white font-medium",children:b.location})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Date Collected"}),e.jsx("p",{className:"text-white font-medium",children:T(b.date)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-[rgba(255,255,255,0.5)] uppercase",children:"Case Number"}),e.jsx("p",{className:"text-white font-medium font-mono",children:b.caseNumber||"N/A"})]})]}),b.metadata&&Object.keys(b.metadata).length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Additional Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[b.metadata.serialNumber&&e.jsxs("div",{className:"p-3 rounded-lg border",style:{backgroundColor:"rgba(var(--theme-accent-rgb), 0.1)",borderColor:"rgba(var(--theme-border-rgb), 0.2)"},children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.6)]",children:"Serial Number"}),e.jsx("p",{className:"text-sm font-mono text-theme-icon",children:b.metadata.serialNumber})]}),b.metadata.weight&&e.jsxs("div",{className:"p-3 rounded-lg border",style:{backgroundColor:"rgba(var(--theme-accent-rgb), 0.1)",borderColor:"rgba(var(--theme-border-rgb), 0.2)"},children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.6)]",children:"Weight"}),e.jsx("p",{className:"text-sm text-white",children:b.metadata.weight})]}),b.metadata.quantity&&e.jsxs("div",{className:"p-3 rounded-lg border",style:{backgroundColor:"rgba(var(--theme-accent-rgb), 0.1)",borderColor:"rgba(var(--theme-border-rgb), 0.2)"},children:[e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.6)]",children:"Quantity"}),e.jsx("p",{className:"text-sm text-white",children:b.metadata.quantity})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3",children:[e.jsx("i",{className:"fa-solid fa-link text-theme-icon mr-2"}),"Chain of Custody"]}),e.jsx("div",{className:"space-y-3",children:b.chainOfCustody.map((o,u)=>e.jsx("div",{className:"p-4 bg-[rgba(11,19,34,0.6)] rounded-lg border border-[rgba(36,72,176,0.2)]",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full step-theme flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold",children:u+1})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-bold text-white",children:o.officerName}),e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)]",children:"•"}),e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.5)]",children:T(o.date)})]}),e.jsx("p",{className:"text-sm text-[rgba(255,255,255,0.8)]",children:o.action}),o.notes&&e.jsxs("p",{className:"text-xs text-[rgba(255,255,255,0.6)] mt-1 italic",children:["Note: ",o.notes]})]})]})},o.id))})]}),e.jsxs("div",{className:"flex gap-3 mt-6 pt-6 border-t border-[rgba(36,72,176,0.2)]",children:[e.jsx(f,{variant:"ghost",onClick:()=>v(null),children:"Close"}),e.jsxs(f,{variant:"primary",children:[e.jsx("i",{className:"fa-solid fa-exchange-alt mr-2"}),"Transfer Evidence"]}),e.jsxs(f,{variant:"secondary",children:[e.jsx("i",{className:"fa-solid fa-edit mr-2"}),"Update Status"]})]})]})})}),!m&&e.jsx(I,{title:"Evidence Locker",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fa-solid fa-box-archive text-6xl text-[rgba(56,189,248,0.3)] mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Enter Case Number"}),e.jsx("p",{className:"text-[rgba(255,255,255,0.6)]",children:"Enter a case number above to view associated evidence items and chain of custody records"})]})})]})}const Nt=()=>{if(!ie(n=>n.canAccessChief))return e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fa-solid fa-lock text-4xl text-red-400 mb-3"}),e.jsx("div",{className:"text-white font-semibold",children:"Access Denied"}),e.jsx("div",{className:"text-gray-400 text-sm",children:"You do not have permission to access the Chief Menu."})]})});const[a,r]=l.useState("roster"),c=[{id:"roster",label:"Roster",icon:"users",color:"blue"},{id:"hiring",label:"Hiring",icon:"user-plus",color:"green"},{id:"discipline",label:"Discipline",icon:"gavel",color:"red"},{id:"actions",label:"Actions",icon:"bolt",color:"yellow"},{id:"clockaudit",label:"Clock-in Audit",icon:"clock",color:"teal"},{id:"penalcode",label:"Penal Code",icon:"scale-balanced",color:"purple"},{id:"sop",label:"SOPs",icon:"book",color:"indigo"},{id:"qotd",label:"QOTD",icon:"quote-left",color:"pink"},{id:"settings",label:"Settings",icon:"gear",color:"gray"},{id:"about",label:"About",icon:"circle-info",color:"cyan"}],t=(n,m)=>{if(m)switch(n){case"blue":return"badge-theme";case"green":return"bg-green-500/20 border-green-500 text-green-400";case"red":return"bg-red-500/20 border-red-500 text-red-400";case"yellow":return"bg-yellow-500/20 border-yellow-500 text-yellow-400";case"teal":return"bg-teal-500/20 border-teal-500 text-teal-400";case"purple":return"bg-purple-500/20 border-purple-500 text-purple-400";case"indigo":return"bg-indigo-500/20 border-indigo-500 text-indigo-400";case"pink":return"bg-pink-500/20 border-pink-500 text-pink-400";case"gray":return"bg-gray-500/20 border-gray-500 text-gray-300";case"cyan":return"bg-cyan-500/20 border-cyan-500 text-cyan-400";default:return"badge-theme"}return"bg-gray-800/30 border-gray-700/50 text-gray-400 hover:bg-gray-700/40 hover:border-gray-600 hover:text-gray-300"};return e.jsxs("div",{className:"flex flex-col gap-3 h-full p-3 overflow-hidden",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg",children:e.jsx("i",{className:"fa-solid fa-crown text-lg text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"Chief of Police"}),e.jsx("p",{className:"text-gray-400 text-xs",children:"Department Command Center"})]})]})}),e.jsx("div",{className:"flex gap-1.5 overflow-x-auto",children:c.map(n=>e.jsxs("button",{onClick:()=>r(n.id),className:`
                px-2.5 py-1.5 rounded-lg border-2 font-semibold text-xs whitespace-nowrap
                transition-all duration-200 flex items-center gap-1.5 flex-shrink-0
                ${t(n.color,a===n.id)}
              `,children:[e.jsx("i",{className:`fa-solid fa-${n.icon}`}),n.label]},n.id))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 pr-2",children:[a==="roster"&&e.jsx(yt,{}),a==="hiring"&&e.jsx(wt,{}),a==="discipline"&&e.jsx(Ct,{}),a==="actions"&&e.jsx(kt,{}),a==="clockaudit"&&e.jsx(St,{}),a==="penalcode"&&e.jsx(Dt,{}),a==="sop"&&e.jsx(At,{}),a==="qotd"&&e.jsx(Pt,{}),a==="settings"&&e.jsx(Mt,{}),a==="about"&&e.jsx(Lt,{})]})]})};function yt(){const[s,a]=l.useState(""),{data:r=[],loading:c,error:t,refetch:n}=le("getOfficerRoster",[]),m=r||[];ee("officerUpdated",()=>{n()});const j=m.filter(v=>{var p,g,i;return((p=v.name)==null?void 0:p.toLowerCase().includes(s.toLowerCase()))||((g=v.callsign)==null?void 0:g.toLowerCase().includes(s.toLowerCase()))||((i=v.rank)==null?void 0:i.toLowerCase().includes(s.toLowerCase()))}),b=v=>{switch(v){case"active":return"success";case"on-leave":return"warning";case"suspended":return"danger";default:return"secondary"}};return e.jsx(Z,{fullScreen:!1,scopeName:"RosterTab",children:e.jsxs(I,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:[e.jsx("i",{className:"fa-solid fa-users mr-2"}),"Department Roster (",m.length,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{variant:"secondary",size:"sm",disabled:c,onClick:()=>n(),children:e.jsx("i",{className:`fa-solid fa-rotate ${c?"fa-spin":""}`})}),e.jsx(f,{variant:"primary",size:"sm",icon:e.jsx("i",{className:"fa-solid fa-download"}),children:"Export"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx(E,{placeholder:"Search officers by name, callsign, or rank...",value:s,onChange:v=>a(v.target.value),icon:e.jsx("i",{className:"fa-solid fa-search"})})}),c?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-3xl spinner-theme mr-3"}),e.jsx("span",{className:"text-[rgba(255,255,255,0.7)]",children:"Loading roster..."})]}):t?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fa-solid fa-exclamation-triangle text-3xl text-red-400 mb-3"}),e.jsx("p",{className:"text-red-400 mb-4",children:"Failed to load roster"}),e.jsx(f,{size:"sm",variant:"primary",onClick:()=>n(),children:"Retry"})]}):j.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fa-solid fa-users-slash text-3xl text-[rgba(255,255,255,0.3)] mb-3"}),e.jsx("p",{className:"text-[rgba(255,255,255,0.5)]",children:"No officers found"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"sticky top-0 bg-[rgba(15,23,42,0.95)] backdrop-blur-sm z-10",children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-2 font-semibold text-gray-400",children:"Callsign"}),e.jsx("th",{className:"text-left py-3 px-2 font-semibold text-gray-400",children:"Name"}),e.jsx("th",{className:"text-left py-3 px-2 font-semibold text-gray-400",children:"Rank"}),e.jsx("th",{className:"text-left py-3 px-2 font-semibold text-gray-400",children:"Department"}),e.jsx("th",{className:"text-left py-3 px-2 font-semibold text-gray-400",children:"Status"}),e.jsx("th",{className:"text-center py-3 px-2 font-semibold text-gray-400",children:"Incidents"}),e.jsx("th",{className:"text-center py-3 px-2 font-semibold text-gray-400",children:"Arrests"}),e.jsx("th",{className:"text-center py-3 px-2 font-semibold text-gray-400",children:"Warnings"}),e.jsx("th",{className:"text-right py-3 px-2 font-semibold text-gray-400",children:"Actions"})]})}),e.jsx("tbody",{children:j.map(v=>e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-gray-800/30",children:[e.jsx("td",{className:"py-3 px-2 font-mono font-semibold text-theme-icon",children:v.callsign}),e.jsx("td",{className:"py-3 px-2 text-white",children:v.name}),e.jsx("td",{className:"py-3 px-2",children:e.jsx(O,{variant:"warning",children:v.rank})}),e.jsx("td",{className:"py-3 px-2 text-gray-300",children:v.department}),e.jsx("td",{className:"py-3 px-2",children:e.jsx(O,{variant:b(v.status),children:v.onDuty&&v.status==="active"?"On Duty":v.status.replace("-"," ")})}),e.jsx("td",{className:"py-3 px-2 text-center text-white",children:v.incidents}),e.jsx("td",{className:"py-3 px-2 text-center text-white",children:v.arrests}),e.jsx("td",{className:"py-3 px-2 text-center",children:v.warnings>0?e.jsx("span",{className:"text-yellow-400 font-semibold",children:v.warnings}):e.jsx("span",{className:"text-gray-500",children:"0"})}),e.jsx("td",{className:"py-3 px-2 text-right",children:e.jsx(f,{variant:"secondary",size:"sm",children:e.jsx("i",{className:"fa-solid fa-pen"})})})]},v.id))})]})})]})})}function wt(){const{data:s=[],loading:a,error:r,refetch:c}=le("getApplications",[]),t=s||[];ee("applicationReceived",()=>{c()});const n=async j=>{(await H("approveApplication",{applicationId:j})).success&&c()},m=async j=>{(await H("rejectApplication",{applicationId:j})).success&&c()};return e.jsx(Z,{fullScreen:!1,scopeName:"HiringTab",children:e.jsxs(I,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:[e.jsx("i",{className:"fa-solid fa-user-plus mr-2"}),"Hiring & Applications (",t.length,")"]}),e.jsx(f,{variant:"secondary",size:"sm",disabled:a,onClick:()=>c(),children:e.jsx("i",{className:`fa-solid fa-rotate ${a?"fa-spin":""}`})})]}),a?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-3xl spinner-theme mr-3"}),e.jsx("span",{className:"text-[rgba(255,255,255,0.7)]",children:"Loading applications..."})]}):r?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fa-solid fa-exclamation-triangle text-3xl text-red-400 mb-3"}),e.jsx("p",{className:"text-red-400 mb-4",children:"Failed to load applications"}),e.jsx(f,{size:"sm",variant:"primary",onClick:()=>c(),children:"Retry"})]}):t.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("i",{className:"fa-solid fa-inbox text-4xl mb-4 block"}),"No pending applications"]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(j=>e.jsxs("div",{className:"bg-gray-800/40 rounded-lg p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full icon-bg-theme flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-user text-theme-icon text-xl"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-white",children:j.name}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Applied: ",j.appliedDate]})]})]}),e.jsx(O,{variant:"warning",className:"mb-3",children:j.status}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{variant:"success",size:"sm",onClick:()=>n(j.id),className:"flex-1",children:[e.jsx("i",{className:"fa-solid fa-check mr-1"})," Accept"]}),e.jsxs(f,{variant:"danger",size:"sm",onClick:()=>m(j.id),className:"flex-1",children:[e.jsx("i",{className:"fa-solid fa-xmark mr-1"})," Deny"]})]})]},j.id))})]})})}function Ct(){const{data:s=[],loading:a,error:r,refetch:c}=le("getDisciplineRecords",[]),t=s||[];return ee("disciplineRecordCreated",()=>{c()}),e.jsx(Z,{fullScreen:!1,scopeName:"DisciplineTab",children:e.jsxs(I,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:[e.jsx("i",{className:"fa-solid fa-gavel mr-2"}),"Disciplinary Actions (",t.length,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{variant:"secondary",size:"sm",disabled:a,onClick:()=>c(),children:e.jsx("i",{className:`fa-solid fa-rotate ${a?"fa-spin":""}`})}),e.jsx(f,{variant:"primary",size:"sm",icon:e.jsx("i",{className:"fa-solid fa-plus"}),children:"New Action"})]})]}),a?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-3xl spinner-theme mr-3"}),e.jsx("span",{className:"text-[rgba(255,255,255,0.7)]",children:"Loading records..."})]}):r?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fa-solid fa-exclamation-triangle text-3xl text-red-400 mb-3"}),e.jsx("p",{className:"text-red-400 mb-4",children:"Failed to load discipline records"}),e.jsx(f,{size:"sm",variant:"primary",onClick:()=>c(),children:"Retry"})]}):t.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("i",{className:"fa-solid fa-clipboard-check text-4xl mb-4 block"}),"No disciplinary records"]}):e.jsx("div",{className:"space-y-3",children:t.map(n=>e.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-white",children:n.officer}),e.jsx(O,{variant:n.severity==="Major"?"danger":"warning",children:n.severity})]}),e.jsx("span",{className:"text-xs text-gray-400",children:n.date})]}),e.jsxs("div",{className:"mb-2 text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Action: "}),e.jsx("span",{className:"text-gray-300",children:n.action})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[e.jsx("span",{className:"font-semibold",children:"Reason: "}),n.reason]})]},n.id))})]})})}function kt(){const[s,a]=l.useState("all"),r=ie(w=>w.officer),c=((r==null?void 0:r.rank)||"").toLowerCase().includes("chief"),[t,n]=l.useState(!1),[m,j]=l.useState(!1),[b,v]=l.useState(!1),[p,g]=l.useState(!1),[i,x]=l.useState(!1),[y,h]=l.useState(!1),[A,T]=l.useState(""),[o,u]=l.useState(""),[R,F]=l.useState(""),[D,L]=l.useState("Mission Row PD"),[U,W]=l.useState("full"),[P,J]=l.useState(""),[K,S]=l.useState("Briefing Room"),[G,d]=l.useState(""),[k,M]=l.useState(""),[z,$]=l.useState(""),[Q,N]=l.useState("excellence"),V=w=>{switch(w){case"announce":n(!0);break;case"emergency":j(!0);break;case"recall":v(!0);break;case"audit":g(!0);break;case"staffmeeting":x(!0);break;case"commendation":h(!0);break;default:console.log("Bulk action:",w)}},_=async()=>{if(A.trim())try{await H("sendDepartmentAnnouncement",{message:A,sender:(r==null?void 0:r.firstname)+" "+(r==null?void 0:r.lastname)||"Chief",rank:(r==null?void 0:r.rank)||"Chief of Police"}),T(""),n(!1)}catch(w){console.error("Failed to send announcement:",w)}},se=async()=>{if(o.trim())try{await H("sendEmergencyAlert",{message:o,sender:(r==null?void 0:r.firstname)+" "+(r==null?void 0:r.lastname)||"Chief",timestamp:new Date().toISOString()}),u(""),j(!1)}catch(w){console.error("Failed to send emergency alert:",w)}},X=async()=>{if(R.trim())try{await H("sendAllUnitsRecall",{reason:R,location:D,sender:(r==null?void 0:r.firstname)+" "+(r==null?void 0:r.lastname)||"Chief",timestamp:new Date().toISOString()}),F(""),L("Mission Row PD"),v(!1)}catch(w){console.error("Failed to send recall:",w)}},ae=async()=>{try{await H("generateAuditReport",{type:U,generatedBy:(r==null?void 0:r.firstname)+" "+(r==null?void 0:r.lastname)||"Chief",timestamp:new Date().toISOString()}),g(!1)}catch(w){console.error("Failed to generate audit:",w)}},xe=async()=>{if(!(!P.trim()||!G.trim()))try{await H("callStaffMeeting",{time:P,location:K,agenda:G,calledBy:(r==null?void 0:r.firstname)+" "+(r==null?void 0:r.lastname)||"Chief",timestamp:new Date().toISOString()}),J(""),S("Briefing Room"),d(""),x(!1)}catch(w){console.error("Failed to call meeting:",w)}},ne=async()=>{if(!(!k.trim()||!z.trim()))try{await H("issueCommendation",{officer:k,reason:z,type:Q,issuedBy:(r==null?void 0:r.firstname)+" "+(r==null?void 0:r.lastname)||"Chief",timestamp:new Date().toISOString()}),M(""),$(""),N("excellence"),h(!1)}catch(w){console.error("Failed to issue commendation:",w)}};return e.jsxs("div",{className:"space-y-4",children:[c&&e.jsx(I,{title:"Debug Tools (Chief)",subtitle:"Toggle client-side debug logging for NUI calls and messages",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-white mb-1",children:"Debug Logging"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Logs all NUI requests/responses and inbound messages to console"})]}),e.jsx("button",{onClick:()=>ye(!Y()),className:`px-3 py-2 rounded-lg border-2 font-semibold text-sm transition-all ${Y()?"bg-green-500/20 border-green-500 text-green-400":"bg-gray-800/30 border-gray-700 text-gray-400 hover:border-gray-600"}`,children:Y()?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-bug mr-2"})," Enabled"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-regular fa-bug mr-2"})," Disabled"]})})]})}),e.jsx(I,{title:"Department Actions",subtitle:"Chief command operations",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:()=>V("announce"),className:"p-4 hover:brightness-110 border-2 border-active/30 hover:border-active/50 rounded-lg transition-all duration-200",style:{backgroundColor:"rgba(var(--theme-accent-rgb), 0.1)"},children:[e.jsx("i",{className:"fa-solid fa-bullhorn text-2xl text-theme-icon mb-2 block"}),e.jsx("div",{className:"font-semibold text-white text-sm",children:"Department Announcement"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Send message to all officers"})]}),e.jsxs("button",{onClick:()=>V("emergency"),className:"p-4 bg-red-500/10 hover:bg-red-500/20 border-2 border-red-500/30 hover:border-red-500/50 rounded-lg transition-all duration-200",children:[e.jsx("i",{className:"fa-solid fa-triangle-exclamation text-2xl text-red-400 mb-2 block"}),e.jsx("div",{className:"font-semibold text-white text-sm",children:"Emergency Alert"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Send urgent alert to on-duty units"})]}),e.jsxs("button",{onClick:()=>V("recall"),className:"p-4 bg-yellow-500/10 hover:bg-yellow-500/20 border-2 border-yellow-500/30 hover:border-yellow-500/50 rounded-lg transition-all duration-200",children:[e.jsx("i",{className:"fa-solid fa-bell text-2xl text-yellow-400 mb-2 block"}),e.jsx("div",{className:"font-semibold text-white text-sm",children:"All Units Recall"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Call all units to station"})]}),e.jsxs("button",{onClick:()=>V("audit"),className:"p-4 bg-teal-500/10 hover:bg-teal-500/20 border-2 border-teal-500/30 hover:border-teal-500/50 rounded-lg transition-all duration-200",children:[e.jsx("i",{className:"fa-solid fa-clipboard-list text-2xl text-teal-400 mb-2 block"}),e.jsx("div",{className:"font-semibold text-white text-sm",children:"Generate Audit Report"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Full department audit"})]}),e.jsxs("button",{onClick:()=>V("staffmeeting"),className:"p-4 bg-indigo-500/10 hover:bg-indigo-500/20 border-2 border-indigo-500/30 hover:border-indigo-500/50 rounded-lg transition-all duration-200",children:[e.jsx("i",{className:"fa-solid fa-users-rectangle text-2xl text-indigo-400 mb-2 block"}),e.jsx("div",{className:"font-semibold text-white text-sm",children:"Call Staff Meeting"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Notify supervisors of meeting"})]}),e.jsxs("button",{onClick:()=>V("commendation"),className:"p-4 bg-green-500/10 hover:bg-green-500/20 border-2 border-green-500/30 hover:border-green-500/50 rounded-lg transition-all duration-200",children:[e.jsx("i",{className:"fa-solid fa-award text-2xl text-green-400 mb-2 block"}),e.jsx("div",{className:"font-semibold text-white text-sm",children:"Issue Commendation"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Recognize officer excellence"})]})]})}),t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-[rgba(15,23,42,0.95)] border border-gray-700 rounded-xl p-6 max-w-2xl w-full shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-bullhorn text-blue-400"}),"Department Announcement"]}),e.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx("i",{className:"fa-solid fa-xmark text-xl"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-300 mb-2 block",children:"Announcement Message"}),e.jsx("textarea",{className:"w-full bg-gray-800/50 border border-gray-700 rounded-lg p-3 text-white placeholder-gray-500 focus:border-blue-500 focus:outline-none min-h-[120px]",placeholder:"Enter your department-wide announcement...",value:A,onChange:w=>T(w.target.value)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This will be sent to all officers in the department"})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(f,{variant:"secondary",onClick:()=>n(!1),children:"Cancel"}),e.jsxs(f,{variant:"primary",onClick:_,disabled:!A.trim(),children:[e.jsx("i",{className:"fa-solid fa-paper-plane mr-2"}),"Send Announcement"]})]})]})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-[rgba(15,23,42,0.95)] border border-red-500/30 rounded-xl p-6 max-w-2xl w-full shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-triangle-exclamation text-red-400"}),"Emergency Alert"]}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx("i",{className:"fa-solid fa-xmark text-xl"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-red-300",children:[e.jsx("i",{className:"fa-solid fa-info-circle mr-2"}),"This will send an urgent alert to all on-duty units with sound notification"]})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-300 mb-2 block",children:"Emergency Message"}),e.jsx("textarea",{className:"w-full bg-gray-800/50 border border-gray-700 rounded-lg p-3 text-white placeholder-gray-500 focus:border-red-500 focus:outline-none min-h-[120px]",placeholder:"Enter emergency alert details...",value:o,onChange:w=>u(w.target.value)})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(f,{variant:"secondary",onClick:()=>j(!1),children:"Cancel"}),e.jsxs(f,{variant:"danger",onClick:se,disabled:!o.trim(),children:[e.jsx("i",{className:"fa-solid fa-bell mr-2"}),"Send Emergency Alert"]})]})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-[rgba(15,23,42,0.95)] border border-gray-700 rounded-xl p-6 max-w-2xl w-full shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-bell text-yellow-400"}),"All Units Recall"]}),e.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx("i",{className:"fa-solid fa-xmark text-xl"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-300 mb-2 block",children:"Recall Location"}),e.jsx(E,{placeholder:"Enter recall location...",value:D,onChange:w=>L(w.target.value),icon:e.jsx("i",{className:"fa-solid fa-location-dot"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-300 mb-2 block",children:"Reason for Recall"}),e.jsx("textarea",{className:"w-full bg-gray-800/50 border border-gray-700 rounded-lg p-3 text-white placeholder-gray-500 focus:border-yellow-500 focus:outline-none min-h-[100px]",placeholder:"Enter reason for recalling all units...",value:R,onChange:w=>F(w.target.value)})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(f,{variant:"secondary",onClick:()=>v(!1),children:"Cancel"}),e.jsxs(f,{variant:"primary",onClick:X,disabled:!R.trim(),className:"!bg-gradient-to-r !from-[rgba(234,179,8,0.32)] !to-[rgba(202,138,4,0.4)] !border-[rgba(234,179,8,0.5)] hover:!from-[rgba(234,179,8,0.42)] hover:!to-[rgba(202,138,4,0.5)] hover:!shadow-[0_0_20px_rgba(234,179,8,0.4)]",children:[e.jsx("i",{className:"fa-solid fa-users mr-2"}),"Send Recall Order"]})]})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-[rgba(15,23,42,0.95)] border border-gray-700 rounded-xl p-6 max-w-2xl w-full shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-clipboard-list text-teal-400"}),"Generate Audit Report"]}),e.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx("i",{className:"fa-solid fa-xmark text-xl"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-300 mb-3 block",children:"Audit Type"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>W("full"),className:`p-3 rounded-lg border-2 transition-all ${U==="full"?"bg-teal-500/20 border-teal-500 text-teal-300":"bg-gray-800/30 border-gray-700 text-gray-400 hover:border-gray-600"}`,children:[e.jsx("i",{className:"fa-solid fa-database mr-2"}),"Full Department"]}),e.jsxs("button",{onClick:()=>W("roster"),className:`p-3 rounded-lg border-2 transition-all ${U==="roster"?"bg-teal-500/20 border-teal-500 text-teal-300":"bg-gray-800/30 border-gray-700 text-gray-400 hover:border-gray-600"}`,children:[e.jsx("i",{className:"fa-solid fa-users mr-2"}),"Roster Only"]}),e.jsxs("button",{onClick:()=>W("incidents"),className:`p-3 rounded-lg border-2 transition-all ${U==="incidents"?"bg-teal-500/20 border-teal-500 text-teal-300":"bg-gray-800/30 border-gray-700 text-gray-400 hover:border-gray-600"}`,children:[e.jsx("i",{className:"fa-solid fa-siren-on mr-2"}),"Incidents"]}),e.jsxs("button",{onClick:()=>W("discipline"),className:`p-3 rounded-lg border-2 transition-all ${U==="discipline"?"bg-teal-500/20 border-teal-500 text-teal-300":"bg-gray-800/30 border-gray-700 text-gray-400 hover:border-gray-600"}`,children:[e.jsx("i",{className:"fa-solid fa-gavel mr-2"}),"Discipline"]})]})]}),e.jsx("div",{className:"bg-teal-500/10 border border-teal-500/30 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-teal-300",children:[e.jsx("i",{className:"fa-solid fa-info-circle mr-2"}),"Report will be generated and available in the exports folder"]})}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(f,{variant:"secondary",onClick:()=>g(!1),children:"Cancel"}),e.jsxs(f,{variant:"primary",onClick:ae,children:[e.jsx("i",{className:"fa-solid fa-file-pdf mr-2"}),"Generate Report"]})]})]})]})}),i&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-[rgba(15,23,42,0.95)] border border-gray-700 rounded-xl p-6 max-w-2xl w-full shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-users-rectangle text-indigo-400"}),"Call Staff Meeting"]}),e.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx("i",{className:"fa-solid fa-xmark text-xl"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-300 mb-2 block",children:"Meeting Time"}),e.jsx(E,{placeholder:"e.g., Today at 8:00 PM or Tomorrow 1400 hours",value:P,onChange:w=>J(w.target.value),icon:e.jsx("i",{className:"fa-solid fa-clock"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-300 mb-2 block",children:"Meeting Location"}),e.jsx(E,{placeholder:"Enter meeting location...",value:K,onChange:w=>S(w.target.value),icon:e.jsx("i",{className:"fa-solid fa-location-dot"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-300 mb-2 block",children:"Meeting Agenda"}),e.jsx("textarea",{className:"w-full bg-gray-800/50 border border-gray-700 rounded-lg p-3 text-white placeholder-gray-500 focus:border-indigo-500 focus:outline-none min-h-[100px]",placeholder:"Enter meeting agenda and topics...",value:G,onChange:w=>d(w.target.value)})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(f,{variant:"secondary",onClick:()=>x(!1),children:"Cancel"}),e.jsxs(f,{variant:"primary",onClick:xe,disabled:!P.trim()||!G.trim(),children:[e.jsx("i",{className:"fa-solid fa-calendar-check mr-2"}),"Schedule Meeting"]})]})]})]})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-[rgba(15,23,42,0.95)] border border-gray-700 rounded-xl p-6 max-w-2xl w-full shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-award text-green-400"}),"Issue Commendation"]}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx("i",{className:"fa-solid fa-xmark text-xl"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-300 mb-2 block",children:"Officer Name or Badge Number"}),e.jsx(E,{placeholder:"Enter officer name or badge number...",value:k,onChange:w=>M(w.target.value),icon:e.jsx("i",{className:"fa-solid fa-user"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-300 mb-3 block",children:"Commendation Type"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>N("excellence"),className:`p-3 rounded-lg border-2 transition-all ${Q==="excellence"?"bg-green-500/20 border-green-500 text-green-300":"bg-gray-800/30 border-gray-700 text-gray-400 hover:border-gray-600"}`,children:[e.jsx("i",{className:"fa-solid fa-star mr-2"}),"Excellence"]}),e.jsxs("button",{onClick:()=>N("bravery"),className:`p-3 rounded-lg border-2 transition-all ${Q==="bravery"?"bg-green-500/20 border-green-500 text-green-300":"bg-gray-800/30 border-gray-700 text-gray-400 hover:border-gray-600"}`,children:[e.jsx("i",{className:"fa-solid fa-shield-halved mr-2"}),"Bravery"]}),e.jsxs("button",{onClick:()=>N("service"),className:`p-3 rounded-lg border-2 transition-all ${Q==="service"?"bg-green-500/20 border-green-500 text-green-300":"bg-gray-800/30 border-gray-700 text-gray-400 hover:border-gray-600"}`,children:[e.jsx("i",{className:"fa-solid fa-handshake mr-2"}),"Service"]}),e.jsxs("button",{onClick:()=>N("medal"),className:`p-3 rounded-lg border-2 transition-all ${Q==="medal"?"bg-green-500/20 border-green-500 text-green-300":"bg-gray-800/30 border-gray-700 text-gray-400 hover:border-gray-600"}`,children:[e.jsx("i",{className:"fa-solid fa-medal mr-2"}),"Medal of Honor"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-300 mb-2 block",children:"Reason for Commendation"}),e.jsx("textarea",{className:"w-full bg-gray-800/50 border border-gray-700 rounded-lg p-3 text-white placeholder-gray-500 focus:border-green-500 focus:outline-none min-h-[120px]",placeholder:"Describe the officer's exemplary actions or achievements...",value:z,onChange:w=>$(w.target.value)})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(f,{variant:"secondary",onClick:()=>h(!1),children:"Cancel"}),e.jsxs(f,{variant:"success",onClick:ne,disabled:!k.trim()||!z.trim(),children:[e.jsx("i",{className:"fa-solid fa-certificate mr-2"}),"Issue Commendation"]})]})]})]})})]})}function St(){const[s,a]=l.useState([]),[r,c]=l.useState(!0),[t,n]=l.useState("today"),[m,j]=l.useState("all"),[b,v]=l.useState(null),[p,g]=l.useState(!1);ge.useEffect(()=>{(async()=>{c(!0);try{const u=await H("ps-mdt:chief:getClockAudit",{limit:100,filter:m==="all"?"all":m});u.data&&Array.isArray(u.data)&&a(u.data)}catch(u){console.error("Failed to fetch clock audit data:",u)}finally{c(!1)}})()},[m]);const i=o=>{const u=[],R=new Date("2024-10-19");for(let F=0;F<90;F++){const D=new Date(R);if(D.setDate(D.getDate()-F),Math.random()>.7)continue;const L=7+Math.floor(Math.random()*4),U=Math.floor(Math.random()*4)*15,W=7.5+Math.random()*1.5,P=Math.floor(W*60),J=L+Math.floor(P/60),K=(U+P%60)%60,S=(k,M)=>{const z=k>=12?"PM":"AM";return`${(k>12?k-12:k===0?12:k).toString().padStart(2,"0")}:${M.toString().padStart(2,"0")} ${z}`},G=Math.floor(P/60),d=P%60;u.push({date:D.toISOString().split("T")[0],clockIn:S(L,U),clockOut:S(J,K),duration:`${G}h ${d}m`})}return u.reverse()},x=o=>{const u=i(o.id),R=`Date,Officer,Badge,Clock In,Clock Out,Duration
`,F=u.map(P=>`${P.date},${o.officer},${o.badge},${P.clockIn},${P.clockOut},${P.duration}`).join(`
`),D=R+F,L=new Blob([D],{type:"text/csv;charset=utf-8;"}),U=document.createElement("a"),W=URL.createObjectURL(L);U.setAttribute("href",W),U.setAttribute("download",`${o.officer.replace(/\s+/g,"_")}_Clock_History_90days.csv`),U.style.visibility="hidden",document.body.appendChild(U),U.click(),document.body.removeChild(U),console.log("Exported 90 days of clock-in history for:",o.officer)},y=o=>{v(o),g(!0)},h=s,A=s.filter(o=>o.status==="active").length,T=s.reduce((o,u)=>{if(!u.duration||u.duration==="--"||u.duration==="On Duty")return o;const R=u.duration.match(/(\d+)h/),F=R?parseFloat(R[1]):0;return o+F},0);return r?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"spinner-theme w-12 h-12 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading clock-in audit data..."})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"rounded-lg p-4 border",style:{backgroundImage:"linear-gradient(to bottom right, rgba(var(--theme-accent-rgb), 0.1), rgba(var(--theme-primary-rgb), 0.05))",borderColor:"rgba(var(--theme-accent-rgb), 0.2)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Currently Clocked In"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:A})]}),e.jsx("div",{className:"w-12 h-12 rounded-xl icon-bg-theme flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-clock text-theme-icon text-xl"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-500/10 to-green-600/5 border border-green-500/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Total Hours Today"}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:[T.toFixed(1),"h"]})]}),e.jsx("div",{className:"w-12 h-12 rounded-xl bg-green-500/20 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-business-time text-green-400 text-xl"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/5 border border-purple-500/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Total Sessions"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:s.length})]}),e.jsx("div",{className:"w-12 h-12 rounded-xl bg-purple-500/20 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-list-check text-purple-400 text-xl"})})]})})]}),e.jsxs(I,{title:"Clock-in Records",subtitle:"Officer attendance tracking",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 flex-wrap",children:[e.jsx(f,{variant:m==="all"?"primary":"secondary",size:"sm",onClick:()=>j("all"),children:"All"}),e.jsxs(f,{variant:m==="active"?"success":"secondary",size:"sm",onClick:()=>j("active"),children:[e.jsx("i",{className:"fa-solid fa-clock mr-1"}),"Active"]}),e.jsxs(f,{variant:"secondary",size:"sm",onClick:()=>j("off-duty"),children:[e.jsx("i",{className:"fa-solid fa-moon mr-1"}),"Off-Duty"]}),e.jsxs(f,{variant:m==="suspended"?"danger":"secondary",size:"sm",onClick:()=>j("suspended"),children:[e.jsx("i",{className:"fa-solid fa-ban mr-1"}),"Suspended"]}),e.jsxs(f,{variant:"secondary",size:"sm",onClick:()=>j("loa"),children:[e.jsx("i",{className:"fa-solid fa-plane-departure mr-1"}),"LOA"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"py-3 px-2 text-left text-gray-400 text-xs font-semibold",children:"Officer"}),e.jsx("th",{className:"py-3 px-2 text-left text-gray-400 text-xs font-semibold",children:"Badge"}),e.jsx("th",{className:"py-3 px-2 text-left text-gray-400 text-xs font-semibold",children:"Clock In"}),e.jsx("th",{className:"py-3 px-2 text-left text-gray-400 text-xs font-semibold",children:"Clock Out"}),e.jsx("th",{className:"py-3 px-2 text-left text-gray-400 text-xs font-semibold",children:"Duration"}),e.jsx("th",{className:"py-3 px-2 text-left text-gray-400 text-xs font-semibold",children:"Status"}),e.jsx("th",{className:"py-3 px-2 text-right text-gray-400 text-xs font-semibold",children:"Actions"})]})}),e.jsx("tbody",{children:h.map(o=>e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-gray-800/30",children:[e.jsx("td",{className:"py-3 px-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full icon-bg-theme flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-user text-theme-icon text-xs"})}),e.jsx("span",{className:"text-white text-sm",children:o.officer})]})}),e.jsxs("td",{className:"py-3 px-2 text-gray-300 text-sm",children:["#",o.badge]}),e.jsx("td",{className:"py-3 px-2 text-gray-300 text-sm",children:o.clockIn}),e.jsx("td",{className:"py-3 px-2 text-gray-300 text-sm",children:o.clockOut||e.jsxs("span",{className:"text-yellow-400 flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-clock animate-pulse"}),"On Duty"]})}),e.jsx("td",{className:"py-3 px-2 text-white text-sm font-semibold",children:o.duration}),e.jsx("td",{className:"py-3 px-2",children:e.jsx(O,{variant:o.status==="active"?"success":o.status==="off-duty"?"secondary":o.status==="suspended"?"danger":"warning",children:o.status==="active"?"ACTIVE":o.status==="off-duty"?"OFF-DUTY":o.status==="suspended"?"SUSPENDED":"LOA"})}),e.jsx("td",{className:"py-3 px-2 text-right",children:e.jsxs("div",{className:"flex gap-1 justify-end",children:[e.jsx(f,{variant:"secondary",size:"sm",onClick:()=>y(o),children:e.jsx("i",{className:"fa-solid fa-calendar-days"})}),e.jsx(f,{variant:"secondary",size:"sm",children:e.jsx("i",{className:"fa-solid fa-eye"})})]})})]},o.id))})]})}),h.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("i",{className:"fa-solid fa-clock text-4xl mb-4 block"}),"No clock-in records found"]})]}),p&&b&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>g(!1),children:e.jsxs("div",{className:"bg-gray-900 rounded-xl border-2 max-w-4xl w-full max-h-[90vh] overflow-hidden",style:{borderColor:"rgba(var(--theme-accent-rgb), 0.3)"},onClick:o=>o.stopPropagation(),children:[e.jsx("div",{className:"border-b p-4",style:{backgroundImage:"linear-gradient(to right, rgba(var(--theme-accent-rgb), 0.2), rgba(var(--theme-primary-rgb), 0.1))",borderBottomColor:"rgba(var(--theme-accent-rgb), 0.3)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full icon-bg-theme flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-calendar-days text-theme-icon text-xl"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Clock-in History"}),e.jsxs("p",{className:"text-sm text-gray-400",children:[b.officer," - Badge #",b.badge]})]})]}),e.jsx("button",{onClick:()=>g(!1),className:"w-10 h-10 rounded-lg bg-gray-800/50 hover:bg-gray-700 border border-gray-700 hover:border-gray-600 text-gray-400 hover:text-white transition-all",children:e.jsx("i",{className:"fa-solid fa-xmark text-lg"})})]})}),e.jsxs("div",{className:"p-4 overflow-y-auto max-h-[calc(90vh-120px)]",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[e.jsxs("div",{className:"border rounded-lg p-3",style:{backgroundColor:"rgba(var(--theme-accent-rgb), 0.1)",borderColor:"rgba(var(--theme-accent-rgb), 0.2)"},children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Total Days Worked"}),e.jsx("div",{className:"text-2xl font-bold text-theme-icon",children:i(b.id).length})]}),e.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Total Hours"}),e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[i(b.id).reduce((o,u)=>{const R=parseFloat(u.duration.split("h")[0]);return o+R},0).toFixed(1),"h"]})]}),e.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Average Hours/Day"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-400",children:[(i(b.id).reduce((o,u)=>{const R=parseFloat(u.duration.split("h")[0]);return o+R},0)/i(b.id).length).toFixed(1),"h"]})]})]}),e.jsx(I,{title:"Attendance Timeline",subtitle:"Last 90 days of clock-in records",children:e.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto pr-2",children:i(b.id).map((o,u)=>e.jsx("div",{className:"bg-gray-800/30 border border-gray-700 rounded-lg p-3 hover:bg-gray-800/50 hover:border-gray-600 transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg icon-bg-theme flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"fa-solid fa-calendar text-theme-icon"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-white text-sm",children:new Date(o.date).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric",year:"numeric"})}),e.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-clock text-green-400"}),"In: ",o.clockIn]}),e.jsx("span",{className:"text-gray-600",children:"•"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-clock text-red-400"}),"Out: ",o.clockOut]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-white",children:o.duration}),e.jsx("div",{className:"text-xs text-gray-500",children:"Duration"})]})]})},u))})})]}),e.jsx("div",{className:"border-t border-gray-800 p-4 bg-gray-900/50",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Showing ",i(b.id).length," clock-in records (90 days)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{variant:"secondary",size:"sm",onClick:()=>g(!1),children:"Close"}),e.jsx(f,{variant:"primary",size:"sm",onClick:()=>x(b),icon:e.jsx("i",{className:"fa-solid fa-download"}),children:"Export CSV"})]})]})})]})})]})}function Dt(){const[s,a]=l.useState(""),[r,c]=l.useState("All"),[t,n]=l.useState(!0),[m,j]=l.useState(!1),[b,v]=l.useState([]),[p,g]=l.useState(!1),[i,x]=l.useState(null),[y,h]=l.useState(!1),[A,T]=l.useState(null),o=ge.useCallback(async()=>{n(!0);try{const S=await H("getPenalCodes",{});S&&S.data&&Array.isArray(S.data)&&v(S.data)}catch(S){console.error("Failed to fetch penal codes:",S),j(!0)}finally{n(!1)}},[]);ge.useEffect(()=>{o()},[]);const u=ge.useMemo(()=>!b||b.length===0?["All"]:["All",...Array.from(new Set(b.map(G=>G.category))).sort()],[b]),R=ge.useMemo(()=>b?b.filter(S=>{if(S.isActive===!1)return!1;const G=S.code.toLowerCase().includes(s.toLowerCase())||S.title.toLowerCase().includes(s.toLowerCase())||S.description.toLowerCase().includes(s.toLowerCase()),d=r==="All"||S.category===r;return G&&d}):[],[b,s,r]),F=S=>{switch(S==null?void 0:S.toLowerCase()){case"felony":return"danger";case"misdemeanor":return"warning";case"infraction":return"info";default:return"default"}},D=S=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(S),L=S=>{if(S===0)return"0 minutes";if(S<60)return`${S} minutes`;const G=Math.floor(S/60),d=S%60;return d===0?`${G} hour${G>1?"s":""}`:`${G}h ${d}m`},U=()=>{x({code:"",title:"",description:"",class:"misdemeanor",category:"",fine:0,sentence:0,points:0,isActive:!0}),g(!0)},W=S=>{x({...S}),g(!0)},P=S=>{T(S),h(!0)},J=async()=>{if(i)try{const S=i.id?"updatePenalCode":"createPenalCode";await H(S,i),g(!1),x(null),o()}catch(S){console.error("Failed to save penal code:",S)}},K=async()=>{if(A)try{await H("deletePenalCode",{id:A.id}),h(!1),T(null),o()}catch(S){console.error("Failed to delete penal code:",S)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(I,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Penal Code Management"}),e.jsxs("p",{className:"text-xs text-gray-400",children:[R.length," codes found"]})]}),e.jsx(f,{variant:"primary",size:"sm",onClick:U,icon:e.jsx("i",{className:"fa-solid fa-plus"}),children:"Add Code"})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsx(E,{placeholder:"Search by code or title...",value:s,onChange:S=>a(S.target.value),icon:e.jsx("i",{className:"fa-solid fa-magnifying-glass"})}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:u.map(S=>e.jsx("button",{onClick:()=>c(S),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${r===S?"badge-theme":"bg-gray-800/30 border border-gray-700 text-gray-400 hover:border-gray-600"}`,children:S},S))})]}),t?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"spinner-theme w-10 h-10 mr-3"}),e.jsx("p",{className:"text-white",children:"Loading penal codes..."})]}):m?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fa-solid fa-exclamation-triangle text-3xl text-red-400 mb-3"}),e.jsx("p",{className:"text-red-400",children:"Failed to load penal codes"})]}):R.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fa-solid fa-search text-3xl text-gray-500 mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No penal codes found"})]}):e.jsx("div",{className:"space-y-2",children:R.map(S=>{var G;return e.jsxs("div",{className:"p-3 bg-gray-800/30 rounded-lg border border-gray-700 hover:border-active transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-mono text-xs font-bold text-theme-icon",children:S.code}),e.jsx(O,{variant:F(S.class),children:((G=S.class)==null?void 0:G.toUpperCase())||"N/A"}),e.jsx(O,{variant:"default",children:S.category}),S.points&&S.points>0&&e.jsxs(O,{variant:"warning",children:[S.points," pts"]})]}),e.jsx("h3",{className:"text-sm font-bold text-white",children:S.title})]}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx(f,{variant:"secondary",size:"sm",onClick:()=>W(S),className:"!p-1.5 !min-w-0",children:e.jsx("i",{className:"fa-solid fa-pen text-xs"})}),e.jsx(f,{variant:"danger",size:"sm",onClick:()=>P(S),className:"!p-1.5 !min-w-0",children:e.jsx("i",{className:"fa-solid fa-trash text-xs"})})]})]}),e.jsx("p",{className:"text-xs text-gray-400 mb-2 line-clamp-2",children:S.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5 bg-red-500/10 rounded-lg border border-red-500/20",children:[e.jsx("i",{className:"fa-solid fa-clock text-red-400 text-xs"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500",children:"Jail Time"}),e.jsx("p",{className:"text-xs font-semibold text-white",children:L(S.sentence||0)})]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5 bg-green-500/10 rounded-lg border border-green-500/20",children:[e.jsx("i",{className:"fa-solid fa-dollar-sign text-green-400 text-xs"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500",children:"Fine"}),e.jsx("p",{className:"text-xs font-semibold text-white",children:D(S.fine||0)})]})]})]})]},S.id||S.code)})})]}),e.jsx(I,{title:"Severity Levels",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsxs("div",{className:"p-2 bg-red-500/10 rounded-lg border border-red-500/30",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx(O,{variant:"danger",children:"FELONY"})}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Most serious crimes with significant jail time and fines"})]}),e.jsxs("div",{className:"p-2 bg-yellow-500/10 rounded-lg border border-yellow-500/30",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx(O,{variant:"warning",children:"MISDEMEANOR"})}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Lesser crimes with moderate penalties"})]}),e.jsxs("div",{className:"p-2 bg-blue-500/10 rounded-lg border border-blue-500/30",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx(O,{variant:"info",children:"INFRACTION"})}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Minor violations usually resulting in fines only"})]})]})}),p&&i&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>g(!1),children:e.jsxs("div",{className:"bg-gray-900 rounded-xl border-2 max-w-2xl w-full max-h-[90vh] overflow-y-auto",style:{borderColor:"rgba(var(--theme-accent-rgb), 0.3)"},onClick:S=>S.stopPropagation(),children:[e.jsx("div",{className:"border-b p-4 sticky top-0 bg-gray-900 z-10",style:{backgroundImage:"linear-gradient(to right, rgba(var(--theme-accent-rgb), 0.2), rgba(var(--theme-primary-rgb), 0.1))",borderBottomColor:"rgba(var(--theme-accent-rgb), 0.3)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:i.id?"Edit Penal Code":"Add Penal Code"}),e.jsx("button",{onClick:()=>g(!1),className:"w-8 h-8 rounded-lg bg-gray-800 hover:bg-gray-700 flex items-center justify-center transition-colors",children:e.jsx("i",{className:"fa-solid fa-times text-white"})})]})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1",children:"Code"}),e.jsx(E,{value:i.code,onChange:S=>x({...i,code:S.target.value}),placeholder:"PC 487"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1",children:"Class"}),e.jsxs("select",{value:i.class,onChange:S=>x({...i,class:S.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white text-sm focus:outline-none focus:border-active",children:[e.jsx("option",{value:"felony",children:"Felony"}),e.jsx("option",{value:"misdemeanor",children:"Misdemeanor"}),e.jsx("option",{value:"infraction",children:"Infraction"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1",children:"Title"}),e.jsx(E,{value:i.title,onChange:S=>x({...i,title:S.target.value}),placeholder:"Grand Theft"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1",children:"Category"}),e.jsx(E,{value:i.category,onChange:S=>x({...i,category:S.target.value}),placeholder:"Property Crimes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1",children:"Description"}),e.jsx("textarea",{value:i.description,onChange:S=>x({...i,description:S.target.value}),placeholder:"Description of the crime...",rows:3,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white text-sm focus:outline-none focus:border-active resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1",children:"Fine ($)"}),e.jsx(E,{type:"number",value:i.fine,onChange:S=>x({...i,fine:parseInt(S.target.value)||0}),placeholder:"5000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1",children:"Jail (min)"}),e.jsx(E,{type:"number",value:i.sentence,onChange:S=>x({...i,sentence:parseInt(S.target.value)||0}),placeholder:"120"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1",children:"Points"}),e.jsx(E,{type:"number",value:i.points||0,onChange:S=>x({...i,points:parseInt(S.target.value)||0}),placeholder:"0"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:i.isActive!==!1,onChange:S=>x({...i,isActive:S.target.checked}),className:"w-4 h-4 rounded bg-gray-800 border-gray-700"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm text-white",children:"Active"})]})]}),e.jsxs("div",{className:"border-t p-4 flex justify-end gap-2",style:{borderTopColor:"rgba(var(--theme-accent-rgb), 0.3)"},children:[e.jsx(f,{variant:"secondary",onClick:()=>g(!1),children:"Cancel"}),e.jsx(f,{variant:"primary",onClick:J,children:i.id?"Update":"Create"})]})]})}),y&&A&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>h(!1),children:e.jsxs("div",{className:"bg-gray-900 rounded-xl border-2 border-red-500/30 max-w-md w-full p-6",onClick:S=>S.stopPropagation(),children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/20 flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fa-solid fa-trash text-3xl text-red-400"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Delete Penal Code"}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Are you sure you want to delete ",e.jsxs("span",{className:"font-semibold text-white",children:[A.code," - ",A.title]}),"?"]}),e.jsx("p",{className:"text-red-400 text-xs mt-2",children:"This action cannot be undone."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(f,{variant:"secondary",onClick:()=>h(!1),className:"flex-1",children:"Cancel"}),e.jsx(f,{variant:"danger",onClick:K,className:"flex-1",children:"Delete"})]})]})})]})}function At(){const[s,a]=l.useState(""),[r,c]=l.useState("All"),[t,n]=l.useState(!1),[m,j]=l.useState(!1),[b,v]=l.useState([{id:"1",title:"Traffic Stop Procedures",category:"Patrol",content:"Standard operating procedures for conducting traffic stops including officer safety, positioning, communication protocols, and proper documentation requirements.",lastUpdated:"2024-10-10",updatedBy:"Capt. Johnson"},{id:"2",title:"Use of Force Policy",category:"General",content:"Guidelines for appropriate use of force including de-escalation techniques, use of force continuum, and reporting requirements.",lastUpdated:"2024-10-08",updatedBy:"Chief Williams"},{id:"3",title:"Evidence Collection",category:"Investigations",content:"Procedures for proper collection, handling, and storage of evidence at crime scenes.",lastUpdated:"2024-10-05",updatedBy:"Det. Martinez"},{id:"4",title:"Pursuit Guidelines",category:"Patrol",content:"Department policy on vehicle pursuits including authorization, termination criteria, and supervisor involvement.",lastUpdated:"2024-10-01",updatedBy:"Sgt. Chen"}]),[p,g]=l.useState(!1),[i,x]=l.useState(null),[y,h]=l.useState(!1),[A,T]=l.useState(null),o=ge.useCallback(async()=>{n(!0);try{j(!1)}catch(P){console.error("Failed to fetch SOPs:",P),j(!0)}finally{n(!1)}},[]);ge.useEffect(()=>{o()},[]);const u=ge.useMemo(()=>!b||b.length===0?["All"]:["All",...Array.from(new Set(b.map(J=>J.category))).sort()],[b]),R=ge.useMemo(()=>b?b.filter(P=>{const J=P.title.toLowerCase().includes(s.toLowerCase())||P.content.toLowerCase().includes(s.toLowerCase())||P.category.toLowerCase().includes(s.toLowerCase()),K=r==="All"||P.category===r;return J&&K}):[],[b,s,r]),F=()=>{x({id:"",title:"",category:"",content:"",lastUpdated:new Date().toISOString().split("T")[0],updatedBy:"Current User"}),g(!0)},D=P=>{x({...P}),g(!0)},L=P=>{T(P),h(!0)},U=async()=>{if(i)try{if(i.id)v(b.map(P=>P.id===i.id?{...i,lastUpdated:new Date().toISOString().split("T")[0]}:P));else{const P={...i,id:Date.now().toString(),lastUpdated:new Date().toISOString().split("T")[0]};v([...b,P])}g(!1),x(null),o()}catch(P){console.error("Failed to save SOP:",P)}},W=async()=>{if(A)try{v(b.filter(P=>P.id!==A.id)),h(!1),T(null),o()}catch(P){console.error("Failed to delete SOP:",P)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(I,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Standard Operating Procedures"}),e.jsxs("p",{className:"text-xs text-gray-400",children:[R.length," SOPs found"]})]}),e.jsx(f,{variant:"primary",size:"sm",onClick:F,icon:e.jsx("i",{className:"fa-solid fa-plus"}),children:"New SOP"})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsx(E,{placeholder:"Search SOPs by title, category, or content...",value:s,onChange:P=>a(P.target.value),icon:e.jsx("i",{className:"fa-solid fa-magnifying-glass"})}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:u.map(P=>e.jsx("button",{onClick:()=>c(P),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${r===P?"badge-theme":"bg-gray-800/30 border border-gray-700 text-gray-400 hover:border-gray-600"}`,children:P},P))})]}),t?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"spinner-theme w-10 h-10 mr-3"}),e.jsx("p",{className:"text-white",children:"Loading SOPs..."})]}):m?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fa-solid fa-exclamation-triangle text-3xl text-red-400 mb-3"}),e.jsx("p",{className:"text-red-400",children:"Failed to load SOPs"})]}):R.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fa-solid fa-search text-3xl text-gray-500 mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No SOPs found"})]}):e.jsx("div",{className:"space-y-3",children:R.map(P=>e.jsxs("div",{className:"p-3 bg-gray-800/30 rounded-lg border border-gray-700 hover:border-active transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold text-white",children:P.title}),e.jsx(O,{variant:"info",children:P.category})]})}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx(f,{variant:"secondary",size:"sm",onClick:()=>D(P),className:"!p-1.5 !min-w-0",children:e.jsx("i",{className:"fa-solid fa-pen text-xs"})}),e.jsx(f,{variant:"danger",size:"sm",onClick:()=>L(P),className:"!p-1.5 !min-w-0",children:e.jsx("i",{className:"fa-solid fa-trash text-xs"})})]})]}),e.jsx("p",{className:"text-xs text-gray-400 mb-2 line-clamp-2",children:P.content}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500 mt-2",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-clock"}),"Last updated: ",P.lastUpdated]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-user"}),"By: ",P.updatedBy]})]})]},P.id))})]}),e.jsx(I,{title:"Common Categories",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2",children:[e.jsxs("div",{className:"p-2 bg-blue-500/10 rounded-lg border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:"fa-solid fa-car text-blue-400"}),e.jsx("span",{className:"text-sm font-semibold text-white",children:"Patrol"})]}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Field operations and traffic enforcement"})]}),e.jsxs("div",{className:"p-2 bg-purple-500/10 rounded-lg border border-purple-500/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:"fa-solid fa-search text-purple-400"}),e.jsx("span",{className:"text-sm font-semibold text-white",children:"Investigations"})]}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Detective work and case management"})]}),e.jsxs("div",{className:"p-2 bg-green-500/10 rounded-lg border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:"fa-solid fa-shield-halved text-green-400"}),e.jsx("span",{className:"text-sm font-semibold text-white",children:"General"})]}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Department-wide policies and conduct"})]}),e.jsxs("div",{className:"p-2 bg-yellow-500/10 rounded-lg border border-yellow-500/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:"fa-solid fa-graduation-cap text-yellow-400"}),e.jsx("span",{className:"text-sm font-semibold text-white",children:"Training"})]}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Academy and certification procedures"})]})]})}),p&&i&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>g(!1),children:e.jsxs("div",{className:"bg-gray-900 rounded-xl border-2 max-w-2xl w-full max-h-[90vh] overflow-y-auto",style:{borderColor:"rgba(var(--theme-accent-rgb), 0.3)"},onClick:P=>P.stopPropagation(),children:[e.jsx("div",{className:"border-b p-4 sticky top-0 bg-gray-900 z-10",style:{backgroundImage:"linear-gradient(to right, rgba(var(--theme-accent-rgb), 0.2), rgba(var(--theme-primary-rgb), 0.1))",borderBottomColor:"rgba(var(--theme-accent-rgb), 0.3)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:i.id?"Edit SOP":"Add SOP"}),e.jsx("button",{onClick:()=>g(!1),className:"w-8 h-8 rounded-lg bg-gray-800 hover:bg-gray-700 flex items-center justify-center transition-colors",children:e.jsx("i",{className:"fa-solid fa-times text-white"})})]})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1",children:"Title"}),e.jsx(E,{value:i.title,onChange:P=>x({...i,title:P.target.value}),placeholder:"Traffic Stop Procedures"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1",children:"Category"}),e.jsxs("select",{value:i.category,onChange:P=>x({...i,category:P.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white text-sm focus:outline-none focus:border-active",children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"Patrol",children:"Patrol"}),e.jsx("option",{value:"Investigations",children:"Investigations"}),e.jsx("option",{value:"General",children:"General"}),e.jsx("option",{value:"Training",children:"Training"}),e.jsx("option",{value:"Admin",children:"Administrative"}),e.jsx("option",{value:"Special Operations",children:"Special Operations"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1",children:"Content"}),e.jsx("textarea",{value:i.content,onChange:P=>x({...i,content:P.target.value}),placeholder:"Enter the full SOP content here...",rows:10,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white text-sm focus:outline-none focus:border-active resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1",children:"Updated By"}),e.jsx(E,{value:i.updatedBy,onChange:P=>x({...i,updatedBy:P.target.value}),placeholder:"Officer Name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1",children:"Last Updated"}),e.jsx(E,{type:"date",value:i.lastUpdated,onChange:P=>x({...i,lastUpdated:P.target.value})})]})]})]}),e.jsxs("div",{className:"border-t p-4 flex justify-end gap-2",style:{borderTopColor:"rgba(var(--theme-accent-rgb), 0.3)"},children:[e.jsx(f,{variant:"secondary",onClick:()=>g(!1),children:"Cancel"}),e.jsx(f,{variant:"primary",onClick:U,children:i.id?"Update":"Create"})]})]})}),y&&A&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>h(!1),children:e.jsxs("div",{className:"bg-gray-900 rounded-xl border-2 border-red-500/30 max-w-md w-full p-6",onClick:P=>P.stopPropagation(),children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/20 flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fa-solid fa-trash text-3xl text-red-400"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Delete SOP"}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Are you sure you want to delete ",e.jsx("span",{className:"font-semibold text-white",children:A.title}),"?"]}),e.jsx("p",{className:"text-red-400 text-xs mt-2",children:"This action cannot be undone."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(f,{variant:"secondary",onClick:()=>h(!1),className:"flex-1",children:"Cancel"}),e.jsx(f,{variant:"danger",onClick:W,className:"flex-1",children:"Delete"})]})]})})]})}function Pt(){const[s,a]=l.useState([{id:"1",text:"Courage is not the absence of fear, but the triumph over it.",author:"Nelson Mandela",addedBy:"Chief Williams",dateAdded:"2024-10-15",isActive:!0},{id:"2",text:"The only thing necessary for the triumph of evil is for good men to do nothing.",author:"Edmund Burke",addedBy:"Chief Williams",dateAdded:"2024-10-10",isActive:!1},{id:"3",text:"In the end, we will remember not the words of our enemies, but the silence of our friends.",author:"Martin Luther King Jr.",addedBy:"Capt. Johnson",dateAdded:"2024-10-08",isActive:!1},{id:"4",text:"To serve and protect is not just a motto, it's a way of life.",author:"Unknown",addedBy:"Lt. Martinez",dateAdded:"2024-10-05",isActive:!1}]),[r,c]=l.useState(!1),[t,n]=l.useState(!1),[m,j]=l.useState(null),[b,v]=l.useState(!1),[p,g]=l.useState(null),i=s.find(u=>u.isActive),x=()=>{j({id:"",text:"",author:"",addedBy:"Current User",dateAdded:new Date().toISOString().split("T")[0],isActive:!1}),c(!0)},y=u=>{j({...u}),n(!0)},h=u=>{g(u),v(!0)},A=()=>{if(m){if(m.id)a(s.map(u=>u.id===m.id?m:u));else{const u={...m,id:Date.now().toString()};a([...s,u])}c(!1),n(!1),j(null)}},T=()=>{if(p){if(p.isActive&&s.length>1){const u=s.filter(R=>R.id!==p.id);u.length>0&&(u[0].isActive=!0),a(u)}else a(s.filter(u=>u.id!==p.id));v(!1),g(null)}},o=u=>{a(s.map(R=>({...R,isActive:R.id===u})))};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(I,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Quote of the Day"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Manage inspirational quotes for department display"})]}),e.jsx(f,{variant:"primary",size:"sm",onClick:x,icon:e.jsx("i",{className:"fa-solid fa-plus"}),children:"Add Quote"})]}),i&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-lg p-6 border-l-4 mb-6",style:{borderLeftColor:"var(--theme-accent)"},children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("i",{className:"fa-solid fa-quote-left text-3xl text-theme-accent opacity-50 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-lg text-white font-medium leading-relaxed mb-3",children:i.text}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-400",children:["— ",i.author]}),e.jsx(O,{variant:"success",children:"Active"})]})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 border-t border-gray-700/50 pt-3 mt-3",children:["Added by ",i.addedBy," on ",i.dateAdded]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-400",children:["Quote Rotation (",s.length,")"]}),s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fa-solid fa-quote-left text-3xl text-gray-500 mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No quotes added yet"})]}):s.map(u=>e.jsx("div",{className:`p-4 rounded-lg border transition-all ${u.isActive?"bg-theme-accent/10 border-theme-accent":"bg-gray-800/30 border-gray-700 hover:border-gray-600"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fa-solid fa-quote-left text-theme-icon opacity-50 mt-1 text-sm"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-white mb-2 line-clamp-2",children:u.text}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("p",{className:"text-xs text-gray-400",children:["— ",u.author]}),u.isActive&&e.jsx(O,{variant:"success",className:"!text-[10px] !px-1.5 !py-0.5",children:"Active"})]}),e.jsxs("div",{className:"text-[10px] text-gray-500",children:["Added by ",u.addedBy," • ",u.dateAdded]})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[!u.isActive&&e.jsx(f,{variant:"secondary",size:"sm",onClick:()=>o(u.id),className:"!p-1.5 !min-w-0",title:"Set as active",children:e.jsx("i",{className:"fa-solid fa-star text-xs"})}),e.jsx(f,{variant:"secondary",size:"sm",onClick:()=>y(u),className:"!p-1.5 !min-w-0",children:e.jsx("i",{className:"fa-solid fa-pen text-xs"})}),e.jsx(f,{variant:"danger",size:"sm",onClick:()=>h(u),className:"!p-1.5 !min-w-0",disabled:s.length===1,children:e.jsx("i",{className:"fa-solid fa-trash text-xs"})})]})]})},u.id))]})]}),e.jsx(I,{title:"Quote Rotation Tips",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-500/10 rounded-lg border border-blue-500/30",children:e.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[e.jsx("i",{className:"fa-solid fa-star text-yellow-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:"Active Quote"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Only one quote can be active at a time. Click the star to set a quote as active."})]})]})}),e.jsx("div",{className:"p-3 bg-green-500/10 rounded-lg border border-green-500/30",children:e.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[e.jsx("i",{className:"fa-solid fa-rotate text-green-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:"Rotation"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Maintain a library of quotes and rotate them regularly to keep officers inspired."})]})]})})]})}),r&&m&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>c(!1),children:e.jsxs("div",{className:"bg-gray-900 rounded-xl border-2 max-w-2xl w-full",style:{borderColor:"rgba(var(--theme-accent-rgb), 0.3)"},onClick:u=>u.stopPropagation(),children:[e.jsx("div",{className:"border-b p-4",style:{backgroundImage:"linear-gradient(to right, rgba(var(--theme-accent-rgb), 0.2), rgba(var(--theme-primary-rgb), 0.1))",borderBottomColor:"rgba(var(--theme-accent-rgb), 0.3)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Add Quote"}),e.jsx("button",{onClick:()=>c(!1),className:"w-8 h-8 rounded-lg bg-gray-800 hover:bg-gray-700 flex items-center justify-center transition-colors",children:e.jsx("i",{className:"fa-solid fa-times text-white"})})]})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1",children:"Quote Text"}),e.jsx("textarea",{value:m.text,onChange:u=>j({...m,text:u.target.value}),placeholder:"Enter the inspirational quote...",rows:4,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white text-sm focus:outline-none focus:border-active resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1",children:"Author"}),e.jsx(E,{value:m.author,onChange:u=>j({...m,author:u.target.value}),placeholder:"Unknown"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"setActive",checked:m.isActive,onChange:u=>j({...m,isActive:u.target.checked}),className:"w-4 h-4 rounded bg-gray-800 border-gray-700"}),e.jsx("label",{htmlFor:"setActive",className:"text-sm text-white",children:"Set as active quote"})]})]}),e.jsxs("div",{className:"border-t p-4 flex justify-end gap-2",style:{borderTopColor:"rgba(var(--theme-accent-rgb), 0.3)"},children:[e.jsx(f,{variant:"secondary",onClick:()=>c(!1),children:"Cancel"}),e.jsx(f,{variant:"primary",onClick:A,children:"Add Quote"})]})]})}),t&&m&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>n(!1),children:e.jsxs("div",{className:"bg-gray-900 rounded-xl border-2 max-w-2xl w-full",style:{borderColor:"rgba(var(--theme-accent-rgb), 0.3)"},onClick:u=>u.stopPropagation(),children:[e.jsx("div",{className:"border-b p-4",style:{backgroundImage:"linear-gradient(to right, rgba(var(--theme-accent-rgb), 0.2), rgba(var(--theme-primary-rgb), 0.1))",borderBottomColor:"rgba(var(--theme-accent-rgb), 0.3)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Edit Quote"}),e.jsx("button",{onClick:()=>n(!1),className:"w-8 h-8 rounded-lg bg-gray-800 hover:bg-gray-700 flex items-center justify-center transition-colors",children:e.jsx("i",{className:"fa-solid fa-times text-white"})})]})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1",children:"Quote Text"}),e.jsx("textarea",{value:m.text,onChange:u=>j({...m,text:u.target.value}),placeholder:"Enter the inspirational quote...",rows:4,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white text-sm focus:outline-none focus:border-active resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1",children:"Author"}),e.jsx(E,{value:m.author,onChange:u=>j({...m,author:u.target.value}),placeholder:"Unknown"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"setActiveEdit",checked:m.isActive,onChange:u=>j({...m,isActive:u.target.checked}),className:"w-4 h-4 rounded bg-gray-800 border-gray-700"}),e.jsx("label",{htmlFor:"setActiveEdit",className:"text-sm text-white",children:"Set as active quote"})]})]}),e.jsxs("div",{className:"border-t p-4 flex justify-end gap-2",style:{borderTopColor:"rgba(var(--theme-accent-rgb), 0.3)"},children:[e.jsx(f,{variant:"secondary",onClick:()=>n(!1),children:"Cancel"}),e.jsx(f,{variant:"primary",onClick:A,children:"Update Quote"})]})]})}),b&&p&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>v(!1),children:e.jsxs("div",{className:"bg-gray-900 rounded-xl border-2 border-red-500/30 max-w-md w-full p-6",onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/20 flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fa-solid fa-trash text-3xl text-red-400"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Delete Quote"}),e.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Are you sure you want to delete this quote?"}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3 mb-2",children:[e.jsxs("p",{className:"text-sm text-white italic",children:['"',p.text,'"']}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["— ",p.author]})]}),e.jsx("p",{className:"text-red-400 text-xs",children:"This action cannot be undone."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(f,{variant:"secondary",onClick:()=>v(!1),className:"flex-1",children:"Cancel"}),e.jsx(f,{variant:"danger",onClick:T,className:"flex-1",children:"Delete"})]})]})})]})}function Mt(){const[s,a]=l.useState("general"),r=ie(d=>d.theme),c=ie(d=>d.setTheme),[t,n]=l.useState({name:r.departmentName,abbreviation:"LSPD",themeColor:r.primaryColor,secondaryColor:r.secondaryColor,motto:"To Protect and Serve",logo:r.logoImage||""}),[m,j]=l.useState(r.departmentSubtitle),[b,v]=l.useState(r.logoType),[p,g]=l.useState(r.logoIcon),[i,x]=l.useState(r.logoImage),[y,h]=l.useState(r.accentColor),[A,T]=l.useState(r.buttonHighlight),[o,u]=l.useState(r.iconColor),[R,F]=l.useState(r.borderColor),D=ge.useRef(null),L=[{name:"LSPD Blue",primary:"#3b82f6",secondary:"#1e40af",accent:"#38bdf8",button:"#38bdf8",icon:"#38bdf8",border:"#2448b0"},{name:"BCSO Green",primary:"#22c55e",secondary:"#16a34a",accent:"#4ade80",button:"#4ade80",icon:"#4ade80",border:"#15803d"},{name:"SAHP Gold",primary:"#f59e0b",secondary:"#d97706",accent:"#fbbf24",button:"#fbbf24",icon:"#fbbf24",border:"#b45309"},{name:"FBI Navy",primary:"#1e3a8a",secondary:"#1e40af",accent:"#3b82f6",button:"#3b82f6",icon:"#3b82f6",border:"#1e3a8a"},{name:"Fire Red",primary:"#ef4444",secondary:"#dc2626",accent:"#f87171",button:"#f87171",icon:"#f87171",border:"#b91c1c"},{name:"EMS Purple",primary:"#a855f7",secondary:"#9333ea",accent:"#c084fc",button:"#c084fc",icon:"#c084fc",border:"#7e22ce"},{name:"DOJ Gray",primary:"#6b7280",secondary:"#4b5563",accent:"#9ca3af",button:"#9ca3af",icon:"#9ca3af",border:"#374151"},{name:"Custom",primary:t.themeColor,secondary:t.secondaryColor,accent:y,button:A,icon:o,border:R}],U=d=>{var M;const k=(M=d.target.files)==null?void 0:M[0];if(k){if(!k.type.match(/image\/(png|jpg|jpeg)/)){alert("Please upload a PNG or JPG image");return}if(k.size>2*1024*1024){alert("Image must be smaller than 2MB");return}const z=new FileReader;z.onload=$=>{var N;const Q=(N=$.target)==null?void 0:N.result;x(Q),n({...t,logo:Q})},z.readAsDataURL(k)}},W=()=>{c({primaryColor:t.themeColor,secondaryColor:t.secondaryColor,accentColor:y,buttonHighlight:A,iconColor:o,borderColor:R,departmentName:t.name,departmentSubtitle:m,logoType:b,logoIcon:p,logoImage:i}),alert("Department settings saved and applied!")},P=()=>{const d={name:"Project Sloth",abbreviation:"LSPD",themeColor:"#3b82f6",secondaryColor:"#1e40af",motto:"To Protect and Serve",logo:""};n(d),j("Mobile Data Terminal"),v("icon"),g("fa-shield-halved"),x(null),h("#38bdf8"),T("#38bdf8"),u("#38bdf8"),F("#2448b0"),D.current&&(D.current.value=""),c({primaryColor:d.themeColor,secondaryColor:d.secondaryColor,accentColor:"#38bdf8",buttonHighlight:"#38bdf8",iconColor:"#38bdf8",borderColor:"#2448b0",departmentName:d.name,departmentSubtitle:"Mobile Data Terminal",logoType:"icon",logoIcon:"fa-shield-halved",logoImage:null})},[J,K]=l.useState([{id:0,name:"Recruit",abbreviation:"RCT",pay:50,permissions:["create_reports","search"]},{id:1,name:"Officer",abbreviation:"OFC",pay:75,permissions:["create_reports","search","edit_profiles"]},{id:2,name:"Sergeant",abbreviation:"SGT",pay:100,permissions:["create_reports","search","edit_profiles","manage_bolos","approve_applications"]},{id:3,name:"Lieutenant",abbreviation:"LT",pay:125,permissions:["all_except_chief"]},{id:4,name:"Chief",abbreviation:"CHIEF",pay:150,permissions:["all","isboss","bankAuth"]}]),S=[{id:"general",label:"General",icon:"building",color:"blue"},{id:"ranks",label:"Rank Structure",icon:"ranking-star",color:"purple"},{id:"permissions",label:"Permissions",icon:"shield-halved",color:"green"}],G=(d,k)=>{if(d)switch(k){case"blue":return"bg-blue-500/20 border-blue-500 text-blue-400";case"purple":return"bg-purple-500/20 border-purple-500 text-purple-400";case"green":return"bg-green-500/20 border-green-500 text-green-400";default:return"bg-blue-500/20 border-blue-500 text-blue-400"}return"bg-gray-800/30 border-gray-700/50 text-gray-400 hover:bg-gray-700/40 hover:border-gray-600"};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex gap-2",children:S.map(d=>e.jsxs("button",{onClick:()=>a(d.id),className:`
              px-3 py-2 rounded-lg border-2 font-semibold text-xs
              transition-all duration-200 flex items-center gap-1.5
              ${G(s===d.id,d.color)}
            `,children:[e.jsx("i",{className:`fa-solid fa-${d.icon}`}),d.label]},d.id))}),s==="general"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-3",children:[e.jsxs(I,{children:[e.jsxs("h4",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-blue-500/20 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-building text-blue-400 text-xs"})}),"Department Identity"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-semibold text-gray-400 mb-1.5",children:[e.jsx("i",{className:"fa-solid fa-signature mr-1"}),"Department Name"]}),e.jsx(E,{value:t.name,onChange:d=>n({...t,name:d.target.value}),placeholder:"Los Santos Police Department",className:"text-sm h-9"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-semibold text-gray-400 mb-1.5",children:[e.jsx("i",{className:"fa-solid fa-tag mr-1"}),"Abbreviation"]}),e.jsx(E,{value:t.abbreviation,onChange:d=>n({...t,abbreviation:d.target.value}),placeholder:"LSPD",maxLength:6,className:"text-sm h-9"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-semibold text-gray-400 mb-1.5",children:[e.jsx("i",{className:"fa-solid fa-align-left mr-1"}),"Department Subtext"]}),e.jsx(E,{value:m,onChange:d=>j(d.target.value),placeholder:"Serving the community with honor and integrity",className:"text-sm h-9"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Appears below department name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-semibold text-gray-400 mb-1.5",children:[e.jsx("i",{className:"fa-solid fa-quote-left mr-1"}),"Department Motto"]}),e.jsx(E,{value:t.motto,onChange:d=>n({...t,motto:d.target.value}),placeholder:"To Protect and Serve",className:"text-sm h-9"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Official department motto"})]})]})]}),e.jsxs(I,{children:[e.jsxs("h4",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-purple-500/20 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-palette text-purple-400 text-xs"})}),"Color Scheme & Branding"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-2",children:"Color Presets"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:L.map(d=>e.jsxs("button",{onClick:()=>{d.name!=="Custom"&&(n({...t,themeColor:d.primary,secondaryColor:d.secondary}),h(d.accent),T(d.button),u(d.icon),F(d.border))},className:`p-2 rounded-lg border transition-all ${t.themeColor===d.primary&&t.secondaryColor===d.secondary?"border-blue-400 bg-blue-500/20":"border-gray-700 bg-gray-800/30 hover:border-gray-600"}`,title:d.name,children:[e.jsxs("div",{className:"flex gap-1 mb-1.5",children:[e.jsx("div",{className:"flex-1 h-4 rounded",style:{background:d.primary}}),e.jsx("div",{className:"flex-1 h-4 rounded",style:{background:d.secondary}})]}),e.jsx("p",{className:"text-[0.65rem] text-gray-400 truncate",children:d.name})]},d.name))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1.5",children:"Primary Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:t.themeColor,onChange:d=>n({...t,themeColor:d.target.value}),className:"w-10 h-9 rounded-lg cursor-pointer border-2 border-gray-700"}),e.jsx(E,{value:t.themeColor,onChange:d=>n({...t,themeColor:d.target.value}),className:"flex-1 text-sm h-9",placeholder:"#3b82f6"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Main header & gradient color"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1.5",children:"Secondary Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:t.secondaryColor,onChange:d=>n({...t,secondaryColor:d.target.value}),className:"w-10 h-9 rounded-lg cursor-pointer border-2 border-gray-700"}),e.jsx(E,{value:t.secondaryColor,onChange:d=>n({...t,secondaryColor:d.target.value}),className:"flex-1 text-sm h-9",placeholder:"#1e40af"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Supporting gradient color"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1.5",children:"Accent Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:y,onChange:d=>h(d.target.value),className:"w-10 h-9 rounded-lg cursor-pointer border-2 border-gray-700"}),e.jsx(E,{value:y,onChange:d=>h(d.target.value),className:"flex-1 text-sm h-9",placeholder:"#38bdf8"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cards & general accents"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1.5",children:"Button Highlight"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:A,onChange:d=>T(d.target.value),className:"w-10 h-9 rounded-lg cursor-pointer border-2 border-gray-700"}),e.jsx(E,{value:A,onChange:d=>T(d.target.value),className:"flex-1 text-sm h-9",placeholder:"#38bdf8"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hover & active button color"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1.5",children:"Icon Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:o,onChange:d=>u(d.target.value),className:"w-10 h-9 rounded-lg cursor-pointer border-2 border-gray-700"}),e.jsx(E,{value:o,onChange:d=>u(d.target.value),className:"flex-1 text-sm h-9",placeholder:"#38bdf8"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Active icon & indicator color"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-1.5",children:"Border Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:R,onChange:d=>F(d.target.value),className:"w-10 h-9 rounded-lg cursor-pointer border-2 border-gray-700"}),e.jsx(E,{value:R,onChange:d=>F(d.target.value),className:"flex-1 text-sm h-9",placeholder:"#2448b0"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Active borders & outlines"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-2",children:"Department Logo"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsxs("button",{onClick:()=>v("icon"),className:`flex-1 p-2 rounded-lg border transition-all text-xs ${b==="icon"?"border-blue-500 bg-blue-500/20 text-white":"border-gray-700 bg-gray-800/30 text-gray-400 hover:border-gray-600"}`,children:[e.jsx("i",{className:"fa-solid fa-icons mr-1"}),"Icon"]}),e.jsxs("button",{onClick:()=>v("image"),className:`flex-1 p-2 rounded-lg border transition-all text-xs ${b==="image"?"border-blue-500 bg-blue-500/20 text-white":"border-gray-700 bg-gray-800/30 text-gray-400 hover:border-gray-600"}`,children:[e.jsx("i",{className:"fa-solid fa-image mr-1"}),"Custom"]})]}),b==="icon"?e.jsx(E,{value:p,onChange:d=>g(d.target.value),placeholder:"fa-shield-halved",className:"text-sm h-9"}):e.jsxs("div",{children:[e.jsx("input",{ref:D,type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:U,className:"hidden"}),i?e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-800/30 rounded-lg border border-gray-700",children:[e.jsx("img",{src:i,alt:"Logo",className:"w-8 h-8 object-contain rounded"}),e.jsx("span",{className:"text-xs text-gray-400 flex-1",children:"Custom logo uploaded"}),e.jsx("button",{onClick:()=>{x(null),D.current&&(D.current.value="")},className:"text-red-400 hover:text-red-300 text-xs",children:e.jsx("i",{className:"fa-solid fa-trash"})})]}):e.jsxs("button",{onClick:()=>{var d;return(d=D.current)==null?void 0:d.click()},className:"w-full p-3 rounded-lg border-2 border-dashed border-gray-700 bg-gray-800/30 hover:border-blue-500 transition-all text-xs text-gray-400",children:[e.jsx("i",{className:"fa-solid fa-upload mr-2"}),"Upload Logo (PNG/JPG, max 2MB)"]})]})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-gradient-to-r from-gray-800/50 to-gray-700/50 border border-gray-700",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2 font-semibold",children:"Color Preview"}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsx("div",{className:"h-10 rounded-lg border-2",style:{background:t.themeColor,borderColor:t.themeColor}}),e.jsx("div",{className:"h-10 rounded-lg border-2",style:{background:t.secondaryColor,borderColor:t.secondaryColor}}),e.jsx("div",{className:"h-10 rounded-lg border-2",style:{background:`linear-gradient(135deg, ${t.themeColor}, ${t.secondaryColor})`,borderColor:t.themeColor}}),e.jsx("div",{className:"h-10 rounded-lg border-2 flex items-center justify-center",style:{background:`${t.themeColor}20`,borderColor:t.themeColor},children:b==="image"&&i?e.jsx("img",{src:i,alt:"Logo",className:"w-6 h-6 object-contain"}):e.jsx("i",{className:`fa-solid ${p} text-white`})})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(I,{children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-400 mb-2",children:"Live Preview"}),e.jsxs("div",{className:"relative rounded-lg p-4 border-2 overflow-hidden",style:{borderColor:t.themeColor,background:`linear-gradient(135deg, ${t.themeColor}15, ${t.secondaryColor}10)`},children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 rounded-full blur-2xl opacity-20",style:{background:t.themeColor}}),e.jsxs("div",{className:"relative flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center overflow-hidden border-2",style:{background:`linear-gradient(135deg, ${t.themeColor}, ${t.secondaryColor})`,borderColor:t.themeColor},children:b==="image"&&i?e.jsx("img",{src:i,alt:"Logo",className:"w-full h-full object-contain p-1"}):e.jsx("i",{className:`fa-solid ${p} text-white text-xl`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs font-bold text-gray-400 mb-0.5",children:t.abbreviation}),e.jsx("div",{className:"text-base font-bold text-white mb-0.5",children:t.name}),e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:m}),e.jsxs("div",{className:"text-xs italic",style:{color:t.themeColor},children:['"',t.motto,'"']})]})]})]})]}),e.jsx(I,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{variant:"primary",className:"w-full text-xs py-2",icon:e.jsx("i",{className:"fa-solid fa-save text-xs"}),onClick:W,children:"Save Changes"}),e.jsx(f,{variant:"secondary",className:"w-full text-xs py-2",icon:e.jsx("i",{className:"fa-solid fa-rotate-left text-xs"}),onClick:P,children:"Reset to Default"}),e.jsx(f,{variant:"secondary",className:"w-full text-xs py-2",icon:e.jsx("i",{className:"fa-solid fa-file-export text-xs"}),children:"Export Config"})]})}),e.jsxs(I,{children:[e.jsxs("h4",{className:"text-xs font-semibold text-gray-400 mb-2",children:[e.jsx("i",{className:"fa-solid fa-circle-info mr-1.5"}),"Information"]}),e.jsxs("div",{className:"space-y-1.5 text-xs text-gray-400",children:[e.jsx("p",{children:"• Changes take effect immediately for all officers"}),e.jsx("p",{children:"• Color scheme applies to badges, alerts, and UI elements"}),e.jsx("p",{children:"• Motto appears in login screen and reports"})]})]})]})]}),s==="ranks"&&e.jsxs(I,{children:[e.jsxs("h4",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-purple-500/20 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-ranking-star text-purple-400 text-xs"})}),"Rank Structure"]}),e.jsx("div",{className:"space-y-1.5",children:J.map(d=>e.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-2.5 flex items-center justify-between hover:bg-gray-800/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsxs(O,{variant:"info",className:"text-xs",children:["LV",d.id]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-white text-sm",children:d.name}),e.jsxs("div",{className:"text-xs text-gray-400",children:["$",d.pay.toLocaleString(),"/hr"]})]})]}),e.jsxs("div",{className:"flex gap-1.5",children:[e.jsx(f,{variant:"secondary",size:"sm",className:"h-7 w-7 p-0",children:e.jsx("i",{className:"fa-solid fa-pen text-xs"})}),e.jsx(f,{variant:"danger",size:"sm",className:"h-7 w-7 p-0",children:e.jsx("i",{className:"fa-solid fa-trash text-xs"})})]})]},d.id))}),e.jsx(f,{variant:"primary",className:"mt-3 text-xs py-2",icon:e.jsx("i",{className:"fa-solid fa-plus text-xs"}),children:"Add Rank"})]}),s==="permissions"&&e.jsxs(I,{children:[e.jsxs("h4",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-green-500/20 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-shield-halved text-green-400 text-xs"})}),"Permission System"]}),e.jsx("div",{className:"text-xs text-gray-400 mb-3",children:"Set the minimum grade level required for each permission. Supervisors (grade 4+) typically have access to most features."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:["Create Reports","Edit Reports","Delete Reports","Create Profiles","Edit Profiles","Manage BOLOs","Manage Warrants","Access Evidence","Chief Menu Access"].map((d,k)=>e.jsxs("div",{className:"flex justify-between items-center p-2.5 bg-gray-800/30 rounded-lg",children:[e.jsx("span",{className:"text-xs text-white",children:d}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Grade:"}),e.jsx("input",{type:"number",min:"0",max:"9",defaultValue:k<3?1:k<6?3:4,className:"w-14 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-xs text-center"})]})]},k))}),e.jsx(f,{variant:"primary",className:"mt-3 text-xs py-2",icon:e.jsx("i",{className:"fa-solid fa-save text-xs"}),children:"Save Permissions"})]})]})}function Lt(){return e.jsxs("div",{className:"space-y-6",children:[e.jsx(I,{title:"System Information",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-gray-800/30 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-400 uppercase mb-1",children:"Version"}),e.jsx("p",{className:"text-sm text-white font-medium",children:"PS-MDT v2.0.0"})]}),e.jsxs("div",{className:"p-3 bg-gray-800/30 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-400 uppercase mb-1",children:"Last Updated"}),e.jsx("p",{className:"text-sm text-white font-medium",children:"January 15, 2025"})]}),e.jsxs("div",{className:"p-3 bg-gray-800/30 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-400 uppercase mb-1",children:"Department"}),e.jsx("p",{className:"text-sm text-white font-medium",children:"Los Santos Police Department"})]}),e.jsxs("div",{className:"p-3 bg-gray-800/30 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-400 uppercase mb-1",children:"Server"}),e.jsx("p",{className:"text-sm text-white font-medium",children:"NightDriveRP"})]}),e.jsxs("div",{className:"p-3 bg-gray-800/30 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-400 uppercase mb-1",children:"Framework"}),e.jsx("p",{className:"text-sm text-white font-medium",children:"QBX Core"})]}),e.jsxs("div",{className:"p-3 bg-gray-800/30 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-400 uppercase mb-1",children:"Resource Name"}),e.jsx("p",{className:"text-sm text-white font-medium",children:"ps-mdt"})]})]})}),e.jsx(I,{title:"About",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-gradient-to-br from-blue-500/20 to-blue-900/20 border-2 border-blue-500/50 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-shield-halved text-4xl text-blue-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Project Sloth MDT"}),e.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Modern Mobile Data Terminal System"}),e.jsxs("div",{className:"flex justify-center gap-4 text-xs text-gray-500 mb-6",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-brands fa-react text-blue-400"}),"React 18"]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-code text-blue-400"}),"TypeScript"]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-wind text-cyan-400"}),"Tailwind CSS"]})]}),e.jsxs("div",{className:"border-t border-gray-700 pt-6 mt-6",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Designed for law enforcement roleplay servers"}),e.jsxs("div",{className:"flex justify-center gap-3",children:[e.jsxs(f,{variant:"secondary",size:"sm",children:[e.jsx("i",{className:"fa-brands fa-github mr-2"}),"Documentation"]}),e.jsxs(f,{variant:"secondary",size:"sm",children:[e.jsx("i",{className:"fa-solid fa-heart mr-2"}),"Support"]})]})]})]})}),e.jsx(I,{title:"Administrative Actions",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs(f,{variant:"secondary",className:"w-full justify-start",children:[e.jsx("i",{className:"fa-solid fa-download mr-2"}),"Export System Data"]}),e.jsxs(f,{variant:"secondary",className:"w-full justify-start",children:[e.jsx("i",{className:"fa-solid fa-database mr-2"}),"Backup Database"]}),e.jsxs(f,{variant:"secondary",className:"w-full justify-start",children:[e.jsx("i",{className:"fa-solid fa-chart-line mr-2"}),"View Analytics"]}),e.jsxs(f,{variant:"secondary",className:"w-full justify-start",children:[e.jsx("i",{className:"fa-solid fa-file-contract mr-2"}),"Generate Reports"]}),e.jsxs(f,{variant:"secondary",className:"w-full justify-start",children:[e.jsx("i",{className:"fa-solid fa-clock-rotate-left mr-2"}),"Audit Logs"]}),e.jsxs(f,{variant:"secondary",className:"w-full justify-start",children:[e.jsx("i",{className:"fa-solid fa-server mr-2"}),"System Health"]})]})}),e.jsx(I,{title:"License & Credits",children:e.jsxs("div",{className:"space-y-4 text-sm text-gray-400",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white mb-2",children:"Development Team"}),e.jsx("p",{children:"Project Sloth • NightDrive RP Development Team"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white mb-2",children:"Special Thanks"}),e.jsx("p",{children:"Community contributors, beta testers, and all server administrators who provided feedback during development."})]}),e.jsx("div",{className:"border-t border-gray-700 pt-4",children:e.jsx("p",{className:"text-xs text-gray-500",children:"© 2025 Project Sloth MDT. All rights reserved."})})]})})]})}function Tt(){var S,G;const s=ie(d=>d.officer),[a,r]=l.useState("department"),[c,t]=l.useState([]),[n,m]=l.useState([]),[j,b]=l.useState([]),[v,p]=l.useState(""),[g,i]=l.useState(!1),[x,y]=l.useState(!1),[h,A]=l.useState(null),[T,o]=l.useState([]),u=l.useRef(null),R=l.useRef(null),F=()=>{var d;(d=u.current)==null||d.scrollIntoView({behavior:"smooth"})};l.useEffect(()=>{F()},[c,n,j]),l.useEffect(()=>{R.current&&R.current.focus()},[a]),l.useEffect(()=>{L(),a==="dm"&&D()},[a]),l.useEffect(()=>{const d=re("deptChatMessage",N=>{N.recipientId||t(V=>[...V,N])}),k=re("dispatchChatMessage",N=>{m(V=>[...V,N])}),M=re("dmChatMessage",N=>{N.recipientId&&b(V=>[...V,N])}),z=re("deptChatHistory",N=>{t(N||[])}),$=re("dispatchChatHistory",N=>{m(N||[])}),Q=re("dmChatHistory",N=>{b(N||[])});return()=>{d(),k(),M(),z(),$(),Q()}},[]);const D=async()=>{if(oe()||Y()){o([{citizenid:"ABC12345",callsign:"1A-12",firstname:"John",lastname:"Mitchell",rank:"Officer"},{citizenid:"DEF67890",callsign:"1A-15",firstname:"Sarah",lastname:"Rodriguez",rank:"Sergeant"},{citizenid:"GHI13579",callsign:"2A-01",firstname:"Michael",lastname:"Hayes",rank:"Lieutenant"}]);return}try{const d=await H("getOnlineOfficers");if(d.success&&d.data){const k=d.data.filter(M=>M.citizenid!==(s==null?void 0:s.citizenid));o(k)}}catch(d){console.error("[MDT] Failed to load officers:",d)}},L=async()=>{if(oe()||Y()){t([{id:1,officerId:"ABC12345",officerName:"J. Mitchell",callsign:"1A-12",message:"All units, be advised - traffic stop on Route 68",timestamp:new Date(Date.now()-10*6e4).toISOString()},{id:2,officerId:"DEF67890",officerName:"S. Rodriguez",callsign:"1A-15",message:"10-4, responding to backup",timestamp:new Date(Date.now()-8*6e4).toISOString()},{id:3,officerId:"GHI13579",officerName:"M. Hayes",callsign:"2A-01",message:"Dispatch, show me 10-7 for Code 7",timestamp:new Date(Date.now()-5*6e4).toISOString()}]),m([{id:1,officerId:"dispatch",officerName:"Dispatch",callsign:"DISP",message:"10-15 - Robbery in progress at 24/7 on Grove Street",timestamp:new Date(Date.now()-15*6e4).toISOString()}]);return}try{let d;a==="department"?(d=await H("getDepartmentChat"),d.success&&d.data&&t(d.data)):a==="dispatch"?(d=await H("getDispatchChat"),d.success&&d.data&&m(d.data)):a==="dm"&&h&&(d=await H("getDMChat",{recipientId:h.citizenid}),d.success&&d.data&&b(d.data))}catch(d){console.error("[MDT] Failed to load chat history:",d)}},U=async()=>{if(!v.trim()||g||!s)return;if(a==="dm"&&!h){alert("Please select an officer to message");return}const d=v.trim();p(""),i(!0);try{let k;a==="department"?k=await H("sendDepartmentChat",{message:d}):a==="dispatch"?k=await H("sendDispatchChat",{message:d}):a==="dm"&&h&&(k=await H("sendDMChat",{message:d,recipientId:h.citizenid})),k&&!k.success&&(p(d),alert("Failed to send message"))}catch(k){console.error("[MDT] Failed to send message:",k),p(d),alert("Failed to send message")}finally{i(!1)}},W=d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),U())},P=d=>{const k=new Date(d),z=new Date().getTime()-k.getTime(),$=Math.floor(z/6e4);return $<1?"Just now":$<60?`${$}m ago`:$<1440?`${Math.floor($/60)}h ago`:k.toLocaleDateString()},K=a==="department"?c:a==="dispatch"?n:a==="dm"?h?j.filter(d=>d.officerId===(s==null?void 0:s.citizenid)&&d.recipientId===h.citizenid||d.officerId===h.citizenid&&d.recipientId===(s==null?void 0:s.citizenid)):[]:[];return e.jsxs("div",{className:"w-full h-full flex gap-0 overflow-hidden",children:[e.jsxs("div",{className:"w-[240px] flex-shrink-0 bg-[rgba(11,19,34,0.9)] border-r flex flex-col",style:{borderColor:"rgba(var(--theme-border-rgb),0.3)"},children:[e.jsx("div",{className:"p-4 border-b",style:{borderColor:"rgba(var(--theme-border-rgb),0.2)"},children:e.jsxs("h2",{className:"text-white font-bold text-sm flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-tower-cell text-theme-accent"}),"Police Communications"]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[e.jsx("div",{className:"px-2 py-1 mb-1",children:e.jsx("p",{className:"text-xs font-semibold text-[rgba(255,255,255,0.5)] uppercase tracking-wider",children:"Text Channels"})}),e.jsxs("button",{onClick:()=>r("department"),className:`w-full px-2 py-2 mb-1 rounded flex items-center gap-2 text-left transition-all ${a==="department"?"bg-[rgba(var(--theme-accent-rgb),0.2)] text-white":"text-[rgba(255,255,255,0.6)] hover:bg-[rgba(255,255,255,0.05)] hover:text-white"}`,children:[e.jsx("i",{className:"fa-solid fa-hashtag text-sm"}),e.jsx("span",{className:"text-sm font-medium",children:"department"})]}),e.jsxs("button",{onClick:()=>r("dispatch"),className:`w-full px-2 py-2 mb-1 rounded flex items-center gap-2 text-left transition-all ${a==="dispatch"?"bg-[rgba(var(--theme-accent-rgb),0.2)] text-white":"text-[rgba(255,255,255,0.6)] hover:bg-[rgba(255,255,255,0.05)] hover:text-white"}`,children:[e.jsx("i",{className:"fa-solid fa-hashtag text-sm"}),e.jsx("span",{className:"text-sm font-medium",children:"dispatch"})]}),e.jsx("div",{className:"px-2 py-1 mt-4 mb-1",children:e.jsx("p",{className:"text-xs font-semibold text-[rgba(255,255,255,0.5)] uppercase tracking-wider",children:"Direct Messages"})}),e.jsxs("button",{onClick:()=>{r("dm"),y(!0)},className:"w-full px-2 py-2 mb-2 rounded flex items-center gap-2 text-left transition-all text-[rgba(255,255,255,0.6)] hover:bg-[rgba(255,255,255,0.05)] hover:text-white",children:[e.jsx("i",{className:"fa-solid fa-plus text-sm"}),e.jsx("span",{className:"text-sm font-medium",children:"New Message"})]}),h&&e.jsxs("button",{onClick:()=>r("dm"),className:`w-full px-2 py-2 mb-1 rounded flex items-center gap-2 text-left transition-all ${a==="dm"?"bg-[rgba(var(--theme-accent-rgb),0.2)] text-white":"text-[rgba(255,255,255,0.6)] hover:bg-[rgba(255,255,255,0.05)] hover:text-white"}`,children:[e.jsxs("div",{className:"w-6 h-6 rounded-full bg-[rgba(var(--theme-accent-rgb),0.3)] flex items-center justify-center text-xs font-bold",children:[h.firstname[0],h.lastname[0]]}),e.jsxs("span",{className:"text-sm font-medium truncate",children:[h.firstname," ",h.lastname]})]})]}),e.jsx("div",{className:"p-3 bg-[rgba(0,0,0,0.2)] border-t",style:{borderColor:"rgba(var(--theme-border-rgb),0.2)"},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-[rgba(var(--theme-accent-rgb),0.4)] to-[rgba(var(--theme-primary-rgb),0.5)] flex items-center justify-center text-xs font-bold text-white",children:[(S=s==null?void 0:s.firstname)==null?void 0:S[0],(G=s==null?void 0:s.lastname)==null?void 0:G[0]]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-xs font-semibold text-white truncate",children:[s==null?void 0:s.firstname," ",s==null?void 0:s.lastname]}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.5)] truncate",children:s==null?void 0:s.callsign})]})]})})]}),a==="dm"&&x&&e.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-[rgba(0,0,0,0.7)] flex items-center justify-center z-50",onClick:()=>y(!1),children:e.jsxs(ve.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-[rgba(15,23,42,0.98)] border rounded-lg p-6 max-w-2xl w-full mx-4",style:{borderColor:"rgba(var(--theme-border-rgb),0.4)"},onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Select Officer"}),e.jsx("button",{onClick:()=>y(!1),className:"w-8 h-8 rounded-lg flex items-center justify-center text-[rgba(255,255,255,0.6)] hover:text-white hover:bg-[rgba(255,255,255,0.1)] transition-all",children:e.jsx("i",{className:"fa-solid fa-times"})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 max-h-[400px] overflow-y-auto",children:T.map(d=>e.jsx("button",{onClick:()=>{A(d),y(!1)},className:"text-left px-4 py-3 rounded-lg text-sm transition-all bg-[rgba(11,19,34,0.6)] border text-[rgba(255,255,255,0.8)] hover:bg-[rgba(var(--theme-accent-rgb),0.2)] hover:border-[rgba(var(--theme-accent-rgb),0.5)]",style:{borderColor:"rgba(var(--theme-border-rgb),0.2)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-10 h-10 rounded-full bg-[rgba(var(--theme-accent-rgb),0.3)] flex items-center justify-center text-sm font-bold",children:[d.firstname[0],d.lastname[0]]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-white",children:[e.jsx("span",{className:"text-theme-accent",children:d.callsign}),e.jsxs("span",{className:"ml-2",children:[d.firstname," ",d.lastname]})]}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.5)]",children:d.rank})]})]})},d.citizenid))})]})}),e.jsx(Z,{fullScreen:!1,scopeName:"ChatArea",children:e.jsxs("div",{className:"flex-1 flex flex-col bg-[rgba(15,23,42,0.5)]",children:[e.jsx("div",{className:"p-4 border-b flex items-center gap-3",style:{borderColor:"rgba(var(--theme-border-rgb),0.2)"},children:a==="dm"&&h?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-8 h-8 rounded-full bg-[rgba(var(--theme-accent-rgb),0.3)] flex items-center justify-center text-sm font-bold",children:[h.firstname[0],h.lastname[0]]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-white font-bold text-base",children:[h.firstname," ",h.lastname]}),e.jsxs("p",{className:"text-xs text-[rgba(255,255,255,0.5)]",children:[h.callsign," • ",h.rank]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-hashtag text-[rgba(255,255,255,0.6)]"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold text-base",children:a}),e.jsx("p",{className:"text-xs text-[rgba(255,255,255,0.5)]",children:a==="department"?"Department communications":"All LEO dispatch channel"})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[K.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-[rgba(255,255,255,0.5)]",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-[rgba(var(--theme-accent-rgb),0.1)] flex items-center justify-center mb-4",children:e.jsx("i",{className:`fa-solid ${a==="department"||a==="dispatch"?"fa-hashtag":"fa-at"} text-2xl text-[rgba(255,255,255,0.3)]`})}),e.jsxs("h4",{className:"text-lg font-bold text-white mb-2",children:["Welcome to #",a]}),e.jsx("p",{className:"text-sm",children:a==="dm"&&!h?"Select an officer to start a conversation":"This is the beginning of your conversation"})]}):K.map((d,k)=>{const M=k>0?K[k-1]:null,z=!M||M.officerId!==d.officerId;return s&&(d.officerId,s.citizenid),e.jsxs("div",{className:`flex gap-3 hover:bg-[rgba(255,255,255,0.02)] -mx-2 px-2 py-1 rounded ${!z&&"mt-0"}`,children:[z?e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[rgba(var(--theme-accent-rgb),0.3)] to-[rgba(var(--theme-primary-rgb),0.4)] flex items-center justify-center text-sm font-bold text-white flex-shrink-0",children:d.officerName.split(" ").map($=>$[0]).join("")}):e.jsx("div",{className:"w-10 flex-shrink-0 flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.3)] opacity-0 group-hover:opacity-100",children:P(d.timestamp)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[z&&e.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-white",children:d.officerName}),e.jsx("span",{className:"text-xs font-semibold text-theme-accent",children:d.callsign}),e.jsx("span",{className:"text-xs text-[rgba(255,255,255,0.4)]",children:P(d.timestamp)})]}),e.jsx("p",{className:"text-sm text-[rgba(255,255,255,0.9)] leading-relaxed break-words",children:d.message})]})]},d.id)}),e.jsx("div",{ref:u})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex gap-2 items-center bg-[rgba(11,19,34,0.6)] border rounded-lg px-3 py-2",style:{borderColor:"rgba(var(--theme-border-rgb),0.3)"},children:[e.jsx("button",{className:"text-[rgba(255,255,255,0.5)] hover:text-white transition-all p-2",children:e.jsx("i",{className:"fa-solid fa-plus text-lg"})}),e.jsx("input",{ref:R,type:"text",value:v,onChange:d=>p(d.target.value),onKeyPress:W,placeholder:a==="dm"&&!h?"Select an officer to start chatting":`Message ${a==="dm"?h==null?void 0:h.firstname:"#"+a}`,className:"flex-1 bg-transparent text-sm text-white placeholder:text-[rgba(255,255,255,0.4)] focus:outline-none",disabled:g||!s||a==="dm"&&!h,maxLength:500}),e.jsx("button",{onClick:U,disabled:!v.trim()||g||!s||a==="dm"&&!h,className:"text-[rgba(255,255,255,0.5)] hover:text-theme-accent transition-all disabled:opacity-30 disabled:cursor-not-allowed p-2",children:g?e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-lg"}):e.jsx("i",{className:"fa-solid fa-paper-plane text-lg"})})]}),e.jsxs("p",{className:"text-xs text-[rgba(255,255,255,0.4)] mt-2 px-1",children:[v.length,"/500"]})]})]})})]})}function Et(){const[s,a]=l.useState([]),[r,c]=l.useState(0),[t,n]=l.useState(1),[m,j]=l.useState(25),[b,v]=l.useState(""),[p,g]=l.useState(!1),[i,x]=l.useState(null),y=async(u=t,R=m,F=b)=>{g(!0),x(null);try{const D=await H("getClientErrors",{page:u,perPage:R,search:F});if(D&&D.success){const L=D.data;a(L.rows||[]),c(L.total||0)}else x((D==null?void 0:D.error)||"Failed to fetch logs")}catch{x("Network error while fetching logs")}finally{g(!1)}};l.useEffect(()=>{y(1,m,b)},[]);const h=async()=>{n(1),await y(1,m,b)},A=async u=>{j(u),n(1),await y(1,u,b)},T=async u=>{n(u),await y(u,m,b)},o=u=>{if(!u)return"-";try{return new Date(u).toLocaleString()}catch{return u}};return e.jsx(Z,{fullScreen:!1,scopeName:"Client Errors",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{placeholder:"Search logs...",value:b,onChange:u=>v(u.target.value),onKeyPress:u=>u.key==="Enter"&&h()}),e.jsxs(f,{variant:"primary",onClick:h,disabled:p,children:[e.jsx("i",{className:`fa-solid ${p?"fa-spinner fa-spin":"fa-search"}`}),"Search"]}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[e.jsx("div",{className:"text-sm opacity-70",children:"Per Page"}),e.jsxs("select",{value:m,onChange:u=>A(parseInt(u.target.value,10)),className:"bg-[rgba(10,16,30,0.6)] border rounded p-1",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]})]}),e.jsxs(I,{children:[i&&e.jsx("div",{className:"p-2 bg-red-600/10 border border-red-600/20 rounded",children:i}),e.jsx("div",{className:"w-full overflow-auto",children:e.jsxs("table",{className:"w-full table-auto text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-sm text-[#c3cfdc]",children:[e.jsx("th",{className:"px-2 py-2",children:"ID"}),e.jsx("th",{className:"px-2 py-2",children:"Time"}),e.jsx("th",{className:"px-2 py-2",children:"Message"})]})}),e.jsxs("tbody",{children:[s.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"p-4 text-center text-sm text-[#9aa7bd]",children:"No logs found"})}),s.map(u=>e.jsxs("tr",{className:"hover:bg-[rgba(255,255,255,0.02)]",children:[e.jsx("td",{className:"px-2 py-2 text-sm",children:u.id}),e.jsx("td",{className:"px-2 py-2 text-sm",children:o(u.time)}),e.jsx("td",{className:"px-2 py-2 text-sm break-words",children:u.text})]},u.id))]})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsxs("div",{className:"text-sm text-[#9aa7bd]",children:["Showing ",s.length," of ",r," total"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{variant:"secondary",onClick:()=>T(Math.max(1,t-1)),disabled:t<=1,children:"Prev"}),e.jsxs("div",{className:"px-3 py-1 rounded bg-[rgba(15,23,42,0.5)]",children:["Page ",t]}),e.jsx(f,{variant:"secondary",onClick:()=>T(Math.min(Math.ceil(r/m)||1,t+1)),disabled:t>=Math.ceil(r/m),children:"Next"})]})]})]})]})})}const It=({visible:s})=>{const[a,r]=l.useState([]);l.useEffect(()=>{const n=m=>{if(m.data.action==="showToast"){const j={...m.data.data,id:Date.now().toString()};r(b=>[...b,j]),setTimeout(()=>{r(b=>b.filter(v=>v.id!==j.id))},m.data.data.duration)}};return window.addEventListener("message",n),()=>{window.removeEventListener("message",n)}},[]);const c=n=>{r(m=>m.filter(j=>j.id!==n))},t=(n,m)=>({announcement:{bg:"bg-blue-900/95 backdrop-blur-sm",border:"border-blue-400",icon:"📢",iconColor:"text-blue-400"},emergency:{bg:m?"bg-red-900/98 backdrop-blur-sm animate-pulse":"bg-red-900/95 backdrop-blur-sm",border:"border-red-400",icon:"🚨",iconColor:"text-red-400"},recall:{bg:"bg-yellow-900/95 backdrop-blur-sm",border:"border-yellow-400",icon:"🔔",iconColor:"text-yellow-400"},meeting:{bg:"bg-indigo-900/95 backdrop-blur-sm",border:"border-indigo-400",icon:"📅",iconColor:"text-indigo-400"},commendation:{bg:"bg-green-900/95 backdrop-blur-sm",border:"border-green-400",icon:"🏆",iconColor:"text-green-400"}})[n];return s?e.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 pointer-events-auto max-w-md",children:e.jsx(ze,{mode:"sync",children:a.map(n=>{const m=t(n.type,n.urgent);return e.jsxs(ve.div,{initial:{opacity:0,x:400,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:400,scale:.8},transition:{type:"spring",stiffness:300,damping:30},className:`rounded-lg shadow-2xl overflow-hidden border-l-4 ${m.bg} ${m.border} w-96 relative`,children:[e.jsx("button",{onClick:()=>c(n.id),className:"absolute top-2 right-2 text-white/70 hover:text-white transition-colors z-10 text-lg leading-none","aria-label":"Close notification",children:"×"}),e.jsxs("div",{className:"flex items-start gap-4 p-4 pr-10",children:[e.jsx("div",{className:`text-2xl mt-0.5 flex-shrink-0 ${n.urgent?"animate-bounce":""}`,children:m.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-white font-bold text-base mb-1 leading-tight",children:n.title}),e.jsx("p",{className:"text-white/80 text-sm mb-2 font-medium leading-tight",children:n.subtitle}),e.jsx("p",{className:"text-white/70 text-xs leading-relaxed break-words",children:n.message})]})]}),e.jsx(ve.div,{initial:{width:"100%"},animate:{width:"0%"},transition:{duration:n.duration/1e3,ease:"linear"},className:`h-1 ${m.iconColor.replace("text-","bg-")} opacity-50`})]},n.id)})})}):null};function Rt(){const[s,a]=l.useState(()=>{const D=oe(),L=Y(),U=D||L;return console.log("[MDT] App initializing:",{isBrowser:D,isDebug:L,shouldOpen:U}),U}),[r,c]=l.useState(!1),[t,n]=l.useState("dashboard"),[m,j]=l.useState(oe()||Y()?Ae:null),[b,v]=l.useState("available"),[p,g]=l.useState(!1),i=ie(D=>D.setOfficer),x=ie(D=>D.setCanAccessChief),y=ie(D=>D.canAccessChief),h=ie(D=>D.theme);l.useEffect(()=>{(oe()||Y())&&(i(Ae),x(!0))},[]),l.useEffect(()=>{console.log("[MDT] isOpen state changed to:",s)},[s]),l.useEffect(()=>{const D=L=>{const U=L.target;p&&!U.closest(".status-dropdown-container")&&g(!1)};return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[p]),l.useEffect(()=>{const D=document.documentElement;D.style.setProperty("--theme-primary",h.primaryColor),D.style.setProperty("--theme-secondary",h.secondaryColor),D.style.setProperty("--theme-accent",h.accentColor),D.style.setProperty("--theme-button-highlight",h.buttonHighlight),D.style.setProperty("--theme-icon",h.iconColor),D.style.setProperty("--theme-border",h.borderColor);const L=U=>{const W=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(U);return W?`${parseInt(W[1],16)}, ${parseInt(W[2],16)}, ${parseInt(W[3],16)}`:"59, 130, 246"};D.style.setProperty("--theme-primary-rgb",L(h.primaryColor)),D.style.setProperty("--theme-secondary-rgb",L(h.secondaryColor)),D.style.setProperty("--theme-accent-rgb",L(h.accentColor)),D.style.setProperty("--theme-button-highlight-rgb",L(h.buttonHighlight)),D.style.setProperty("--theme-icon-rgb",L(h.iconColor)),D.style.setProperty("--theme-border-rgb",L(h.borderColor))},[h]),l.useEffect(()=>{const D=d=>{Y()&&console.debug("[MDT Debug] Received message:",d.data)};window.addEventListener("message",D);const L=re("preload",d=>{Y()&&console.log("[MDT] Preload triggered - rendering UI in background"),c(!0)}),U=re("setVisible",d=>{Y()&&console.log("[MDT] setVisible received:",d,"- Setting isOpen to:",d),oe()||Y()?a(!0):a(d),d&&!oe()&&!Y()&&H("ps-mdt:chief:canAccess").then(k=>{var M;if(k.success){const z=!!((M=k.data)!=null&&M.allowed);x(z),Y()&&console.log("[MDT] Chief Menu access check:",z)}}).catch(k=>{console.error("[MDT] Failed to check Chief Menu access:",k)})}),W=re("setOfficer",d=>{Y()&&console.log("[MDT] setOfficer received:",JSON.stringify(d,null,2)),j(d),i(d),H("ps-mdt:chief:canAccess").then(k=>{var M;k.success&&x(!!((M=k.data)!=null&&M.allowed))})}),P=re("setDebugMode",d=>{ye(d),Y()&&console.log("[MDT] Debug mode set from server:",d)}),J=re("dashboardConfig",d=>{Y()&&console.debug("[MDT] dashboardConfig received:",d)}),K=re("deptChatMessage",d=>{Y()&&console.debug("[MDT] deptChatMessage:",d)}),S=re("deptChatHistory",d=>{Y()&&console.debug("[MDT] deptChatHistory rows:",d)}),G=re("deptChatRejected",d=>{Y()&&console.debug("[MDT] deptChatRejected:",d)});return()=>{window.removeEventListener("message",D),L(),U(),W(),P(),J(),K(),S(),G()}},[]),l.useEffect(()=>{const D=L=>{L.key==="Escape"&&s&&!oe()&&!Y()&&A()};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[s]);const A=async()=>{if(oe()||Y()){console.log("[MDT] Close prevented - Debug/Browser mode active");return}a(!1),await H("close")},T=D=>{v(D),g(!1)},o=D=>{switch(D||b){case"available":return"#22C55E";case"busy":return"#EF4444";case"responding":return"#3B82F6";case"off-duty":return"#6B7280";default:return"#6B7280"}},u=D=>{switch(D||b){case"available":return"Available";case"busy":return"Busy";case"responding":return"Responding";case"off-duty":return"Off-Duty";default:return"Unknown"}},R=["available","busy","responding","off-duty"],F=()=>{switch(t){case"dashboard":return e.jsx(Z,{fullScreen:!1,scopeName:"Dashboard",children:e.jsx(Oe,{onNavigate:n})});case"incidents":return e.jsx(Z,{fullScreen:!1,scopeName:"Incidents",children:e.jsx(ht,{})});case"bolos":return e.jsx(Z,{fullScreen:!1,scopeName:"BOLOs",children:e.jsx(gt,{})});case"profile":return e.jsx(Z,{fullScreen:!1,scopeName:"Profile",children:e.jsx(ut,{})});case"penalcode":return e.jsx(Z,{fullScreen:!1,scopeName:"PenalCode",children:e.jsx(ft,{})});case"dmv":return e.jsx(Z,{fullScreen:!1,scopeName:"DMV",children:e.jsx(pt,{})});case"map":return e.jsx(Z,{fullScreen:!1,scopeName:"Map",children:e.jsx(bt,{})});case"chat":return e.jsx(Z,{fullScreen:!1,scopeName:"Chat",children:e.jsx(Tt,{})});case"settings":return e.jsx(Z,{fullScreen:!1,scopeName:"Settings",children:e.jsx(jt,{})});case"evidence":return e.jsx(Z,{fullScreen:!1,scopeName:"Evidence",children:e.jsx(vt,{})});case"chief":return e.jsx(Z,{fullScreen:!1,scopeName:"Chief Menu",children:e.jsx(Nt,{})});case"clientErrors":return e.jsx(Z,{fullScreen:!1,scopeName:"Client Errors",children:e.jsx(Et,{})});default:return e.jsx(Z,{fullScreen:!1,scopeName:"DashboardFallback",children:e.jsx(Oe,{onNavigate:n})})}};return e.jsxs(e.Fragment,{children:[e.jsx(ls,{forcedOpen:s,children:e.jsxs("div",{className:"w-full h-full flex flex-col p-[1.5vh] md:p-[2vh] lg:p-[2.5vh] relative",children:[e.jsxs("div",{className:"header flex items-center mb-[1.5vh] md:mb-[2vh] px-[1vh] py-[0.8vh] md:px-[1.5vh] md:py-[1vh] rounded-xl md:rounded-2xl border relative flex-shrink-0",style:{background:"linear-gradient(to bottom right, rgba(15,23,42,0.92), rgba(10,16,30,0.82))",borderColor:`${h.primaryColor}40`},children:[e.jsxs("div",{className:"flex items-center gap-[1vh] md:gap-[1.5vh] flex-1 min-w-0",children:[e.jsx("div",{className:"badge-logo w-[4vh] h-[4vh] md:w-[5vh] md:h-[5vh] rounded-lg shadow-lg flex items-center justify-center overflow-hidden flex-shrink-0",style:{background:`linear-gradient(to bottom right, ${h.primaryColor}, ${h.secondaryColor})`},children:h.logoType==="image"&&h.logoImage?e.jsx("img",{src:h.logoImage,alt:"Logo",className:"w-full h-full object-contain p-1"}):e.jsx("i",{className:`fa-solid ${h.logoIcon} text-white text-[1.8vh] md:text-[2vh]`})}),e.jsxs("div",{className:"min-w-0 overflow-hidden",children:[e.jsx("div",{className:"header-title uppercase text-[1.2vh] md:text-[1.4vh] font-bold tracking-wider truncate",children:h.departmentName}),e.jsx("div",{className:"text-[1vh] md:text-[1.2vh] text-[rgba(255,255,255,0.7)] truncate",children:h.departmentSubtitle})]})]}),e.jsxs("div",{className:"header-middle text-center px-[1.5vh] md:px-[2vh] py-[0.5vh] md:py-[0.8vh] rounded-lg md:rounded-xl bg-[rgba(18,25,43,0.6)] border border-[rgba(36,72,176,0.25)] absolute left-1/2 transform -translate-x-1/2 pointer-events-none hidden sm:block",children:[e.jsx("div",{className:"text-[1vh] md:text-[1.2vh] opacity-75 whitespace-nowrap",children:"January 15, 2025"}),e.jsx("div",{className:"text-[1.8vh] md:text-[2vh] font-semibold tracking-wide whitespace-nowrap",children:"12:34"})]}),e.jsx("div",{className:"header-right text-right relative flex-1 min-w-0 flex justify-end items-center gap-[1.5vh]",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-[1.3vh] md:text-[1.5vh] font-semibold",children:m?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[#FACC15]",children:m.callsign})," ",e.jsxs("span",{className:"text-white",children:[m.firstname," ",m.lastname]})]}):e.jsx("span",{className:"text-[rgba(255,255,255,0.5)]",children:"Loading..."})}),e.jsxs("div",{className:"relative mt-[0.3vh] status-dropdown-container",children:[e.jsxs("button",{onClick:()=>g(!p),className:"text-[1.1vh] md:text-[1.2vh] transition-all duration-200 hover:scale-105 cursor-pointer flex items-center justify-end gap-[0.5vh]",style:{color:o()},title:"Click to change status",children:[e.jsx("i",{className:"fa-solid fa-circle text-[0.8vh]",style:{color:o()}}),e.jsx("span",{className:"font-medium",children:u()}),e.jsx("i",{className:`fa-solid fa-chevron-${p?"up":"down"} text-[0.9vh] ml-[0.3vh]`})]}),p&&e.jsx("div",{className:"absolute right-0 top-full mt-[0.8vh] bg-[rgba(15,23,42,0.95)] border border-[rgba(36,72,176,0.3)] rounded-lg shadow-xl backdrop-blur-xl z-50 min-w-[12vh] overflow-hidden",children:R.map(D=>e.jsxs("button",{onClick:()=>T(D),className:"w-full px-[1.2vh] py-[0.8vh] text-[1.1vh] md:text-[1.2vh] flex items-center gap-[0.8vh] transition-colors duration-150 hover:bg-[rgba(56,189,248,0.15)]",style:{color:b===D?o(D):"rgba(255,255,255,0.8)",backgroundColor:b===D?"rgba(56,189,248,0.1)":"transparent"},children:[e.jsx("i",{className:"fa-solid fa-circle text-[0.8vh]",style:{color:o(D)}}),e.jsx("span",{className:"font-medium",children:u(D)}),b===D&&e.jsx("i",{className:"fa-solid fa-check text-[0.9vh] ml-auto",style:{color:o(D)}})]},D))})]})]})})]}),e.jsxs("div",{className:"main-container flex gap-[1.5vh] md:gap-[2vh] flex-1 overflow-hidden min-h-0",children:[e.jsxs("nav",{className:"nav-menu flex flex-col gap-[0.8vh] w-[12vh] sm:w-[14vh] md:w-[16vh] lg:min-w-[18vh] bg-[rgba(15,23,42,0.86)] rounded-xl md:rounded-2xl border p-[1.2vh] md:p-[1.5vh] shadow-xl backdrop-blur-xl overflow-y-auto flex-shrink-0",style:{borderColor:"rgba(var(--theme-border-rgb), 0.18)"},children:[e.jsx("div",{onClick:()=>n("dashboard"),children:e.jsx(he,{label:"Dashboard",icon:e.jsx("i",{className:"fa-solid fa-chart-line"}),active:t==="dashboard"})}),e.jsx("div",{onClick:()=>n("incidents"),children:e.jsx(he,{label:"Incidents",icon:e.jsx("i",{className:"fa-solid fa-clipboard-list"}),active:t==="incidents"})}),e.jsx("div",{onClick:()=>n("bolos"),children:e.jsx(he,{label:"BOLOs",icon:e.jsx("i",{className:"fa-solid fa-bell"}),active:t==="bolos"})}),e.jsx("div",{onClick:()=>n("profile"),children:e.jsx(he,{label:"Profiles",icon:e.jsx("i",{className:"fa-solid fa-id-card"}),active:t==="profile"})}),e.jsx("div",{onClick:()=>n("penalcode"),children:e.jsx(he,{label:"Penal Code",icon:e.jsx("i",{className:"fa-solid fa-gavel"}),active:t==="penalcode"})}),e.jsx("div",{onClick:()=>n("dmv"),children:e.jsx(he,{label:"DMV",icon:e.jsx("i",{className:"fa-solid fa-car-side"}),active:t==="dmv"})}),e.jsx("div",{onClick:()=>n("evidence"),children:e.jsx(he,{label:"Evidence",icon:e.jsx("i",{className:"fa-solid fa-box"}),active:t==="evidence"})}),e.jsx("div",{onClick:()=>n("map"),children:e.jsx(he,{label:"Map",icon:e.jsx("i",{className:"fa-solid fa-map"}),active:t==="map"})}),e.jsx("div",{onClick:()=>n("chat"),children:e.jsx(he,{label:"Chat",icon:e.jsx("i",{className:"fa-solid fa-comments"}),active:t==="chat"})}),(y||Y()||oe())&&e.jsx("div",{onClick:()=>n("chief"),children:e.jsx(he,{label:"Chief Menu",icon:e.jsx("i",{className:"fa-solid fa-star"}),active:t==="chief"})}),(y||Y()||oe())&&e.jsx("div",{onClick:()=>n("clientErrors"),children:e.jsx(he,{label:"Client Errors",icon:e.jsx("i",{className:"fa-solid fa-bug"}),active:t==="clientErrors"})}),e.jsx("div",{onClick:()=>n("settings"),children:e.jsx(he,{label:"Settings",icon:e.jsx("i",{className:"fa-solid fa-gear"}),active:t==="settings"})})]}),e.jsx("section",{className:"flex-1 overflow-auto pr-[0.8vh] min-w-0",children:F()})]})]})}),e.jsx(It,{visible:!0})]})}$e(document.getElementById("root")).render(e.jsx(ge.StrictMode,{children:e.jsx(Z,{children:e.jsx(Rt,{})})}));window.addEventListener("error",s=>{try{console.error("[MDT][Global Error]",s.error||s.message||s);try{window.psReportClientError&&window.psReportClientError(s.error||{message:s.message})}catch{}}catch{}});window.addEventListener("unhandledrejection",s=>{try{console.error("[MDT][Unhandled Rejection]",s.reason);try{window.psReportClientError&&window.psReportClientError(s.reason||{message:"Unhandled rejection"})}catch{}}catch{}});
